<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>查询流程审批节点报表</title>
      <link href="/2024/01/18/oa/%E6%9F%A5%E8%AF%A2%E5%AE%A1%E6%89%B9%E8%8A%82%E7%82%B9%E6%8A%A5%E8%A1%A8/"/>
      <url>/2024/01/18/oa/%E6%9F%A5%E8%AF%A2%E5%AE%A1%E6%89%B9%E8%8A%82%E7%82%B9%E6%8A%A5%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="查询审批节点报表"><a href="#查询审批节点报表" class="headerlink" title="查询审批节点报表"></a>查询审批节点报表</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> &quot;单据编号&quot;, &quot;审批节点&quot;, &quot;审核人&quot;, &quot;岗位&quot;, &quot;操作时间&quot;, <span class="built_in">MIN</span>(&quot;接收时间&quot;) <span class="keyword">as</span> &quot;接收时间&quot;, logtype <span class="keyword">as</span> &quot;操作状态&quot;</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> y.requestmark <span class="keyword">AS</span> &quot;单据编号&quot;,</span><br><span class="line">        y.nodename <span class="keyword">AS</span> &quot;审批节点&quot;,</span><br><span class="line">        y.lastname <span class="keyword">AS</span> &quot;审核人&quot;,</span><br><span class="line">        y.jobtitlemark <span class="keyword">AS</span> &quot;岗位&quot;,</span><br><span class="line">        y.czsj <span class="keyword">AS</span> &quot;操作时间&quot;,</span><br><span class="line">        z.operatedate <span class="operator">||</span> <span class="string">&#x27; &#x27;</span> <span class="operator">||</span> z.operatetime <span class="keyword">AS</span> &quot;接收时间&quot;,</span><br><span class="line">        y.logtype</span><br><span class="line">    <span class="keyword">FROM</span> (</span><br><span class="line">        <span class="keyword">SELECT</span> x.nodeid, x.requestmark, x.nodename, x.lastname, x.jobtitlemark, x.czsj, x.requestid, x.logtype</span><br><span class="line">        <span class="keyword">FROM</span> (</span><br><span class="line">            <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> a.requestmark,</span><br><span class="line">                c.nodename,</span><br><span class="line">                a.requestid,</span><br><span class="line">                b.nodeid,</span><br><span class="line">                <span class="keyword">CASE</span></span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span> <span class="string">&#x27;0&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;批准&#x27;</span></span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;保存&#x27;</span></span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span> <span class="string">&#x27;2&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;提交&#x27;</span></span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span> <span class="string">&#x27;3&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;退回&#x27;</span></span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span> <span class="string">&#x27;4&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;重新打开&#x27;</span></span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span> <span class="string">&#x27;5&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;删除&#x27;</span></span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span> <span class="string">&#x27;6&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;激活&#x27;</span></span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span> <span class="string">&#x27;7&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;转发&#x27;</span></span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span> <span class="string">&#x27;9&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;批注&#x27;</span></span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span> <span class="string">&#x27;a&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;意见征询&#x27;</span></span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span> <span class="string">&#x27;b&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;意见征询回复&#x27;</span></span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span> <span class="string">&#x27;e&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;强制归档&#x27;</span></span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span><span class="string">&#x27;h&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;转办&#x27;</span></span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span> <span class="string">&#x27;i&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;干预&#x27;</span> </span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span> <span class="string">&#x27;j&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;转办反馈&#x27;</span></span><br><span class="line">                    <span class="keyword">WHEN</span> b.logtype <span class="operator">=</span> <span class="string">&#x27;s&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;督办&#x27;</span>      </span><br><span class="line">                    <span class="keyword">ELSE</span> <span class="string">&#x27;抄送&#x27;</span></span><br><span class="line">                <span class="keyword">END</span> <span class="keyword">AS</span> logtype,</span><br><span class="line">                (<span class="keyword">SELECT</span> lastname <span class="keyword">FROM</span> ecology.hrmresource <span class="keyword">WHERE</span> id <span class="operator">=</span> b.OPERATOR) lastname,</span><br><span class="line">                (<span class="keyword">SELECT</span> h.jobtitlemark <span class="keyword">FROM</span> ecology.hrmjobtitles h, ecology.hrmresource i <span class="keyword">WHERE</span> h.id <span class="operator">=</span> i.jobtitle <span class="keyword">AND</span> i.id <span class="operator">=</span> b.OPERATOR <span class="keyword">AND</span> rownum <span class="operator">=</span> <span class="number">1</span>) jobtitlemark,</span><br><span class="line">                b.operatedate <span class="operator">||</span> <span class="string">&#x27; &#x27;</span> <span class="operator">||</span> b.operatetime czsj</span><br><span class="line">            <span class="keyword">FROM</span> ecology.workflow_requestbase a,</span><br><span class="line">                ecology.workflow_requestlog b,</span><br><span class="line">                ecology.workflow_nodebase c</span><br><span class="line">            <span class="keyword">WHERE</span> a.requestid <span class="operator">=</span> b.requestid</span><br><span class="line">                <span class="keyword">AND</span> a.workflowid <span class="operator">=</span> b.workflowid</span><br><span class="line">                <span class="keyword">AND</span> c.id <span class="operator">=</span> b.nodeid</span><br><span class="line">                <span class="keyword">AND</span> a.workflowid <span class="keyword">IN</span> (<span class="number">4024</span>)</span><br><span class="line">                <span class="keyword">AND</span> TO_DATE(a.createdate, <span class="string">&#x27;yyyy-MM-dd&#x27;</span>) <span class="operator">&gt;=</span> TO_DATE(<span class="string">&#x27;2022-01-01&#x27;</span>, <span class="string">&#x27;yyyy-MM-dd&#x27;</span>)</span><br><span class="line">        ) x</span><br><span class="line">    ) y</span><br><span class="line">    <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> ecology.workflow_requestlog z <span class="keyword">ON</span> y.requestid <span class="operator">=</span> z.requestid <span class="keyword">AND</span> z.destnodeid <span class="operator">=</span> y.nodeid</span><br><span class="line">  </span><br><span class="line">) <span class="keyword">GROUP</span> <span class="keyword">BY</span> &quot;单据编号&quot;, &quot;审批节点&quot;, &quot;审核人&quot;, &quot;岗位&quot;, &quot;操作时间&quot;, logtype   <span class="keyword">ORDER</span> <span class="keyword">BY</span> &quot;单据编号&quot;, &quot;操作时间&quot;</span><br></pre></td></tr></table></figure><h1 id="导出数据"><a href="#导出数据" class="headerlink" title="导出数据"></a>导出数据</h1><p>采购申请（4024）</p><p>付款申请17521</p><p>合同管理 23021，69022，33521</p><p>借款申请3022</p><p>零星工程16521</p><p>设备添置77521，18021</p><p>应付申请13021，6521</p><p>预付以及阶段性付款审批数据3521</p><p>​</p>]]></content>
      
      
      <categories>
          
          <category> OA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA报表 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>预算调整单</title>
      <link href="/2024/01/18/oa/%E9%A2%84%E7%AE%97%E8%B0%83%E6%95%B4%E5%8D%95/"/>
      <url>/2024/01/18/oa/%E9%A2%84%E7%AE%97%E8%B0%83%E6%95%B4%E5%8D%95/</url>
      
        <content type="html"><![CDATA[<p>预算调整单</p><h1 id="找不到板块负责人"><a href="#找不到板块负责人" class="headerlink" title="找不到板块负责人"></a>找不到板块负责人</h1><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240118133333763.png" alt="image-20240118133333763" style="zoom: 50%;" /><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240118140413865.png" alt="image-20240118140413865" style="zoom: 33%;" /><p>ECOLOGY.VIEW_REPORTLINE</p><p>这个视图，一个部门查出来有多个部门负责人，导致视图挂了，拿不到部门负责人</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> status <span class="keyword">from</span> hrmresource <span class="keyword">where</span> id <span class="keyword">in</span> (<span class="number">17923</span>,<span class="number">30806</span>)</span><br><span class="line"><span class="keyword">select</span> BMFZR <span class="keyword">from</span> hrmdepartmentdefined <span class="keyword">where</span> bmfzr <span class="keyword">like</span> <span class="string">&#x27;%14032%&#x27;</span></span><br></pre></td></tr></table></figure><p>这里就要想办法去掉无效的人 7是无效的</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240118144117209.png" alt="image-20240118144117209" style="zoom:25%;" /><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> hrmdepartmentdefined d</span><br><span class="line"><span class="keyword">SET</span> d.BMFZR <span class="operator">=</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="built_in">LISTAGG</span>(r.id, <span class="string">&#x27;,&#x27;</span>) <span class="keyword">WITHIN</span> <span class="keyword">GROUP</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> r.id)</span><br><span class="line">    <span class="keyword">FROM</span> hrmresource r</span><br><span class="line">    <span class="keyword">WHERE</span> <span class="string">&#x27;,&#x27;</span> <span class="operator">||</span> d.BMFZR <span class="operator">||</span> <span class="string">&#x27;,&#x27;</span> <span class="keyword">LIKE</span> <span class="string">&#x27;%,&#x27;</span> <span class="operator">||</span> TO_CHAR(r.id) <span class="operator">||</span> <span class="string">&#x27;,%&#x27;</span> </span><br><span class="line">      <span class="keyword">AND</span> r.status <span class="operator">!=</span> <span class="number">7</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">FROM</span> hrmresource r</span><br><span class="line">    <span class="keyword">WHERE</span> <span class="string">&#x27;,&#x27;</span> <span class="operator">||</span> d.BMFZR <span class="operator">||</span> <span class="string">&#x27;,&#x27;</span> <span class="keyword">LIKE</span> <span class="string">&#x27;%,&#x27;</span> <span class="operator">||</span> TO_CHAR(r.id) <span class="operator">||</span> <span class="string">&#x27;,%&#x27;</span></span><br><span class="line">      <span class="keyword">AND</span> r.status <span class="operator">=</span> <span class="number">7</span></span><br><span class="line">) </span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> ecology.hrmresource <span class="keyword">where</span> id <span class="keyword">in</span> (<span class="number">17999</span>,<span class="number">28990</span>)</span><br></pre></td></tr></table></figure><p>这个人有两个有效账号，不知道为什么 需要特殊处理一下</p>]]></content>
      
      
      <categories>
          
          <category> OA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 预算调整申请单流程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>信息系统工程</title>
      <link href="/2024/01/18/%E9%AB%98%E9%A1%B9/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/"/>
      <url>/2024/01/18/%E9%AB%98%E9%A1%B9/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E5%B7%A5%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p>信息系统工程</p><p>架构：高级抽象  模式以及模式的约束组成；解决软件的复用、质量和维护问题。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">数据流风格 批处理/过滤器</span><br><span class="line">调用/返回风格 面向对象</span><br><span class="line">独立构件风格 进程通信和事件驱动</span><br><span class="line">虚拟机风格 解释器和基于规则</span><br><span class="line">仓库风格 数据库系统、黑板系统和超文本</span><br></pre></td></tr></table></figure><p>软件需求：用户对功能、行为、性能、设计约束等方面的期望。</p><h2 id="需求过程"><a href="#需求过程" class="headerlink" title="需求过程"></a>需求过程</h2><h3 id="需求获取"><a href="#需求获取" class="headerlink" title="需求获取"></a>需求获取</h3><p>用户访谈、用户调查、采样、情节串 、联合需求计划</p><h3 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h3><p>考过1分</p><p>结构化分析  核心是数据字典。  数据模型、功能模型、行为模型。</p><p>实体关系图E-R表示数据模型、用数据流图DFD表示功能模型、用状态转换图STD表示行为模型。</p><h3 id="需求规格说明书"><a href="#需求规格说明书" class="headerlink" title="需求规格说明书"></a>需求规格说明书</h3><p><strong>SRS</strong>是需求开发活动的产物，任何规模和性质的软件项目都不应该缺少。</p><h4 id="需求验证和确认"><a href="#需求验证和确认" class="headerlink" title="需求验证和确认"></a>需求验证和确认</h4><p>UML统一建模语言。不是开发语言。考语文题，</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">结构事物 ：接口、类、用例、活动类、构件和节点</span><br><span class="line">行为事物：</span><br><span class="line">分组事物</span><br><span class="line">注释事物</span><br></pre></td></tr></table></figure><p>关系</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">依赖影响、关联链接、泛化特殊、实现执行</span><br></pre></td></tr></table></figure><p>UML中的图</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">类图 接口、类、协作和它们之间的关系</span><br><span class="line">对象图 一组对象和它们之间的关系</span><br><span class="line">构件图 一个封装的类和它的接口、端口</span><br><span class="line">组合结构图</span><br><span class="line">用例图 一组用例、参与者以及它们之间的关系</span><br><span class="line">状态图 看到状态选状态</span><br><span class="line">部署 看到部署选部署</span><br><span class="line">看到动态选动态 看到静态选静态</span><br></pre></td></tr></table></figure><h2 id="软件设计"><a href="#软件设计" class="headerlink" title="软件设计"></a>软件设计</h2><p>解决‘怎么做’ 的问题</p><h3 id="结构化设计"><a href="#结构化设计" class="headerlink" title="结构化设计"></a>结构化设计</h3><p>面向数据流的方法。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">高内聚、低耦合。</span><br><span class="line">目标单一，模块之间联系比较弱。</span><br></pre></td></tr></table></figure><h3 id="面向对象设计"><a href="#面向对象设计" class="headerlink" title="面向对象设计"></a>面向对象设计</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">单职原则</span><br><span class="line">开闭原则 对拓展开放，对修改封闭</span><br><span class="line">李氏替换原则 子类可以替换父类</span><br><span class="line">依赖倒置原则 依赖于抽象，而不是具体实现</span><br><span class="line">接口隔离原则 使用多个接口比单一的接口要好</span><br><span class="line">组合服用原则 尽量使用组合而不是继承</span><br><span class="line">迪米特原则  一个对象应当对其他的对象尽可能的少的了解</span><br></pre></td></tr></table></figure><h3 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">创建型</span><br><span class="line">结构型</span><br><span class="line">行为型</span><br></pre></td></tr></table></figure><h2 id="软件的实现"><a href="#软件的实现" class="headerlink" title="软件的实现"></a>软件的实现</h2><p>静态测试和动态测试</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">静态是桌前检查、代码走查、和代码审查</span><br><span class="line">动态是在计算机上实际运行程序进行软件测试、一般采用白盒测试和黑盒测试的方法，一般用黑盒和白盒测试。</span><br><span class="line">看到覆盖选白盒</span><br></pre></td></tr></table></figure><h2 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h2><p>概念、逻辑、物理</p><h2 id="数据可视化"><a href="#数据可视化" class="headerlink" title="数据可视化"></a>数据可视化</h2><p>一维：文字、数字、表格、程序代码</p><p>二维：平面地图、建筑物的楼层平面图</p><p>三维：立体细腻些</p><p>多维：降维</p><h2 id="集成基础"><a href="#集成基础" class="headerlink" title="集成基础"></a>集成基础</h2><p>开放性、结构化、先进性、主流化</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240117223220888.png" alt="image-20240117223220888"></p><h2 id="安全系统"><a href="#安全系统" class="headerlink" title="安全系统"></a>安全系统</h2><p>基础设施实体：场地，机房，动力系统</p><p>平台：操作系统</p><p>数据</p><p>通信</p><p>应用</p><p>运行</p><p>管理</p><p>授权和审计</p><p>安全防范体系</p>]]></content>
      
      
      <categories>
          
          <category> 软考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 高项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/2024/01/18/%E7%BB%8F%E6%B5%8E/%E7%A8%8E%E5%8A%A1/%E4%B9%B0%E4%B8%80%E4%B8%AA%E6%B1%89%E5%A0%A1%E9%9C%80%E8%A6%81%E4%BA%A4%E5%A4%9A%E5%B0%91%E7%A8%8E/"/>
      <url>/2024/01/18/%E7%BB%8F%E6%B5%8E/%E7%A8%8E%E5%8A%A1/%E4%B9%B0%E4%B8%80%E4%B8%AA%E6%B1%89%E5%A0%A1%E9%9C%80%E8%A6%81%E4%BA%A4%E5%A4%9A%E5%B0%91%E7%A8%8E/</url>
      
        <content type="html"><![CDATA[<p>买一个汉堡需要交多少税</p><p>对于企业销售一个价值为40元的汉堡，涉及到消费者支付的税费和企业需要交纳的税费，我们可以分别计算如下：</p><p>对于消费者：增值税：按照当前中国增值税税率为13%，消费者购买40元的汉堡需要支付的增值税为40元 × 13% &#x3D; 5.2元。</p><p>对于企业：增值税：企业销售价值为40元的汉堡，根据增值税逐级抵扣的原则，</p><p><strong>假设供应链上前置环节已经缴纳了相应的增值税</strong>，那么企业实际需要缴纳的增值税为零。</p><p>企业所得税：根据企业所得税税率为25%，计算企业利润。假设企业的利润为10元（假设成本、费用等为30元），那么企业所得税为10元 × 25% &#x3D; 2.5元。</p><p>综上所述，消费者支付的税费为5.2元，企业需要交纳的税费为2.5元。</p><p>因此，消费者和企业加起来总共需要交纳的税费为5.2元 + 2.5元 &#x3D; 7.7元。</p><p>实际可能是10元税。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>会议事项电子化跟踪需求</title>
      <link href="/2024/01/18/oa/%E4%BC%9A%E8%AE%AE%E4%BA%8B%E9%A1%B9%E7%94%B5%E5%AD%90%E5%8C%96%E8%B7%9F%E8%B8%AA%E9%9C%80%E6%B1%82/"/>
      <url>/2024/01/18/oa/%E4%BC%9A%E8%AE%AE%E4%BA%8B%E9%A1%B9%E7%94%B5%E5%AD%90%E5%8C%96%E8%B7%9F%E8%B8%AA%E9%9C%80%E6%B1%82/</url>
      
        <content type="html"><![CDATA[<p>会议事项电子化跟踪需求</p><h1 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h1><p>相关资料</p><p><a href="https://hisunchenbaitao.oss-cn-beijing.aliyuncs.com/%E4%BC%9A%E8%AE%AE%E4%BA%8B%E9%A1%B9%E7%9B%B8%E5%85%B3%E6%96%87%E4%BB%B6.rar?Expires=1705473930&OSSAccessKeyId=TMP.3KeyVm9eeSk7LZrSRHi3i4JNm1mgLL2iubNwSTUvfuUJQjj6SNnisg4UfKBjNwGGaKRQNQmqhYZCe1CESdhFf8voUbsfVk&Signature=QdOGIhVew47qQTfMU/CSN/je3i4=">https://hisunchenbaitao.oss-cn-beijing.aliyuncs.com/%E4%BC%9A%E8%AE%AE%E4%BA%8B%E9%A1%B9%E7%9B%B8%E5%85%B3%E6%96%87%E4%BB%B6.rar?Expires=1705473930&amp;OSSAccessKeyId=TMP.3KeyVm9eeSk7LZrSRHi3i4JNm1mgLL2iubNwSTUvfuUJQjj6SNnisg4UfKBjNwGGaKRQNQmqhYZCe1CESdhFf8voUbsfVk&amp;Signature=QdOGIhVew47qQTfMU%2FCSN%2Fje3i4%3D</a></p><p>需要增加相关人的上级可以查看的权限。</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240117154446801.png" alt="image-20240117154446801" style="zoom: 50%;" /><p>原SQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gzxzsl <span class="operator">&gt;</span><span class="number">0</span> <span class="keyword">and</span> (bm <span class="operator">=</span> $DepartmentId$ <span class="keyword">or</span> $UserId$ <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span> </span><br><span class="line"><span class="keyword">or</span> </span><br><span class="line">bm <span class="keyword">in</span> (<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> hrmdepartment <span class="keyword">WHERE</span> SUPDEPID <span class="operator">=</span> (<span class="keyword">select</span> SUPDEPID <span class="keyword">from</span> hrmdepartment  <span class="keyword">WHERE</span> id <span class="operator">=</span>$DepartmentId$)</span><br><span class="line"> )</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>查询所有上级所管辖的所有部门</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> departmentid</span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource</span><br><span class="line"><span class="keyword">WHERE</span> <span class="string">&#x27;,&#x27;</span> <span class="operator">||</span> (<span class="keyword">SELECT</span> managerstr <span class="keyword">FROM</span> ecology.hrmresource <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">8867</span>) <span class="operator">||</span> <span class="string">&#x27;,&#x27;</span> <span class="keyword">LIKE</span> <span class="string">&#x27;%,&#x27;</span> <span class="operator">||</span> TO_CHAR(id) <span class="operator">||</span> <span class="string">&#x27;,%&#x27;</span></span><br></pre></td></tr></table></figure><p>查询用户所管辖的所有下级部门</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">gzxzsl <span class="operator">&gt;</span><span class="number">0</span> <span class="keyword">and</span> (bm <span class="operator">=</span> $DepartmentId$ <span class="keyword">or</span> $UserId$ <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span> </span><br><span class="line"><span class="keyword">or</span> </span><br><span class="line">bm <span class="keyword">in</span> (</span><br><span class="line"><span class="keyword">SELECT</span> departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource </span><br><span class="line"><span class="keyword">WHERE</span> managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h2.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h3.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h4.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h4 <span class="keyword">ON</span> h3.id <span class="operator">=</span> h4.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h5.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h4 <span class="keyword">ON</span> h3.id <span class="operator">=</span> h4.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h5 <span class="keyword">ON</span> h4.id <span class="operator">=</span> h5.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h6.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h4 <span class="keyword">ON</span> h3.id <span class="operator">=</span> h4.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h5 <span class="keyword">ON</span> h4.id <span class="operator">=</span> h5.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h6 <span class="keyword">ON</span> h5.id <span class="operator">=</span> h6.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h7.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h4 <span class="keyword">ON</span> h3.id <span class="operator">=</span> h4.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h5 <span class="keyword">ON</span> h4.id <span class="operator">=</span> h5.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h6 <span class="keyword">ON</span> h5.id <span class="operator">=</span> h6.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h7 <span class="keyword">ON</span> h6.id <span class="operator">=</span> h7.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h8.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h4 <span class="keyword">ON</span> h3.id <span class="operator">=</span> h4.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h5 <span class="keyword">ON</span> h4.id <span class="operator">=</span> h5.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h6 <span class="keyword">ON</span> h5.id <span class="operator">=</span> h6.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h7 <span class="keyword">ON</span> h6.id <span class="operator">=</span> h7.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h8 <span class="keyword">ON</span> h7.id <span class="operator">=</span> h8.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h9.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h4 <span class="keyword">ON</span> h3.id <span class="operator">=</span> h4.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h5 <span class="keyword">ON</span> h4.id <span class="operator">=</span> h5.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h6 <span class="keyword">ON</span> h5.id <span class="operator">=</span> h6.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h7 <span class="keyword">ON</span> h6.id <span class="operator">=</span> h7.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h8 <span class="keyword">ON</span> h7.id <span class="operator">=</span> h8.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h9 <span class="keyword">ON</span> h8.id <span class="operator">=</span> h9.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h10.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h4 <span class="keyword">ON</span> h3.id <span class="operator">=</span> h4.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h5 <span class="keyword">ON</span> h4.id <span class="operator">=</span> h5.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h6 <span class="keyword">ON</span> h5.id <span class="operator">=</span> h6.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h7 <span class="keyword">ON</span> h6.id <span class="operator">=</span> h7.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h8 <span class="keyword">ON</span> h7.id <span class="operator">=</span> h8.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h9 <span class="keyword">ON</span> h8.id <span class="operator">=</span> h9.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h10 <span class="keyword">ON</span> h9.id <span class="operator">=</span> h10.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line">)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA </tag>
            
            <tag> 未完成 </tag>
            
            <tag> 会议事项流程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL技巧</title>
      <link href="/2024/01/17/it/SQL%20%E6%8A%80%E5%B7%A7/"/>
      <url>/2024/01/17/it/SQL%20%E6%8A%80%E5%B7%A7/</url>
      
        <content type="html"><![CDATA[<p>SQL 技巧</p><span id="more"></span><h1 id="窗口函数"><a href="#窗口函数" class="headerlink" title="窗口函数"></a>窗口函数</h1><h2 id="ROW-NUMBER"><a href="#ROW-NUMBER" class="headerlink" title="ROW_NUMBER()"></a>ROW_NUMBER()</h2><p>在查询中遇到其他列一样，取日期最大的场景可以，为每列分配一个窗口函数根据日期排序，并且分配一个行号，取行号1.</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> V_DSFK <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> ROWNUM ID1, a.<span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">(<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="string">&#x27;已报销&#x27;</span> bxzt, a.APPLICANT, a.OPERATOR JBR, a.DEPARTMENT, a.KOSTL, a.COMPANY, a.NO, c.OPERATOR,</span><br><span class="line">       d.OPERATEDATE, a.VOUCHER, f.PURCHASER, f.PURCHASERTAXNO, f.SELLER, f.SALESTAXNO,</span><br><span class="line">       <span class="keyword">CASE</span></span><br><span class="line">           f.INVOICETYPE</span><br><span class="line">           <span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line">               <span class="string">&#x27;增值税普通发票&#x27;</span></span><br><span class="line">           ...</span><br><span class="line">           <span class="keyword">ELSE</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">       <span class="keyword">END</span> <span class="keyword">AS</span> INVOICETYPE,</span><br><span class="line">       <span class="keyword">CASE</span></span><br><span class="line">           <span class="keyword">WHEN</span> f.INVOICETYPE <span class="keyword">in</span> (<span class="number">32</span>,<span class="number">33</span>) <span class="keyword">and</span> LENGTH(f.INVOICENUMBER)<span class="operator">=</span><span class="number">20</span> <span class="keyword">THEN</span> <span class="string">&#x27;数电票&#x27;</span></span><br><span class="line">           <span class="keyword">ELSE</span> f.INVOICECODE</span><br><span class="line">       <span class="keyword">END</span> <span class="keyword">AS</span> INVOICECODE,</span><br><span class="line">       f.INVOICETYPE <span class="keyword">as</span> type, f.TAXINCLUDEDPRICE, f.PRICEWITHOUTTAX, f.TAXRATE, f.INVOICENUMBER, f.BILLINGDATE,</span><br><span class="line">       f.TAX, <span class="string">&#x27;是&#x27;</span> SFGX, f.CHECKSTATUS,</span><br><span class="line">       <span class="built_in">ROW_NUMBER</span>() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> a.APPLICANT <span class="keyword">ORDER</span> <span class="keyword">BY</span> d.OPERATEDATE <span class="keyword">DESC</span>) <span class="keyword">AS</span> rn</span><br><span class="line"><span class="keyword">FROM</span> ECOLOGY.FORMTABLE_MAIN_54 a </span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> ECOLOGY.FNAINVOICELEDGER f <span class="keyword">ON</span> a.requestid <span class="operator">=</span> f.requestid</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> ECOLOGY.WORKFLOW_REQUESTLOG c <span class="keyword">on</span> a.REQUESTID <span class="operator">=</span> c.REQUESTID <span class="keyword">and</span> c.NODEID <span class="keyword">in</span> (<span class="string">&#x27;3531&#x27;</span>,<span class="string">&#x27;13544&#x27;</span>,<span class="string">&#x27;13536&#x27;</span> )</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> ECOLOGY.WORKFLOW_REQUESTLOG d <span class="keyword">on</span> a.REQUESTID <span class="operator">=</span> d.REQUESTID <span class="keyword">and</span> d.NODEID <span class="keyword">in</span> (<span class="string">&#x27;3533&#x27;</span>,<span class="string">&#x27;13546&#x27;</span>,<span class="string">&#x27;13538&#x27;</span>)</span><br><span class="line">) a</span><br><span class="line"><span class="keyword">WHERE</span> a.rn <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure><h1 id="复杂处理"><a href="#复杂处理" class="headerlink" title="复杂处理"></a>复杂处理</h1><h2 id="clob截取字符串"><a href="#clob截取字符串" class="headerlink" title="clob截取字符串"></a>clob截取字符串</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TO_CHAR(SUBSTR(c.remark, <span class="number">1</span>, <span class="number">3500</span>)) <span class="keyword">as</span> remark</span><br></pre></td></tr></table></figure><h2 id="字符串拼接"><a href="#字符串拼接" class="headerlink" title="字符串拼接"></a>字符串拼接</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">or</span>  (<span class="keyword">select</span> managerstr <span class="keyword">from</span> ecology.hrmresource  <span class="keyword">where</span> id <span class="operator">=</span>  d1.zrr)  <span class="keyword">like</span> <span class="string">&#x27;%&#x27;</span><span class="operator">||</span> $UserId$  <span class="operator">||</span> <span class="string">&#x27;%&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="递归已知层级不用函数的平替写法"><a href="#递归已知层级不用函数的平替写法" class="headerlink" title="递归已知层级不用函数的平替写法"></a>递归已知层级不用函数的平替写法</h2><p>比如这是十级</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line">gzxzsl <span class="operator">&gt;</span><span class="number">0</span> <span class="keyword">and</span> (bm <span class="operator">=</span> $DepartmentId$ <span class="keyword">or</span> $UserId$ <span class="operator">=</span> <span class="string">&#x27;1&#x27;</span> </span><br><span class="line"><span class="keyword">or</span> </span><br><span class="line">bm <span class="keyword">in</span> (</span><br><span class="line"><span class="keyword">SELECT</span> departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource </span><br><span class="line"><span class="keyword">WHERE</span> managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h2.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h3.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h4.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h4 <span class="keyword">ON</span> h3.id <span class="operator">=</span> h4.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h5.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h4 <span class="keyword">ON</span> h3.id <span class="operator">=</span> h4.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h5 <span class="keyword">ON</span> h4.id <span class="operator">=</span> h5.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h6.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h4 <span class="keyword">ON</span> h3.id <span class="operator">=</span> h4.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h5 <span class="keyword">ON</span> h4.id <span class="operator">=</span> h5.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h6 <span class="keyword">ON</span> h5.id <span class="operator">=</span> h6.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h7.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h4 <span class="keyword">ON</span> h3.id <span class="operator">=</span> h4.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h5 <span class="keyword">ON</span> h4.id <span class="operator">=</span> h5.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h6 <span class="keyword">ON</span> h5.id <span class="operator">=</span> h6.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h7 <span class="keyword">ON</span> h6.id <span class="operator">=</span> h7.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h8.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h4 <span class="keyword">ON</span> h3.id <span class="operator">=</span> h4.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h5 <span class="keyword">ON</span> h4.id <span class="operator">=</span> h5.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h6 <span class="keyword">ON</span> h5.id <span class="operator">=</span> h6.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h7 <span class="keyword">ON</span> h6.id <span class="operator">=</span> h7.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h8 <span class="keyword">ON</span> h7.id <span class="operator">=</span> h8.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h9.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h4 <span class="keyword">ON</span> h3.id <span class="operator">=</span> h4.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h5 <span class="keyword">ON</span> h4.id <span class="operator">=</span> h5.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h6 <span class="keyword">ON</span> h5.id <span class="operator">=</span> h6.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h7 <span class="keyword">ON</span> h6.id <span class="operator">=</span> h7.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h8 <span class="keyword">ON</span> h7.id <span class="operator">=</span> h8.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h9 <span class="keyword">ON</span> h8.id <span class="operator">=</span> h9.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> h10.departmentid </span><br><span class="line"><span class="keyword">FROM</span> ecology.hrmresource h1</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h2 <span class="keyword">ON</span> h1.id <span class="operator">=</span> h2.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h3 <span class="keyword">ON</span> h2.id <span class="operator">=</span> h3.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h4 <span class="keyword">ON</span> h3.id <span class="operator">=</span> h4.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h5 <span class="keyword">ON</span> h4.id <span class="operator">=</span> h5.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h6 <span class="keyword">ON</span> h5.id <span class="operator">=</span> h6.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h7 <span class="keyword">ON</span> h6.id <span class="operator">=</span> h7.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h8 <span class="keyword">ON</span> h7.id <span class="operator">=</span> h8.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h9 <span class="keyword">ON</span> h8.id <span class="operator">=</span> h9.managerid</span><br><span class="line"><span class="keyword">JOIN</span> ecology.hrmresource h10 <span class="keyword">ON</span> h9.id <span class="operator">=</span> h10.managerid </span><br><span class="line"><span class="keyword">WHERE</span> h1.managerid <span class="operator">=</span> $UserId$ </span><br><span class="line">)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="LISTAGG"><a href="#LISTAGG" class="headerlink" title="LISTAGG"></a>LISTAGG</h2><p><code>LISTAGG</code>函数的基本语法如下：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">LISTAGG</span>(<span class="keyword">column</span>, separator) <span class="keyword">WITHIN</span> <span class="keyword">GROUP</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> sort_expression)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>其中：</p><ul><li><code>column</code>: 指定需要聚合连接的列。</li><li><code>separator</code>: 定义连接各个元素时使用的分隔符。这个参数是可选的，默认情况下不使用分隔符。</li><li><code>WITHIN GROUP (ORDER BY sort_expression)</code>: 用于指定聚合操作中列值排序的方式。<code>sort_expression</code>决定了输出字符串中值的顺序。</li></ul><p>这个函数按照指定的 <code>ORDER BY</code>语句将相应的数据行值进行排序，并使用指定的分隔符（如果有的话）将这些值连接起来。</p><p>例如，假设我们有以下表格和数据：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> employees (</span><br><span class="line">    department_id NUMBER,</span><br><span class="line">    employee_name VARCHAR2(<span class="number">50</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employees (department_id, employee_name) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;Alice&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employees (department_id, employee_name) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;Bob&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employees (department_id, employee_name) <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;Charlie&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> employees (department_id, employee_name) <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;David&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果我们想为每个部门生成一个员工名字的逗号分隔列表，我们可以使用 <code>LISTAGG</code>如下：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> department_id, </span><br><span class="line">       <span class="built_in">LISTAGG</span>(employee_name, <span class="string">&#x27;, &#x27;</span>) <span class="keyword">WITHIN</span> <span class="keyword">GROUP</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> employee_name) <span class="keyword">AS</span> employees</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>结果是：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DEPARTMENT_ID <span class="operator">|</span> EMPLOYEES</span><br><span class="line"><span class="number">1</span>             <span class="operator">|</span> Alice, Bob</span><br><span class="line"><span class="number">2</span>             <span class="operator">|</span> Charlie, David</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在这里，<code>LISTAGG</code>函数按照 <code>employee_name</code>排序并以逗号和空格作为分隔符将同一部门的员工名字连接起来。</p><p><code>LISTAGG</code>函数在处理大量数据时要注意，因为这个函数生成的结果必须满足数据库字段的大小限制。如果预期的结果超出了字段或变量允许的最大长度，则会引发错误，Oracle中VARCHAR2类型的最大长度限定在4000字节。</p>]]></content>
      
      
      <categories>
          
          <category> IT </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
            <tag> 后端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>合同筛选物料客户问题</title>
      <link href="/2024/01/16/oa%E5%8F%91%E5%B8%83/2024/%E5%90%88%E5%90%8C%E7%AD%9B%E9%80%89%E9%97%AE%E9%A2%98/"/>
      <url>/2024/01/16/oa%E5%8F%91%E5%B8%83/2024/%E5%90%88%E5%90%8C%E7%AD%9B%E9%80%89%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>合同筛选物料客户问题</p><p>查询所有的中间库的表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> all_tables <span class="keyword">where</span> TABLESPACE_NAME <span class="operator">=</span> <span class="string">&#x27;SYNCDATA&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vkorg就是签约主体公司</span><br></pre></td></tr></table></figure><h1 id="实施步骤"><a href="#实施步骤" class="headerlink" title="实施步骤"></a>实施步骤</h1><p>sql</p><p>创建一张中间表同步物料销售组织数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> SYNCDATA.T_ZMMS018 (</span><br><span class="line">  MATNR VARCHAR2(<span class="number">100</span>),</span><br><span class="line">  VKORG VARCHAR2(<span class="number">100</span>),</span><br><span class="line">  VTWEG VARCHAR2(<span class="number">100</span>),</span><br><span class="line">  LVORM VARCHAR2(<span class="number">100</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>修改物料表</p><ol><li>直接用这个</li></ol><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240116105742089.png" alt="image-20240116105742089" style="zoom:50%;" /><ol start="2"><li></li></ol>]]></content>
      
      
      <categories>
          
          <category> 发布 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA发布 </tag>
            
            <tag> 未完成 </tag>
            
            <tag> 供应链发布 </tag>
            
            <tag> 合同管理流程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ASL审批</title>
      <link href="/2024/01/15/oa/ASL%E5%AE%A1%E6%89%B9/"/>
      <url>/2024/01/15/oa/ASL%E5%AE%A1%E6%89%B9/</url>
      
        <content type="html"><![CDATA[<p>ASL审批</p><h1 id="瀚晖ASL"><a href="#瀚晖ASL" class="headerlink" title="瀚晖ASL"></a>瀚晖ASL</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> ecology.uf_ASL_Apply <span class="keyword">where</span> ASLCode<span class="operator">=</span><span class="string">&#x27;ASL0001&#x27;</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> ecology.uf_ASL_Code</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> ecology.uf_ASL_Code_dt1 <span class="keyword">where</span> mainid<span class="operator">=</span><span class="number">141</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> ecology.uf_ASL_APPLY_DETAIL a <span class="keyword">where</span> a.aslcode<span class="operator">=</span><span class="string">&#x27;ASL0001&#x27;</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> ecology.uf_ASL_Categories</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> ecology.UF_ASL_CATEGORIES_DT1 t <span class="keyword">where</span> t.zlbh<span class="operator">=</span><span class="string">&#x27;A0001&#x27;</span></span><br></pre></td></tr></table></figure><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240109145305445.png" alt="image-20240109145305445" style="zoom: 25%;" /><p>创建角色 关联种类和审批金额</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240109145334912.png" alt="image-20240109145334912"></p><p>相关人申请对应角色</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240109145410179.png" alt="image-20240109145410179"></p><p><strong>正常的审批走一套的ASL流程 比如1-2-3-4-5</strong></p><p><strong>但是当有人申请了ASL授权，比如3申请了，金额是50000，那么5万以及5万以下走到3就可以</strong></p><h1 id="合同管理和采购申请修改"><a href="#合同管理和采购申请修改" class="headerlink" title="合同管理和采购申请修改"></a>合同管理和采购申请修改</h1><p>合同流程</p><p>框架的走授权的流程</p><p>其他的走老的</p><p>调整接口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">合同管理</span><br><span class="line">hisun.operatoraction.GetASLListForContract</span><br><span class="line">采购申请</span><br><span class="line">hisun.operatoraction.GetASLListForPTP</span><br><span class="line">hisun.operatoraction.GetASLListForPTPBk</span><br></pre></td></tr></table></figure><p>主要修改</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aslManager.getASLList</span><br></pre></td></tr></table></figure><p>合同管理测试结果：</p><p><img src="C:%5CUsers%5Cchenbaitao%5CDesktop%5Cblog%5Cblog%5Cblog%5Cblog%5Csource%5C_posts%5Coa%5CASL%E5%AE%A1%E6%89%B9.assets%5C%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17048469941576.png" alt="img"><br>这个配置测出来是[0,2.5]万 到张总这 包括张总<br>(2.5,5]万 到蒋灵这<br>5万以上到的 沈总</p><h1 id="国际业务差旅"><a href="#国际业务差旅" class="headerlink" title="国际业务差旅"></a>国际业务差旅</h1><p> CEO这条线直接汇报到CEO</p><p>董事长这条线直接汇报到董事长</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//获取ceo</span><br><span class="line">int ceoid = aslManager.getCeo();</span><br><span class="line">//获取董事长</span><br><span class="line">rs.executeQuery(ASLDao.getRoleMembers(), 66041);</span><br><span class="line">                    if (rs.next()) &#123;</span><br><span class="line">                        list.add(rs.getString(&quot;resourceid&quot;));</span><br><span class="line">                    &#125;</span><br></pre></td></tr></table></figure><p>代码新增接口</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hisun.operatoraction.GetASLListForGjywcl</span><br></pre></td></tr></table></figure><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110152434164.png" alt="image-20240110152434164" style="zoom: 33%;" /><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110152600724.png" alt="image-20240110152600724" style="zoom: 33%;" /><h1 id="导入数据"><a href="#导入数据" class="headerlink" title="导入数据"></a>导入数据</h1><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110102658774.png" alt="image-20240110102658774"></p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110112359996.png" alt="image-20240110112359996" style="zoom:67%;" /><p>需要增加ASLCODE的明细表，里面包含多个部门</p><h1 id="测试流程是否汇报到CEO下面一级"><a href="#测试流程是否汇报到CEO下面一级" class="headerlink" title="测试流程是否汇报到CEO下面一级"></a>测试流程是否汇报到CEO下面一级</h1><p>除了采购的和国际业务</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110135111906.png" alt="image-20240110135111906" style="zoom:33%;" /><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110134810942.png" alt="image-20240110134810942" style="zoom:33%;" /><p>组会申请流程</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110135001605.png" alt="image-20240110135001605" style="zoom: 50%;" /><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110135102533.png" alt="image-20240110135102533" style="zoom:33%;" /><p>费用报告</p><p>用印申请流程</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110140105540.png" alt="image-20240110140105540" style="zoom: 50%;" /><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110141359144.png" alt="image-20240110141359144" style="zoom:50%;" /><p>离职流程</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110142706385.png" alt="image-20240110142706385" style="zoom:50%;" /><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110142819822.png" alt="image-20240110142819822" style="zoom: 33%;" /><p>会议计划申请流程 会议报销流程 专家零星费流程 不用测</p><p>外部培训流程</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110143644290.png" alt="image-20240110143644290" style="zoom:50%;" /><p>印章管理负责人</p><img src="C:%5CUsers%5Cchenbaitao%5CDesktop%5Cblog%5Cblog%5Cblog%5Cblog%5Csource%5C_posts%5Coa%5CASL%E5%AE%A1%E6%89%B9.assets%5Cimage-20240110143921412.png" alt="image-20240110143921412" style="zoom:50%;" /><p>预算调整清单</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110145113521.png" alt="image-20240110145113521"></p><p>加班申请流程</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110145815746.png" alt="image-20240110145815746" style="zoom:33%;" /><p>产品价格调整申请</p><p>、<img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240110183549441.png" alt="image-20240110183549441" style="zoom:33%;" /></p><h1 id="双线汇报"><a href="#双线汇报" class="headerlink" title="双线汇报"></a>双线汇报</h1><p>如果不需要双线汇报 </p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17048710662886.png" alt="img" style="zoom:33%;" /><p>测试</p><h1 id="领料单"><a href="#领料单" class="headerlink" title="领料单"></a>领料单</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if (&quot;Z67&quot;.equals(bwart)) &#123;</span><br><span class="line">            type = 90;//公益捐赠事项(慈善捐赠项目预批准)</span><br><span class="line">        &#125; else if (&quot;Z29&quot;.equals(bwart)) &#123;</span><br><span class="line">            type = 86;//        非合同类对公费用支出(走间采)</span><br><span class="line">        &#125; else if (&quot;Z25&quot;.equals(bwart) || &quot;Z27&quot;.equals(bwart)) &#123;</span><br><span class="line">            type = 0;//外部宴请（一直审批到CEO-1）</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h1 id="采购需求"><a href="#采购需求" class="headerlink" title="采购需求"></a>采购需求</h1><p>有两个ASL审核，第一个固定两个，第二个才是走授权的。</p><h1 id="除了ASL审批数据里面的其他流程测试"><a href="#除了ASL审批数据里面的其他流程测试" class="headerlink" title="除了ASL审批数据里面的其他流程测试"></a>除了ASL审批数据里面的其他流程测试</h1><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240111193221045.png" alt="image-20240111193221045" style="zoom:50%;" /><h1 id="ASL董事长后面带CEO删掉"><a href="#ASL董事长后面带CEO删掉" class="headerlink" title="ASL董事长后面带CEO删掉"></a>ASL董事长后面带CEO删掉</h1><p>国际差旅业务</p><h1 id="同步数据"><a href="#同步数据" class="headerlink" title="同步数据"></a>同步数据</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update ecology.hrmresource b set b.workcode=b.outkey where b.subcompanyid1=521</span><br></pre></td></tr></table></figure><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240113142344271.png" alt="image-20240113142344271" style="zoom: 33%;" /><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17051276515205.png" alt="img" style="zoom:33%;" /><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/df2f595c-e350-4cba-aedf-3de177cd6eaa.jpg" alt="img" style="zoom: 33%;" /><h1 id="涉及ASL流程"><a href="#涉及ASL流程" class="headerlink" title="涉及ASL流程"></a>涉及ASL流程</h1><h2 id="ALScode流程"><a href="#ALScode流程" class="headerlink" title="ALScode流程"></a>ALScode流程</h2><p>间采类型：采购申请、应付申请、零星工程、采购需求、设备维修申请、设计咨询申请单、设备添置单、</p><p>直采类型：采购申请</p><p>费用报销类型：费用报告、垫款报告、外来人员费用报告</p><p>其他类型：领料单</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">金额和asl审批是否匹配</span><br></pre></td></tr></table></figure><h2 id="非ASLCode流程"><a href="#非ASLCode流程" class="headerlink" title="非ASLCode流程"></a>非ASLCode流程</h2><p>用印申请流程、公司印章刻制、报废流程、国际业务差旅、外部礼品请购流程、组会申请、外部业务招待审批流程、外来人员费用报告、预算调整申请单、HR用印申请、加班申请流程、合规事项管理流程、离职申请流程、职称考核流程</p><p>、试用期三个流程、请假流程、部门安排休假、绩效-目标变更流程、编制管理流程、产品价格调整申请、固定资产、法务支持流程</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">确保不要到CEO或者董事长</span><br></pre></td></tr></table></figure><h1 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h1><p>1.种类新增明细编码</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17052169824063.png" alt="img" style="zoom:50%;" /> <p>2.导入ASLCODE数据和人员的明细数据(加工号)</p><p>3.代码发布</p><p>4.调整国际业务的接口和流程</p><h1 id="备份表"><a href="#备份表" class="headerlink" title="备份表"></a>备份表</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table uf_ASL_APPLY_DETAIL_back_0114 as select * from uf_ASL_APPLY_DETAIL</span><br><span class="line">create table uf_ASL_Code_back_0114 as select * from uf_ASL_Code</span><br><span class="line">create table uf_ASL_Categories_back_0114 as select * from uf_ASL_Categories</span><br><span class="line">create table uf_ASL_Categories_dt1_bk_0114 as select * from uf_ASL_Categories_dt1</span><br></pre></td></tr></table></figure><h1 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h1><p>[旧数据地址]: <a href="https://hisunchenbaitao.oss-cn-beijing.aliyuncs.com/%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE.rar?Expires=1705383210&amp;OSSAccessKeyId=TMP.3KgYuDDriHM2t82Jze24eDenmQcWmBxVxbfN7AmzhBB4c4jHNwvF1sxAJSEXMgwQJGwywMQUXUk5hD54GNsx513nKwCzk8&amp;Signature=mo9oPJTF2iyMhAftmbIOD/gcwFc=">https://hisunchenbaitao.oss-cn-beijing.aliyuncs.com/%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE.rar?Expires=1705383210&amp;OSSAccessKeyId=TMP.3KgYuDDriHM2t82Jze24eDenmQcWmBxVxbfN7AmzhBB4c4jHNwvF1sxAJSEXMgwQJGwywMQUXUk5hD54GNsx513nKwCzk8&amp;Signature=mo9oPJTF2iyMhAftmbIOD%2FgcwFc%3D</a>“旧数据地址”</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> ecology.uf_ASL_APPLY_DETAIL <span class="keyword">where</span> outkey <span class="keyword">not</span> <span class="keyword">in</span> (<span class="string">&#x27;HS016789&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS016789&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS016789&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS022905&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS022905&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS022905&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60904&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60904&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60904&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60904&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS021737&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS021737&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS021737&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS021737&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS015028&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS015028&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS022941&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS022941&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS022941&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS022941&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS021688&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS021688&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS022990&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS022990&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;J05J001&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;J05J001&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;J05J001&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;J05J001&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;C03C018&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;C03C018&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;C03C018&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;J04J006&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;J04J006&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;J04J006&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;X03X128&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;X03X128&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;X03X128&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;X03X050&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;X03X050&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;98001&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;98001&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;W06W044&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;W06W044&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS022696&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS022696&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS022696&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;S01S012&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;S01S012&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;L11L002&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;L11L002&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS022252&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS022252&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;L06L011&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;L06L011&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Z08Z076&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Z08Z076&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;D07D001&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;D07D001&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;D04D036&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;D04D036&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;D04D036&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;D04D036&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60838&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60838&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS017838&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS017838&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS021015&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS021015&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Y02Y035&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Y02Y035&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Y02Y035&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60088&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;63703&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60427&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60427&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60427&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;T02T005&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;T02T005&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007064&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007064&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007064&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;J06J031&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;J06J031&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;J06J031&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS018304&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS018304&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60039&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60039&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60039&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;65694&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;65694&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;65694&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;62759&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;62759&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;62759&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60589&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60589&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60589&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60692&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60692&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;61956&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;61956&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;D05D003&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;D05D003&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;D05D003&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;C03C176&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;C03C176&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Z04Z162&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Z04Z162&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007117&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007117&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS010441&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS010441&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007069&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007069&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007069&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007072&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007072&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007072&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007073&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007073&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007038&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007038&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007004&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS007004&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;98008&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;98008&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;98008&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Z09Z079&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Z09Z079&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;H07H134-&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;H07H134-&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Y02Y012&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Y02Y012&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;X06X003&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;X06X003&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;C03C244&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;C03C244&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Y01Y004&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Y01Y004&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;G02G008&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;G02G008&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;S08S053&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;S08S053&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS020613&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS020613&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS020613&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS021914&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS021914&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS021914&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS016747&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS016747&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS016747&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Y02Y132&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Y02Y132&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Y02Y132&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS018315&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS018315&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS018315&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;L06L057&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;L06L057&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;L06L057&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;F02F008&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;F02F008&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;F02F008&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;61606&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;61606&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;61606&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS019636&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS019636&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS019636&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;W06W079&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;W03W039&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS022216&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS010841&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS009491&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Z04Z089&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;S01S013&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;HS013945&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;62017&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;60089&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Y18Y002&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Y16Y009&#x27;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA </tag>
            
            <tag> ASL </tag>
            
            <tag> 未完成 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OA发布注意事项</title>
      <link href="/2024/01/15/oa/OA%E9%83%A8%E9%97%A8%E8%B4%9F%E8%B4%A3%E4%BA%BA%E5%8F%96%E6%95%B0%E9%97%AE%E9%A2%98/"/>
      <url>/2024/01/15/oa/OA%E9%83%A8%E9%97%A8%E8%B4%9F%E8%B4%A3%E4%BA%BA%E5%8F%96%E6%95%B0%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>OA部门负责人取数问题<img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17052866409816.png" alt="img" style="zoom: 50%;" /></p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17052866882556.png" alt="img" style="zoom: 50%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.engine.hisun.performance.cmd.SubordinateDataCmd</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  p.id <span class="keyword">AS</span> id,</span><br><span class="line">  p.nd,</span><br><span class="line">  p.tbr,</span><br><span class="line">  p.zw,</span><br><span class="line">  nvl(p.rylb,<span class="number">1</span>) <span class="keyword">AS</span> rylb,</span><br><span class="line">  pd.mb,</span><br><span class="line">  pd.mbsd,</span><br><span class="line">  pd.qc,</span><br><span class="line">  pd.hlbz,</span><br><span class="line">  pd.df,</span><br><span class="line"></span><br><span class="line">  p.nzzp,</span><br><span class="line">  p.nzsjhg,</span><br><span class="line">  p.nzzpwd,</span><br><span class="line">  p.nzlc,</span><br><span class="line">  p.ndyjpf,</span><br><span class="line">  p.ndzpf,</span><br><span class="line">  <span class="built_in">coalesce</span>(p.ndyszf,p.ndzpf) <span class="keyword">as</span> ndyszf,</span><br><span class="line">  p.ndjxpj,</span><br><span class="line">  p.ndzpwd,</span><br><span class="line">  p.bmf,</span><br><span class="line">  p.gsf,</span><br><span class="line">  p.ndlc</span><br><span class="line"><span class="keyword">FROM</span> uf_performance p</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> (</span><br><span class="line">  <span class="keyword">SELECT</span></span><br><span class="line">    mainid,</span><br><span class="line">    xmlagg(xmlparse(content mb<span class="operator">||</span><span class="string">&#x27;$(^_^)$&#x27;</span> wellformed) <span class="keyword">order</span> <span class="keyword">by</span> id).getclobval() <span class="keyword">AS</span> mb,</span><br><span class="line">    xmlagg(xmlparse(content mbsd<span class="operator">||</span><span class="string">&#x27;$(^_^)$&#x27;</span> wellformed) <span class="keyword">order</span> <span class="keyword">by</span> id).getclobval() <span class="keyword">AS</span> mbsd,</span><br><span class="line">    <span class="built_in">listagg</span>(qc, <span class="string">&#x27;,&#x27;</span>) <span class="keyword">within</span> <span class="keyword">group</span> (<span class="keyword">order</span> <span class="keyword">by</span> id) <span class="keyword">AS</span> qc,</span><br><span class="line">    <span class="built_in">listagg</span>(nvl(df,<span class="number">0</span>), <span class="string">&#x27;,&#x27;</span>) <span class="keyword">within</span> <span class="keyword">group</span> (<span class="keyword">order</span> <span class="keyword">by</span> id) <span class="keyword">AS</span> df,</span><br><span class="line">    xmlagg(xmlparse(content nvl(hlbz,<span class="string">&#x27; &#x27;</span>)<span class="operator">||</span><span class="string">&#x27;$(^_^)$&#x27;</span> wellformed) <span class="keyword">order</span> <span class="keyword">by</span> id).getclobval() <span class="keyword">AS</span> hlbz</span><br><span class="line">  <span class="keyword">FROM</span> (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">      pd.mainid,</span><br><span class="line">      pd.mb,</span><br><span class="line">      pd.mbsd,</span><br><span class="line">      pd.qc,</span><br><span class="line">      pd.df,</span><br><span class="line">      pd.hlbz,</span><br><span class="line">      pd.id</span><br><span class="line">    <span class="keyword">FROM</span> uf_performance p</span><br><span class="line">    <span class="keyword">INNER</span> <span class="keyword">JOIN</span> uf_performance_dt1 pd <span class="keyword">ON</span> p.id<span class="operator">=</span>pd.mainid</span><br><span class="line">    <span class="keyword">WHERE</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span> </span><br><span class="line">  ) t</span><br><span class="line">  <span class="keyword">GROUP</span> <span class="keyword">BY</span> mainid</span><br><span class="line">) pd <span class="keyword">ON</span> p.id<span class="operator">=</span>pd.mainid</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> view_hrp_reportline v <span class="keyword">ON</span> p.tbr<span class="operator">=</span>v.id</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> uf_hrp_employee e <span class="keyword">ON</span> p.nd<span class="operator">=</span>e.nd <span class="keyword">AND</span> p.tbr<span class="operator">=</span>e.employee</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> hrmjobtitles j <span class="keyword">ON</span> p.zw<span class="operator">=</span>j.id</span><br><span class="line"><span class="keyword">WHERE</span> V.leaders <span class="keyword">LIKE</span> <span class="string">&#x27;%8867%&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="keyword">from</span> hrmresource <span class="keyword">where</span> id <span class="operator">=</span> <span class="string">&#x27;24441&#x27;</span></span><br></pre></td></tr></table></figure><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17052899812005.png" alt="img" style="zoom:50%;" />]]></content>
      
      
      <categories>
          
          <category> OA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA </tag>
            
            <tag> 组织架构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CR2023000700新建药业入账发票数据统计查询功能</title>
      <link href="/2024/01/15/oa%E5%8F%91%E5%B8%83/2023/CR2023000700%E6%96%B0%E5%BB%BA%E8%8D%AF%E4%B8%9A%E5%85%A5%E8%B4%A6%E5%8F%91%E7%A5%A8%E6%95%B0%E6%8D%AE%E7%BB%9F%E8%AE%A1%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD/"/>
      <url>/2024/01/15/oa%E5%8F%91%E5%B8%83/2023/CR2023000700%E6%96%B0%E5%BB%BA%E8%8D%AF%E4%B8%9A%E5%85%A5%E8%B4%A6%E5%8F%91%E7%A5%A8%E6%95%B0%E6%8D%AE%E7%BB%9F%E8%AE%A1%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<h1 id="CR2023000700新建药业入账发票数据统计查询功能"><a href="#CR2023000700新建药业入账发票数据统计查询功能" class="headerlink" title="CR2023000700新建药业入账发票数据统计查询功能"></a>CR2023000700新建药业入账发票数据统计查询功能</h1><p>对私：费用报告&#x2F;垫款报告&#x2F;外来人员费用报告</p><p>对公：收货发票录入，应付申请（发票已全收），应付发票录入</p><p>发票表：fnainvoiceledger</p><h2 id="需求背景"><a href="#需求背景" class="headerlink" title="需求背景"></a>需求背景</h2><p>海正药业已入账发票</p><p>对私：费用报告&#x2F;垫款报告&#x2F;外来人员费用报告</p><p>对公：收货发票录入，应付申请（发票已全收），应付发票录入</p><p>发票表：fnainvoiceledger</p><h2 id="对公BUG"><a href="#对公BUG" class="headerlink" title="对公BUG"></a>对公BUG</h2><p>FORMTABLE_MAIN_99（收货发票录入）  FORMTABLE_MAIN_78（应付申请）  FORMTABLE_MAIN_108（应付发票录入）</p><p>1.修改字段数据类型为时间</p><p>2.凭证号要用浏览框模式</p><p>原SQL</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> V_DGFK <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> DBMS_RANDOM.STRING(<span class="string">&#x27;U&#x27;</span>, <span class="number">18</span>) ID1,<span class="string">&#x27;已报销&#x27;</span> bxzt,a.APPLICANT,a.DEPARTMENT,a.COMPANY,a.NO,c.OPERATOR,c.OPERATEDATE,b.sapfpcode <span class="keyword">as</span> hjpzbh,f.PURCHASER,f.PURCHASERTAXNO,f.SELLER,f.SALESTAXNO,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">f.INVOICETYPE</span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税普通发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">2</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税专用发票 &#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">3</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;通用机打发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">4</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;卷式发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">5</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;定额发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">6</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;地铁票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">7</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;出租发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">8</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;动车/高铁票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">9</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;过路费发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;客运汽车发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">11</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;二手车销售统一发票表&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">12</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;机动车销售发票表&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">13</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;国际小票&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">14</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;航空运输电子客票行程单&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">15</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税电子发票&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">16</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税普通发票（卷票）&#x27;</span></span><br><span class="line"> <span class="keyword">ELSE</span> <span class="string">&#x27;&#x27;</span> </span><br><span class="line"><span class="keyword">END</span> <span class="keyword">AS</span> INVOICETYPE,</span><br><span class="line">f.TAXINCLUDEDPRICE,f.PRICEWITHOUTTAX,f.TAXRATE,f.INVOICECODE,f.INVOICENUMBER,f.BILLINGDATE,f.TAX,<span class="string">&#x27;是&#x27;</span> SFGX <span class="keyword">FROM</span> FORMTABLE_MAIN_99 a <span class="keyword">INNER</span> <span class="keyword">JOIN</span>  FNAINVOICELEDGER f <span class="keyword">ON</span> a.REQUESTID <span class="operator">=</span> f.REQUESTID </span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> FORMTABLE_MAIN_99_DT1 b <span class="keyword">ON</span> a.id <span class="operator">=</span> b.mainid</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> WORKFLOW_REQUESTLOG c <span class="keyword">on</span> a.REQUESTID <span class="operator">=</span> c.REQUESTID <span class="keyword">and</span> c.NODEID <span class="keyword">in</span> (<span class="string">&#x27;10025&#x27;</span> ) </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> DBMS_RANDOM.STRING(<span class="string">&#x27;U&#x27;</span>, <span class="number">18</span>) ID1,<span class="string">&#x27;已报销&#x27;</span> bxzt,a.APPLICANT,a.DEPARTMENT,a.COMPANY,a.NO,c.OPERATOR,c.OPERATEDATE,a.voucher,f.PURCHASER,f.PURCHASERTAXNO,f.SELLER,f.SALESTAXNO,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">f.INVOICETYPE</span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税普通发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">2</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税专用发票 &#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">3</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;通用机打发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">4</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;卷式发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">5</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;定额发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">6</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;地铁票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">7</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;出租发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">8</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;动车/高铁票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">9</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;过路费发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;客运汽车发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">11</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;二手车销售统一发票表&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">12</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;机动车销售发票表&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">13</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;国际小票&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">14</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;航空运输电子客票行程单&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">15</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税电子发票&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">16</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税普通发票（卷票）&#x27;</span></span><br><span class="line"> <span class="keyword">ELSE</span> <span class="string">&#x27;&#x27;</span> </span><br><span class="line"><span class="keyword">END</span> <span class="keyword">AS</span> INVOICETYPE,</span><br><span class="line">f.TAXINCLUDEDPRICE,f.PRICEWITHOUTTAX,f.TAXRATE,f.INVOICECODE,f.INVOICENUMBER,f.BILLINGDATE,f.TAX,<span class="string">&#x27;是&#x27;</span> SFGX <span class="keyword">FROM</span> FORMTABLE_MAIN_78 a <span class="keyword">INNER</span> <span class="keyword">JOIN</span>  FNAINVOICELEDGER f <span class="keyword">ON</span> a.REQUESTID <span class="operator">=</span> f.REQUESTID </span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> WORKFLOW_REQUESTLOG c <span class="keyword">on</span> a.REQUESTID <span class="operator">=</span> c.REQUESTID <span class="keyword">and</span> c.NODEID <span class="keyword">in</span> (<span class="string">&#x27;15525&#x27;</span>)</span><br><span class="line"><span class="keyword">WHERE</span> a.FPQSZT <span class="operator">=</span> <span class="string">&#x27;发票已全收&#x27;</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> DBMS_RANDOM.STRING(<span class="string">&#x27;U&#x27;</span>, <span class="number">18</span>) ID1,<span class="string">&#x27;已报销&#x27;</span> bxzt,a.APPLICANT,a.DEPARTMENT,a.COMPANY,a.NO,c.OPERATOR,c.OPERATEDATE,a.voucher,f.PURCHASER,f.PURCHASERTAXNO,f.SELLER,f.SALESTAXNO,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">f.INVOICETYPE</span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税普通发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">2</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税专用发票 &#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">3</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;通用机打发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">4</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;卷式发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">5</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;定额发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">6</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;地铁票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">7</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;出租发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">8</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;动车/高铁票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">9</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;过路费发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;客运汽车发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">11</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;二手车销售统一发票表&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">12</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;机动车销售发票表&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">13</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;国际小票&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">14</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;航空运输电子客票行程单&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">15</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税电子发票&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">16</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税普通发票（卷票）&#x27;</span></span><br><span class="line"> <span class="keyword">ELSE</span> <span class="string">&#x27;&#x27;</span> </span><br><span class="line"><span class="keyword">END</span> <span class="keyword">AS</span> INVOICETYPE,</span><br><span class="line">f.TAXINCLUDEDPRICE,f.PRICEWITHOUTTAX,f.TAXRATE,f.INVOICECODE,f.INVOICENUMBER,f.BILLINGDATE,f.TAX,<span class="string">&#x27;是&#x27;</span> SFGX <span class="keyword">FROM</span> FORMTABLE_MAIN_108 a <span class="keyword">INNER</span> <span class="keyword">JOIN</span>  FNAINVOICELEDGER f <span class="keyword">ON</span> a.REQUESTID <span class="operator">=</span> f.REQUESTID </span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> WORKFLOW_REQUESTLOG c <span class="keyword">on</span> a.REQUESTID <span class="operator">=</span> c.REQUESTID <span class="keyword">and</span> c.NODEID <span class="keyword">in</span> (<span class="string">&#x27;14021&#x27;</span> );</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="历史数据更新"><a href="#历史数据更新" class="headerlink" title="历史数据更新"></a>历史数据更新</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> ECOLOGY.FORMTABLE_MAIN_99</span><br><span class="line"><span class="keyword">SET</span> company <span class="operator">=</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> field6</span><br><span class="line">  <span class="keyword">FROM</span> ecology.cus_fielddata</span><br><span class="line">  <span class="keyword">WHERE</span> id <span class="operator">=</span> ECOLOGY.FORMTABLE_MAIN_99.applicant</span><br><span class="line">)</span><br><span class="line"><span class="keyword">WHERE</span> company <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> ECOLOGY.FORMTABLE_MAIN_78</span><br><span class="line"><span class="keyword">SET</span> company <span class="operator">=</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> field6</span><br><span class="line">  <span class="keyword">FROM</span> ecology.cus_fielddata</span><br><span class="line">  <span class="keyword">WHERE</span> id <span class="operator">=</span> ECOLOGY.FORMTABLE_MAIN_78.APPLICANT</span><br><span class="line">)</span><br><span class="line"><span class="keyword">WHERE</span> company <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> ECOLOGY.FORMTABLE_MAIN_108</span><br><span class="line"><span class="keyword">SET</span> company <span class="operator">=</span> (</span><br><span class="line">  <span class="keyword">SELECT</span> field6</span><br><span class="line">  <span class="keyword">FROM</span> ecology.cus_fielddata</span><br><span class="line">  <span class="keyword">WHERE</span> id <span class="operator">=</span> ECOLOGY.FORMTABLE_MAIN_108.APPLICANT</span><br><span class="line">)</span><br><span class="line"><span class="keyword">WHERE</span> company <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure><h3 id="修改后视图"><a href="#修改后视图" class="headerlink" title="修改后视图"></a>修改后视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> V_DGFK <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span><span class="keyword">from</span> (</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> DBMS_RANDOM.STRING(<span class="string">&#x27;U&#x27;</span>, <span class="number">18</span>) ID1,<span class="string">&#x27;已报销&#x27;</span> bxzt,a.APPLICANT,a.DEPARTMENT,a.COMPANY,a.NO,c.OPERATOR,c.OPERATEDATE,a.hjpzbh,<span class="string">&#x27;&#x27;</span> hjpzbh2,f.PURCHASER,f.PURCHASERTAXNO,f.SELLER,f.SALESTAXNO,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">    f.INVOICETYPE</span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税普通发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">2</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税专用发票 &#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">3</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;通用机打发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">4</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;卷式发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">5</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;定额发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">6</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;地铁票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">7</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;出租发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">8</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;动车/高铁票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">9</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;过路费发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;客运汽车发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">11</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;二手车销售统一发票表&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">12</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;机动车销售发票表&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">13</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;国际小票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">14</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;航空运输电子客票行程单&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">15</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税电子普通发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">16</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税普通发票（卷票）&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">17</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;可报销其他发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">18</span> <span class="keyword">THEN</span></span><br><span class="line">     <span class="string">&#x27;完税证明&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">19</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;区块链发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">20</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税电子普通发票(通行费)&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">21</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税电子专用发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">22</span> <span class="keyword">THEN</span></span><br><span class="line">     <span class="string">&#x27;船票 &#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">23</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;滴滴出行行程单&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">24</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;火车退票费报销凭证&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">32</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;电子发票（增值税专用发票）&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">33</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;电子发票(增值税普通发票)&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">35</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;通用（电子）发票&#x27;</span></span><br><span class="line">   <span class="keyword">ELSE</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">AS</span> INVOICETYPE,</span><br><span class="line">    <span class="keyword">CASE</span></span><br><span class="line">        <span class="keyword">WHEN</span> f.INVOICETYPE <span class="keyword">in</span> (<span class="number">32</span>,<span class="number">33</span>) <span class="keyword">and</span> LENGTH(f.INVOICENUMBER)<span class="operator">=</span><span class="number">20</span> <span class="keyword">THEN</span> <span class="string">&#x27;数电票&#x27;</span></span><br><span class="line">        <span class="keyword">ELSE</span> f.INVOICECODE</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">AS</span> INVOICECODE,</span><br><span class="line">    f.INVOICETYPE <span class="keyword">as</span> type,</span><br><span class="line">f.TAXINCLUDEDPRICE,f.PRICEWITHOUTTAX,f.TAXRATE,f.INVOICENUMBER,f.BILLINGDATE,f.TAX,<span class="string">&#x27;是&#x27;</span> SFGX,</span><br><span class="line"><span class="built_in">ROW_NUMBER</span>() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> a.APPLICANT,a.DEPARTMENT,a.COMPANY,a.NO,</span><br><span class="line">c.OPERATOR,a.hjpzbh,f.PURCHASER,f.PURCHASERTAXNO,f.SELLER,f.SALESTAXNO,f.INVOICETYPE,f.TAXINCLUDEDPRICE,f.PRICEWITHOUTTAX,f.TAXRATE,</span><br><span class="line">f.INVOICENUMBER,f.BILLINGDATE,f.TAX <span class="keyword">ORDER</span> <span class="keyword">BY</span> c.OPERATEDATE <span class="keyword">DESC</span>) <span class="keyword">AS</span> rn</span><br><span class="line"> <span class="keyword">FROM</span> FORMTABLE_MAIN_99 a <span class="keyword">INNER</span> <span class="keyword">JOIN</span>  FNAINVOICELEDGER f <span class="keyword">ON</span> a.REQUESTID <span class="operator">=</span> f.REQUESTID </span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> WORKFLOW_REQUESTLOG c <span class="keyword">on</span> a.REQUESTID <span class="operator">=</span> c.REQUESTID <span class="keyword">and</span> c.NODEID <span class="keyword">in</span> (<span class="string">&#x27;10025&#x27;</span> ) <span class="keyword">and</span> c.logtype <span class="operator">=</span><span class="string">&#x27;0&#x27;</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> DBMS_RANDOM.STRING(<span class="string">&#x27;U&#x27;</span>, <span class="number">18</span>) ID1,<span class="string">&#x27;已报销&#x27;</span> bxzt,a.APPLICANT,a.DEPARTMENT,a.COMPANY,a.NO,c.OPERATOR,c.OPERATEDATE,<span class="string">&#x27;&#x27;</span>hjpzbh,a.voucher,f.PURCHASER,f.PURCHASERTAXNO,f.SELLER,f.SALESTAXNO,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">    f.INVOICETYPE</span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税普通发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">2</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税专用发票 &#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">3</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;通用机打发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">4</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;卷式发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">5</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;定额发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">6</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;地铁票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">7</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;出租发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">8</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;动车/高铁票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">9</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;过路费发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;客运汽车发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">11</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;二手车销售统一发票表&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">12</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;机动车销售发票表&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">13</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;国际小票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">14</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;航空运输电子客票行程单&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">15</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税电子普通发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">16</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税普通发票（卷票）&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">17</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;可报销其他发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">18</span> <span class="keyword">THEN</span></span><br><span class="line">     <span class="string">&#x27;完税证明&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">19</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;区块链发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">20</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税电子普通发票(通行费)&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">21</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税电子专用发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">22</span> <span class="keyword">THEN</span></span><br><span class="line">     <span class="string">&#x27;船票 &#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">23</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;滴滴出行行程单&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">24</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;火车退票费报销凭证&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">32</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;电子发票（增值税专用发票）&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">33</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;电子发票(增值税普通发票)&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">35</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;通用（电子）发票&#x27;</span></span><br><span class="line">   <span class="keyword">ELSE</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">AS</span> INVOICETYPE,</span><br><span class="line">    <span class="keyword">CASE</span></span><br><span class="line">        <span class="keyword">WHEN</span> f.INVOICETYPE <span class="keyword">in</span> (<span class="number">32</span>,<span class="number">33</span>) <span class="keyword">and</span> LENGTH(f.INVOICENUMBER)<span class="operator">=</span><span class="number">20</span> <span class="keyword">THEN</span> <span class="string">&#x27;数电票&#x27;</span></span><br><span class="line">        <span class="keyword">ELSE</span> f.INVOICECODE</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">AS</span> INVOICECODE,</span><br><span class="line">    f.INVOICETYPE <span class="keyword">as</span> type,</span><br><span class="line">f.TAXINCLUDEDPRICE,f.PRICEWITHOUTTAX,f.TAXRATE,f.INVOICENUMBER,f.BILLINGDATE,f.TAX,<span class="string">&#x27;是&#x27;</span> SFGX,</span><br><span class="line"><span class="built_in">ROW_NUMBER</span>() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> a.APPLICANT,a.DEPARTMENT,a.COMPANY,a.NO,c.OPERATOR,a.voucher,f.PURCHASER,</span><br><span class="line">f.PURCHASERTAXNO,f.SELLER,f.SALESTAXNO,f.INVOICETYPE,</span><br><span class="line">f.TAXINCLUDEDPRICE,f.PRICEWITHOUTTAX,f.TAXRATE,f.INVOICENUMBER,f.BILLINGDATE,f.TAX</span><br><span class="line"> <span class="keyword">ORDER</span> <span class="keyword">BY</span> c.OPERATEDATE <span class="keyword">DESC</span>) <span class="keyword">AS</span> rn</span><br><span class="line"> <span class="keyword">FROM</span> FORMTABLE_MAIN_78 a <span class="keyword">INNER</span> <span class="keyword">JOIN</span>  FNAINVOICELEDGER f <span class="keyword">ON</span> a.REQUESTID <span class="operator">=</span> f.REQUESTID </span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> WORKFLOW_REQUESTLOG c <span class="keyword">on</span> a.REQUESTID <span class="operator">=</span> c.REQUESTID <span class="keyword">and</span> c.NODEID <span class="keyword">in</span> (<span class="string">&#x27;15525&#x27;</span>) <span class="keyword">and</span> c.logtype <span class="operator">=</span><span class="string">&#x27;0&#x27;</span></span><br><span class="line"><span class="keyword">WHERE</span> a.FPQSZT <span class="operator">=</span> <span class="string">&#x27;发票已全收&#x27;</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> DBMS_RANDOM.STRING(<span class="string">&#x27;U&#x27;</span>, <span class="number">18</span>) ID1,<span class="string">&#x27;已报销&#x27;</span> bxzt,a.APPLICANT,a.DEPARTMENT,a.COMPANY,a.NO,c.OPERATOR,c.OPERATEDATE,<span class="string">&#x27;&#x27;</span> hjpzbh,a.voucher,f.PURCHASER,f.PURCHASERTAXNO,f.SELLER,f.SALESTAXNO,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">    f.INVOICETYPE</span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税普通发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">2</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税专用发票 &#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">3</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;通用机打发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">4</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;卷式发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">5</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;定额发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">6</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;地铁票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">7</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;出租发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">8</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;动车/高铁票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">9</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;过路费发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;客运汽车发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">11</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;二手车销售统一发票表&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">12</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;机动车销售发票表&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">13</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;国际小票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">14</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;航空运输电子客票行程单&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">15</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税电子普通发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">16</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税普通发票（卷票）&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">17</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;可报销其他发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">18</span> <span class="keyword">THEN</span></span><br><span class="line">     <span class="string">&#x27;完税证明&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">19</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;区块链发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">20</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税电子普通发票(通行费)&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">21</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税电子专用发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">22</span> <span class="keyword">THEN</span></span><br><span class="line">     <span class="string">&#x27;船票 &#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">23</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;滴滴出行行程单&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">24</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;火车退票费报销凭证&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">32</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;电子发票（增值税专用发票）&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">33</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;电子发票(增值税普通发票)&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">35</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;通用（电子）发票&#x27;</span></span><br><span class="line">   <span class="keyword">ELSE</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">AS</span> INVOICETYPE,</span><br><span class="line">    <span class="keyword">CASE</span></span><br><span class="line">        <span class="keyword">WHEN</span> f.INVOICETYPE <span class="keyword">in</span> (<span class="number">32</span>,<span class="number">33</span>) <span class="keyword">and</span> LENGTH(f.INVOICENUMBER)<span class="operator">=</span><span class="number">20</span> <span class="keyword">THEN</span> <span class="string">&#x27;数电票&#x27;</span></span><br><span class="line">        <span class="keyword">ELSE</span> f.INVOICECODE</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">AS</span> INVOICECODE,</span><br><span class="line">    f.INVOICETYPE <span class="keyword">as</span> type,</span><br><span class="line">f.TAXINCLUDEDPRICE,f.PRICEWITHOUTTAX,f.TAXRATE,f.INVOICENUMBER,f.BILLINGDATE,f.TAX,<span class="string">&#x27;是&#x27;</span> SFGX,</span><br><span class="line"><span class="built_in">ROW_NUMBER</span>() <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> a.APPLICANT,a.DEPARTMENT,a.COMPANY,a.NO,c.OPERATOR,a.voucher,f.PURCHASER,f.PURCHASERTAXNO,f.SELLER,f.SALESTAXNO,f.INVOICETYPE,</span><br><span class="line">f.TAXINCLUDEDPRICE,f.PRICEWITHOUTTAX,f.TAXRATE,f.INVOICENUMBER,f.BILLINGDATE,f.TAX</span><br><span class="line"> <span class="keyword">ORDER</span> <span class="keyword">BY</span> c.OPERATEDATE <span class="keyword">DESC</span>) <span class="keyword">AS</span> rn</span><br><span class="line"> <span class="keyword">FROM</span> FORMTABLE_MAIN_108 a <span class="keyword">INNER</span> <span class="keyword">JOIN</span>  FNAINVOICELEDGER f <span class="keyword">ON</span> a.REQUESTID <span class="operator">=</span> f.REQUESTID </span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> WORKFLOW_REQUESTLOG c <span class="keyword">on</span> a.REQUESTID <span class="operator">=</span> c.REQUESTID <span class="keyword">and</span> c.NODEID <span class="keyword">in</span> (<span class="string">&#x27;14021&#x27;</span> ) <span class="keyword">and</span> c.logtype <span class="operator">=</span><span class="string">&#x27;0&#x27;</span>) a <span class="keyword">where</span> a.rn <span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="对私BUG"><a href="#对私BUG" class="headerlink" title="对私BUG"></a>对私BUG</h2><p>1.凭证号应该是71开头的，当前展示的id，改成凭证浏览</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240103152205242.png" alt="image-20240103152205242" style="zoom:50%;" /><p>原SQL</p><p>应付发票FORMTABLE_MAIN_108</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> V_DSFK <span class="keyword">AS</span></span><br><span class="line">    <span class="keyword">SELECT</span> ROWNUM ID1,<span class="string">&#x27;已报销&#x27;</span> bxzt,a.APPLICANT,a.OPERATOR JBR,a.DEPARTMENT,a.KOSTL,a.COMPANY,a.NO,c.OPERATOR,d.OPERATEDATE,a.VOUCHER,f.PURCHASER,f.PURCHASERTAXNO,f.SELLER,f.SALESTAXNO,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">f.INVOICETYPE</span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税普通发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">2</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税专用发票 &#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">3</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;通用机打发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">4</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;卷式发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">5</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;定额发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">6</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;地铁票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">7</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;出租发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">8</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;动车/高铁票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">9</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;过路费发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;客运汽车发票&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">11</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;二手车销售统一发票表&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">12</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;机动车销售发票表&#x27;</span> </span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">13</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;国际小票&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">14</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;航空运输电子客票行程单&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">15</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税电子发票&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> <span class="number">16</span> <span class="keyword">THEN</span></span><br><span class="line"><span class="string">&#x27;增值税普通发票（卷票）&#x27;</span></span><br><span class="line"> <span class="keyword">ELSE</span> <span class="string">&#x27;&#x27;</span> </span><br><span class="line"><span class="keyword">END</span> <span class="keyword">AS</span> INVOICETYPE,</span><br><span class="line">f.TAXINCLUDEDPRICE,f.PRICEWITHOUTTAX,f.TAXRATE,f.INVOICECODE,f.INVOICENUMBER,f.BILLINGDATE,f.TAX,<span class="string">&#x27;是&#x27;</span> SFGX,f.CHECKSTATUS <span class="keyword">FROM</span> FORMTABLE_MAIN_54 a <span class="keyword">INNER</span> <span class="keyword">JOIN</span>  FNAINVOICELEDGER f <span class="keyword">ON</span> a.REQUESTID <span class="operator">=</span> f.REQUESTID </span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> WORKFLOW_REQUESTLOG c <span class="keyword">on</span> a.REQUESTID <span class="operator">=</span> c.REQUESTID <span class="keyword">and</span> c.NODEID <span class="keyword">in</span> (<span class="string">&#x27;3531&#x27;</span>,<span class="string">&#x27;13544&#x27;</span>,<span class="string">&#x27;13536&#x27;</span> )</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> WORKFLOW_REQUESTLOG d <span class="keyword">on</span> a.REQUESTID <span class="operator">=</span> d.REQUESTID <span class="keyword">and</span> d.NODEID <span class="keyword">in</span> (<span class="string">&#x27;3533&#x27;</span>,<span class="string">&#x27;13546&#x27;</span>,<span class="string">&#x27;13538&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="修改后视图-1"><a href="#修改后视图-1" class="headerlink" title="修改后视图"></a>修改后视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> V_DSFK <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">select</span> ROWNUM ID1,a.<span class="operator">*</span> <span class="keyword">from</span> (<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="string">&#x27;已报销&#x27;</span> bxzt,a.APPLICANT,a.OPERATOR JBR,a.DEPARTMENT,a.KOSTL,a.COMPANY,a.NO,c.OPERATOR,d.OPERATEDATE,a.VOUCHER,f.PURCHASER,f.PURCHASERTAXNO,f.SELLER,f.SALESTAXNO,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">    f.INVOICETYPE</span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税普通发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">2</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税专用发票 &#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">3</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;通用机打发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">4</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;卷式发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">5</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;定额发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">6</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;地铁票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">7</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;出租发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">8</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;动车/高铁票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">9</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;过路费发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">10</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;客运汽车发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">11</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;二手车销售统一发票表&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">12</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;机动车销售发票表&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">13</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;国际小票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">14</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;航空运输电子客票行程单&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">15</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税电子普通发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">16</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税普通发票（卷票）&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">17</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;可报销其他发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">18</span> <span class="keyword">THEN</span></span><br><span class="line">     <span class="string">&#x27;完税证明&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">19</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;区块链发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">20</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税电子普通发票(通行费)&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">21</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;增值税电子专用发票&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">22</span> <span class="keyword">THEN</span></span><br><span class="line">     <span class="string">&#x27;船票 &#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">23</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;滴滴出行行程单&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">24</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;火车退票费报销凭证&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">32</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;电子发票（增值税专用发票）&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">33</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;电子发票(增值税普通发票)&#x27;</span></span><br><span class="line">    <span class="keyword">WHEN</span> <span class="number">35</span> <span class="keyword">THEN</span></span><br><span class="line">    <span class="string">&#x27;通用（电子）发票&#x27;</span></span><br><span class="line">   <span class="keyword">ELSE</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">END</span> <span class="keyword">AS</span> INVOICETYPE,</span><br><span class="line">    <span class="keyword">CASE</span></span><br><span class="line">        <span class="keyword">WHEN</span> f.INVOICETYPE <span class="keyword">in</span> (<span class="number">32</span>,<span class="number">33</span>) <span class="keyword">and</span> LENGTH(f.INVOICENUMBER)<span class="operator">=</span><span class="number">20</span> <span class="keyword">THEN</span> <span class="string">&#x27;数电票&#x27;</span></span><br><span class="line">        <span class="keyword">ELSE</span> f.INVOICECODE</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">AS</span> INVOICECODE,</span><br><span class="line">    f.INVOICETYPE <span class="keyword">as</span> type,</span><br><span class="line">f.TAXINCLUDEDPRICE,f.PRICEWITHOUTTAX,f.TAXRATE,f.INVOICENUMBER,f.BILLINGDATE,f.TAX,<span class="string">&#x27;是&#x27;</span> SFGX,f.CHECKSTATUS,</span><br><span class="line">   <span class="built_in">ROW_NUMBER</span>() <span class="keyword">OVER</span> (</span><br><span class="line">        <span class="keyword">PARTITION</span> <span class="keyword">BY</span> </span><br><span class="line">          a.APPLICANT,</span><br><span class="line">          a.OPERATOR,</span><br><span class="line">          a.DEPARTMENT,</span><br><span class="line">          a.KOSTL,</span><br><span class="line">          a.COMPANY,</span><br><span class="line">          a.NO,</span><br><span class="line">          c.OPERATOR,</span><br><span class="line">          a.VOUCHER,</span><br><span class="line">          f.PURCHASER,</span><br><span class="line">          f.PURCHASERTAXNO,</span><br><span class="line">          f.SELLER,</span><br><span class="line">          f.SALESTAXNO,</span><br><span class="line">          f.TAXINCLUDEDPRICE,</span><br><span class="line">          f.PRICEWITHOUTTAX,</span><br><span class="line">          f.TAXRATE,</span><br><span class="line">          f.INVOICENUMBER,</span><br><span class="line">          f.BILLINGDATE,</span><br><span class="line">          f.TAX,</span><br><span class="line">          f.CHECKSTATUS, </span><br><span class="line">          f.INVOICETYPE，</span><br><span class="line">       f.TAXINCLUDEDPRICE,f.PRICEWITHOUTTAX,f.TAXRATE,f.INVOICENUMBER,f.BILLINGDATE,f.TAX,f.CHECKSTATUS</span><br><span class="line">        <span class="keyword">ORDER</span> <span class="keyword">BY</span> d.OPERATEDATE <span class="keyword">DESC</span></span><br><span class="line">      ) <span class="keyword">AS</span> rn</span><br><span class="line"><span class="keyword">FROM</span> ECOLOGY.FORMTABLE_MAIN_54 a <span class="keyword">INNER</span> <span class="keyword">JOIN</span>  ECOLOGY.FNAINVOICELEDGER f <span class="keyword">ON</span> a.requestid <span class="operator">=</span> f.requestid</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> ECOLOGY.WORKFLOW_REQUESTLOG c <span class="keyword">on</span> a.REQUESTID <span class="operator">=</span> c.REQUESTID <span class="keyword">and</span> c.NODEID <span class="keyword">in</span> (<span class="string">&#x27;3531&#x27;</span>,<span class="string">&#x27;13544&#x27;</span>,<span class="string">&#x27;13536&#x27;</span> )</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> ECOLOGY.WORKFLOW_REQUESTLOG d <span class="keyword">on</span> a.REQUESTID <span class="operator">=</span> d.REQUESTID <span class="keyword">and</span> d.NODEID <span class="keyword">in</span> (<span class="string">&#x27;3533&#x27;</span>,<span class="string">&#x27;13546&#x27;</span>,<span class="string">&#x27;13538&#x27;</span>)) a</span><br><span class="line"><span class="keyword">where</span> a.rn <span class="operator">=</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>file:&#x2F;&#x2F;&#x2F;C:&#x2F;Users&#x2F;chenbaitao&#x2F;Documents&#x2F;WXWork&#x2F;1688857976435927&#x2F;Cache&#x2F;File&#x2F;2024-01&#x2F;fnainvoiceledger(%E5%8F%91%E7%A5%A8%E5%8F%B0%E8%B4%A6%E8%A1%A8).html</p><p>这里可以参考SQL技巧里面的第一个窗口函数</p><p><a href="https://chenbaitao120.gitee.io/2024/01/17/it/SQL%20%E6%8A%80%E5%B7%A7/">https://chenbaitao120.gitee.io/2024/01/17/it/SQL%20%E6%8A%80%E5%B7%A7/</a></p><h1 id="1-15BUG"><a href="#1-15BUG" class="headerlink" title="1&#x2F;15BUG"></a>1&#x2F;15BUG</h1><p>对公报表也是类似的几个问题<br>1.数据重复<br>2.电子发票(增值税普通发票)、电子发票（增值税专用发票）、增值税电子专用发票、增值税电子普通发票、增值税专用发票、增值税专用普通发票、机打发票，分类错误<br>3.凭证编号为空，实际上该笔流程已归档，有凭证编号</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240115084818972.png" alt="image-20240115084818972"></p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240115083659576.png" alt="image-20240115083659576" style="zoom: 67%;" /><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240115083717126.png" alt="image-20240115083717126" style="zoom:67%;" /><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240115083729390.png" alt="image-20240115083729390" style="zoom:67%;" /><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240115083748534.png" alt="image-20240115083748534" style="zoom:67%;" />]]></content>
      
      
      <categories>
          
          <category> 发布 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA发布 </tag>
            
            <tag> OA报表 </tag>
            
            <tag> 未完成 </tag>
            
            <tag> 供应链发布 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>物料报废申请报表</title>
      <link href="/2024/01/12/oa/%E7%89%A9%E6%96%99%E6%8A%A5%E5%BA%9F%E7%94%B3%E8%AF%B7%E6%8A%A5%E8%A1%A8/"/>
      <url>/2024/01/12/oa/%E7%89%A9%E6%96%99%E6%8A%A5%E5%BA%9F%E7%94%B3%E8%AF%B7%E6%8A%A5%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<p>物料报废申请报表</p><h1 id="数据导出"><a href="#数据导出" class="headerlink" title="数据导出"></a>数据导出</h1><p>2022、2023年所有法律主体存货报废明细（包含申请人、申请部门、申请时间、报废产品名称及编号、产品批次、产品效期、数量、金额、各环节审批人、审批时间、报废原因等字段）</p><p>审批人和审批时间、审批职位 去流程表里面带出来</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> i.requestname,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">    <span class="keyword">WHEN</span> i.currentnodetype <span class="operator">=</span> <span class="string">&#x27;3&#x27;</span> <span class="keyword">THEN</span> <span class="string">&#x27;归档&#x27;</span></span><br><span class="line">    <span class="keyword">ELSE</span> <span class="string">&#x27;未归档&#x27;</span></span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="keyword">as</span> statuss</span><br><span class="line">,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">    <span class="keyword">WHEN</span> i.currentnodetype <span class="operator">=</span> <span class="string">&#x27;3&#x27;</span> <span class="keyword">THEN</span> i.lastoperatedate</span><br><span class="line">    <span class="keyword">ELSE</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">END</span> <span class="keyword">as</span> lastoperatedate,</span><br><span class="line"><span class="keyword">CASE</span></span><br><span class="line">    <span class="keyword">WHEN</span> i.currentnodetype <span class="operator">=</span> <span class="string">&#x27;3&#x27;</span> <span class="keyword">THEN</span> i.lastoperatetime</span><br><span class="line">    <span class="keyword">ELSE</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">END</span> <span class="keyword">as</span> lastoperatetime,</span><br><span class="line">TO_CHAR(SUBSTR(c.remark, <span class="number">1</span>, <span class="number">3500</span>)) <span class="keyword">as</span> remark,a.no,d.lastname,a.appdate,j.companyname,</span><br><span class="line">j.bukrs,</span><br><span class="line">k.name,</span><br><span class="line">a.kwcode,a.bfzje,</span><br><span class="line"></span><br><span class="line">m.name,</span><br><span class="line">n.departmentname,</span><br><span class="line">a.mat_doc,</span><br><span class="line">a.doc_year,</span><br><span class="line">a.gzrq,</span><br><span class="line">b.wlmc,b.wlbh,</span><br><span class="line">b.kcsl,b.jldw,</span><br><span class="line">b.lyjclfa,</span><br><span class="line">b.zmje,</span><br><span class="line">b.qrbfsl,</span><br><span class="line">b.scph,</span><br><span class="line">b.sxrq,</span><br><span class="line">b.bfsl,</span><br><span class="line">u.departmentname,</span><br><span class="line">b.sclcddh,</span><br><span class="line">f.nodename,e.lastname,c.operatedate,c.operatetime ,h.jobtitlename,b.bfyy</span><br><span class="line"> <span class="keyword">from</span> ecology.formtable_main_391 a  <span class="keyword">join</span> ecology.formtable_main_391_dt1 b <span class="keyword">on</span> a.id <span class="operator">=</span> b.mainid </span><br><span class="line"> <span class="keyword">join</span> ecology.workflow_requestlog  c <span class="keyword">on</span> a.requestid <span class="operator">=</span> c.requestid <span class="keyword">left</span> <span class="keyword">join</span></span><br><span class="line">ecology.hrmresource d <span class="keyword">on</span> a.applicant <span class="operator">=</span> d.id </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span>  ecology.hrmresource e <span class="keyword">on</span> e.id <span class="operator">=</span> c.operator</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span>  ecology.workflow_nodebase f <span class="keyword">on</span> c.nodeid <span class="operator">=</span> f.id </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span>  ecology.hrmdepartment g <span class="keyword">on</span> a.bm <span class="operator">=</span> g.id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span>  ecology.hrmjobtitles h <span class="keyword">on</span> h.id <span class="operator">=</span> e.jobtitle </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.workflow_requestbase i <span class="keyword">on</span> i.requestid <span class="operator">=</span> a.requestid</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.uf_company j <span class="keyword">on</span> j.bukrs <span class="operator">=</span> a.bukrs</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.uf_factory k <span class="keyword">on</span> k.code <span class="operator">=</span> a.fcode</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.uf_storagelocation m <span class="keyword">on</span> m.id <span class="operator">=</span> a.kwid</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.hrmdepartment n <span class="keyword">on</span> b.sybm <span class="operator">=</span> n.id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.hrmdepartment u <span class="keyword">on</span> u.id <span class="operator">=</span> b.yjbm</span><br><span class="line"><span class="keyword">where</span> a.appdate <span class="operator">&gt;</span> <span class="string">&#x27;2022-01-01&#x27;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> c.operatedate, c.operatetime,b.wlbh ;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="自定义报表"><a href="#自定义报表" class="headerlink" title="自定义报表"></a>自定义报表</h1>]]></content>
      
      
      <categories>
          
          <category> OA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA报表 </tag>
            
            <tag> 物料报废申请流程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2024/01/12双周周报</title>
      <link href="/2024/01/12/%E5%8F%8C%E5%91%A8%E5%91%A8%E6%8A%A5/%E5%8F%8C%E5%91%A8%E5%91%A8%E6%8A%A51-12/"/>
      <url>/2024/01/12/%E5%8F%8C%E5%91%A8%E5%91%A8%E6%8A%A5/%E5%8F%8C%E5%91%A8%E5%91%A8%E6%8A%A51-12/</url>
      
        <content type="html"><![CDATA[<p>双周周报</p><p>第一个是物料报废申请流程和SAP做了一个对接，当物料分类为在产品的时候明细表增加一个生产流程订单号，当公司代码为1000和1100的时候，归档后调用SAP接口进行报废处理。</p><p>第二个是新做一个发票数据统计查询功能的报表，其中费用报告这个流程整合成对私报表，收货发票录入、应付申请、应付发票录入这三个流程整合成对公报表。</p><p>第三个是合同管理类型增加一个外销直销的销售类型，该销售类型的控制产品单价是金额除以数量</p><p>第四个是法律文书流程的变更，法务人员由申请人决定改成由发函主体决定。</p><p>第五个是采购申请发票录入后取消了限制特殊字符的传入。</p><p>本周还对合同管理和采购申请的ASL做了相关的调整，并且对流程做了相关的测试。</p><p>下周就是继续本周未完成的工作。</p><table><thead><tr><th>本周&#x2F;下周</th><th>系统</th><th>模块</th><th>任务&#x2F;解决方案</th><th>业务对接部门</th><th>业务对接人</th><th>计划开始日期</th><th>计划完成日期</th><th>实际开始日期</th><th>实际完成日期</th><th>IT负责人</th><th>状态</th></tr></thead><tbody><tr><td>本周</td><td>OA</td><td>OA</td><td>CR2023000760在物料报废申请中增加在产品分类</td><td>财务</td><td>罗淋尹</td><td>2023&#x2F;12&#x2F;29</td><td>2023&#x2F;1&#x2F;6</td><td>2023&#x2F;12&#x2F;29</td><td>2023&#x2F;1&#x2F;6</td><td>陈柏涛</td><td>已上线</td></tr><tr><td>解决方案:     OA：         表头新增物料分类字段（库存商品&#x2F;在产品），如果是在产品，仓库只读；       行：增加生产流程订单号字段，不需要填写报废数量       如果公司是1000和1100公司的，归档后调用SAP接口进行报废处理。     SAP：     OA审批后，通过接口将对应的在产品流程订单号传给SAP，SAP需要对该订单修改结算规则。</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>OA</td><td>CR2023000700新建药业入账发票数据统计查询功能</td><td>财务</td><td>周锦绣</td><td>2023&#x2F;1&#x2F;2</td><td>2023&#x2F;1&#x2F;6</td><td>2023&#x2F;1&#x2F;2</td><td>2023&#x2F;1&#x2F;6</td><td>陈柏涛</td><td>已完成</td><td></td><td></td></tr><tr><td>解决方案：开发sql视图</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>OA</td><td>CR2023000801OA合同管理系统增加销售类型“外销-直销”</td><td>原料药营销中心</td><td>管君斐</td><td>2023&#x2F;1&#x2F;2</td><td>2023&#x2F;1&#x2F;5</td><td>2023&#x2F;1&#x2F;2</td><td>2023&#x2F;1&#x2F;5</td><td>陈柏涛</td><td>已上线</td><td></td><td></td></tr><tr><td>解决方案:     销售类型增加一个类型“外销-直销”，当选中该类型的时候对应的产品单价控制为 金额&#x2F;数量。</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>OA</td><td>CR2024000007法律文书流程变更</td><td>法务</td><td>蔡逸漩</td><td>2023&#x2F;1&#x2F;5</td><td>2023&#x2F;1&#x2F;9</td><td>2023&#x2F;1&#x2F;5</td><td>2023&#x2F;1&#x2F;9</td><td>陈柏涛</td><td>已上线</td><td></td><td></td></tr><tr><td>解决方案:法务操作组条件由公司决定法务人员修改成由发函主体决定法务人员，其他配置保持不变。</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>OA</td><td>CR2024000012采购申请物料描述明细允许特殊字符传输</td><td>生产运营中心</td><td>李文斌</td><td>2023&#x2F;1&#x2F;8</td><td>2023&#x2F;1&#x2F;10</td><td>2023&#x2F;1&#x2F;8</td><td>2023&#x2F;1&#x2F;10</td><td>陈柏涛</td><td>已上线</td><td></td><td></td></tr><tr><td>解决方案:采购申请归档后，允许传输特殊字符到SAP；在发票录入流程归档后，发票抬头文本限制特殊字符的传输（IM_SGTXT）</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>下周</td><td>OA</td><td>OA</td><td>ASL相关变更</td><td>生产运营中心</td><td>李文斌</td><td>2023&#x2F;1&#x2F;10</td><td>2023&#x2F;1&#x2F;30</td><td>2023&#x2F;1&#x2F;10</td><td></td><td></td><td>进行中</td></tr><tr><td>解决方案:开发</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 海正双周周报 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>采购管理跟踪报表</title>
      <link href="/2024/01/12/oa/--%20%E9%87%87%E8%B4%AD%E7%AE%A1%E7%90%86%E8%B7%9F%E8%B8%AA%E6%8A%A5%E8%A1%A8%20drop%20table%20order_manage_track;create%20table%20%20order_manage_track%20%20as%20select%20b/"/>
      <url>/2024/01/12/oa/--%20%E9%87%87%E8%B4%AD%E7%AE%A1%E7%90%86%E8%B7%9F%E8%B8%AA%E6%8A%A5%E8%A1%A8%20drop%20table%20order_manage_track;create%20table%20%20order_manage_track%20%20as%20select%20b/</url>
      
        <content type="html"><![CDATA[<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 采购管理跟踪报表 </span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> order_manage_track;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>  order_manage_track  <span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> b.demandrq,b.demandcode,a.oarequest,<span class="string">&#x27;&#x27;</span><span class="operator">||</span>b.id <span class="keyword">as</span> id,a.applicant,a.department,b.mname,b.num,<span class="string">&#x27;&#x27;</span><span class="operator">||</span>a.id <span class="keyword">as</span> oaorder,a.source,a.no,a.pur,a.purgroup,a.supplier,b.citp,b.spec,b.amount,b.mcode,b.ddate,a.tname,a.shck  <span class="keyword">from</span> ECOLOGY.UF_PTP0102 a,ECOLOGY.UF_PTP0102_DT1 b </span><br><span class="line"><span class="keyword">where</span> a.id<span class="operator">=</span>b.mainid;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 增加待办采购申请</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> order_manage_track</span><br><span class="line"><span class="keyword">select</span> b.demandrq,b.demandcode,a.requestid,<span class="string">&#x27;PR&#x27;</span><span class="operator">||</span>b.id <span class="keyword">as</span> id,a.applicant,a.department,b.mname,b.num,<span class="keyword">null</span>,a.source,<span class="string">&#x27;&#x27;</span>,a.pur,a.purgroup,a.supplier,b.citp,b.spec,b.amount,b.mcode,b.ddate,a.tname,a.shck  <span class="keyword">from</span> ECOLOGY.FORMTABLE_MAIN_56 a,ECOLOGY.FORMTABLE_MAIN_56_DT1 b </span><br><span class="line"><span class="keyword">where</span> a.id<span class="operator">=</span>b.mainid <span class="keyword">and</span> REQUESTID <span class="keyword">not</span> <span class="keyword">in</span> (</span><br><span class="line"><span class="keyword">select</span>  oarequest <span class="keyword">from</span> order_manage_track</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 删除强制归档采购申请</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> order_manage_track <span class="keyword">where</span> oarequest  <span class="keyword">in</span> (<span class="keyword">select</span> REQUESTID <span class="keyword">from</span> ECOLOGY.workflow_requestbase <span class="keyword">where</span> status<span class="operator">=</span><span class="string">&#x27;强制归档&#x27;</span>);</span><br><span class="line"><span class="comment">-- 删除未提交采购申请</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> order_manage_track <span class="keyword">where</span> oarequest  <span class="keyword">in</span> (</span><br><span class="line"><span class="keyword">select</span> REQUESTID <span class="keyword">from</span> ECOLOGY.FORMTABLE_MAIN_56 <span class="keyword">where</span> <span class="keyword">no</span>  <span class="keyword">is</span> <span class="keyword">null</span> </span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 增加待办采购需求</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> order_manage_track (oarequest,demandrq,demandcode,id,applicant,</span><br><span class="line">department,mname,num,pur,purgroup,supplier,citp,spec,ddate)</span><br><span class="line"><span class="keyword">select</span>  a.oarequest,b.berequest <span class="keyword">as</span> demandrq,a.id <span class="keyword">as</span> demandcode,<span class="string">&#x27;PD&#x27;</span><span class="operator">||</span>a.id <span class="keyword">as</span> id,b.applicant,b.department,a.mname,a.num,a.pur,a.purgroup,a.supplier,a.citp,a.spec,a.ddate <span class="keyword">from</span> ECOLOGY.UF_PTPDEMAND_DT1 a,ECOLOGY.UF_PTPDEMAND b  <span class="keyword">where</span> a.id  <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span>  demandcode <span class="keyword">from</span> order_manage_track <span class="keyword">where</span> demandcode <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>)  <span class="keyword">and</span> a.mainid<span class="operator">=</span>b.id <span class="keyword">and</span> nvl(status,<span class="number">0</span>)<span class="operator">&lt;&gt;</span><span class="number">3</span></span><br><span class="line"><span class="keyword">and</span> (a.oarequest <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">or</span> a.oarequest <span class="keyword">not</span> <span class="keyword">in</span> (</span><br><span class="line"><span class="keyword">select</span> oarequest <span class="keyword">from</span> order_manage_track ) );</span><br><span class="line"><span class="comment">--更新采购需求字段</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track <span class="keyword">set</span> demandrq <span class="operator">=</span> (<span class="keyword">select</span> b.berequest <span class="keyword">as</span> demandrq <span class="keyword">from</span> ECOLOGY.UF_PTPDEMAND_DT1 a <span class="keyword">left</span> <span class="keyword">join</span> </span><br><span class="line">ECOLOGY.uf_ptpdemand b <span class="keyword">on</span> a.mainid <span class="operator">=</span> b.id  <span class="keyword">where</span> syncdata.order_manage_track.oarequest <span class="operator">=</span> a.oarequest <span class="keyword">and</span> ROWNUM <span class="operator">&lt;=</span> <span class="number">1</span> <span class="keyword">and</span> b.berequest <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> ) <span class="keyword">where</span> demandrq <span class="keyword">is</span>  <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 增加业务字段</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> order_manage_track</span><br><span class="line"><span class="keyword">add</span> (demandstartdate <span class="type">CHAR</span>(<span class="number">10</span>),demandenddate <span class="type">CHAR</span>(<span class="number">10</span>),requeststartdate <span class="type">CHAR</span>(<span class="number">10</span>)</span><br><span class="line">,requestenddate <span class="type">CHAR</span>(<span class="number">10</span>),rkstartdate <span class="type">CHAR</span>(<span class="number">10</span>),rkenddate <span class="type">CHAR</span>(<span class="number">10</span>),fpno VARCHAR2(<span class="number">1000</span>),fkinfo VARCHAR2(<span class="number">500</span>),ordertime <span class="type">CHAR</span>(<span class="number">10</span>),pdno VARCHAR2(<span class="number">100</span>),prno VARCHAR2(<span class="number">100</span>));</span><br><span class="line"><span class="comment">-- 更新需求日期</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> (pdno,demandstartdate,demandenddate)<span class="operator">=</span>(</span><br><span class="line"><span class="keyword">select</span> requestmark,createdate,LASTOPERATEDATE <span class="keyword">from</span> ECOLOGY.workflow_requestbase <span class="keyword">where</span> REQUESTID<span class="operator">=</span>a.demandrq</span><br><span class="line">) <span class="keyword">where</span> demandrq <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- 更新申请日期</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> (prno,requeststartdate,requestenddate)<span class="operator">=</span>(</span><br><span class="line"><span class="keyword">select</span> requestmark,createdate,LASTOPERATEDATE <span class="keyword">from</span> ECOLOGY.workflow_requestbase <span class="keyword">where</span> REQUESTID<span class="operator">=</span>a.oarequest</span><br><span class="line">); </span><br><span class="line"><span class="comment">-- 创建入库临时表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tmp_formtable_main_104_dt1 <span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span>  c.id,c.mainid,c.orderline,b.createdate,a.requestid,a.appdate,a.oaorder</span><br><span class="line"><span class="keyword">from</span> ECOLOGY.FORMTABLE_MAIN_104 a,ECOLOGY.workflow_requestbase b,</span><br><span class="line">ECOLOGY.FORMTABLE_MAIN_104_DT1 c </span><br><span class="line"><span class="keyword">where</span>  a.requestid<span class="operator">=</span>b.requestid <span class="keyword">and</span> a.id<span class="operator">=</span>c.mainid;</span><br><span class="line"><span class="keyword">create</span> index inx_orderline <span class="keyword">on</span> tmp_formtable_main_104_dt1(orderline);</span><br><span class="line"><span class="keyword">create</span> index inx_oaorder <span class="keyword">on</span> tmp_formtable_main_104_dt1(oaorder);</span><br><span class="line"><span class="comment">-- 更新入库开始日期</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track t <span class="keyword">set</span>  rkstartdate<span class="operator">=</span>(</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(createdate) <span class="keyword">from</span> tmp_formtable_main_104_dt1 <span class="keyword">where</span> orderline<span class="operator">=</span>t.id</span><br><span class="line">) <span class="keyword">where</span> oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>; </span><br><span class="line"><span class="comment">-- 更新直采入库开始日期</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track t <span class="keyword">set</span>  rkstartdate<span class="operator">=</span>(<span class="keyword">select</span> <span class="built_in">min</span>(appdate)  <span class="keyword">from</span> tmp_formtable_main_104_dt1 <span class="keyword">where</span> oaorder<span class="operator">=</span>t.oaorder)  <span class="keyword">where</span> source<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="comment">-- 删除入库临时表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span>  tmp_formtable_main_104_dt1;</span><br><span class="line"><span class="comment">-- 创建发票临时表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tmp_formtable_main_99_dt1 <span class="keyword">as</span> </span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">distinct</span> a.oaorder,b.fpno <span class="keyword">FROM</span>  ECOLOGY.FORMTABLE_MAIN_99_DT1 a,ECOLOGY.FORMTABLE_MAIN_99 b </span><br><span class="line"><span class="keyword">where</span> a.mainid<span class="operator">=</span>b.id;</span><br><span class="line"><span class="keyword">create</span> index inx99_oaorder <span class="keyword">on</span> tmp_formtable_main_99_dt1(oaorder);</span><br><span class="line"><span class="comment">-- 更新订单发票号</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span>  fpno<span class="operator">=</span>(</span><br><span class="line"><span class="keyword">select</span> WM_CONCAT(fpno)  <span class="keyword">from</span> </span><br><span class="line">tmp_formtable_main_99_dt1 <span class="keyword">where</span> oaorder<span class="operator">=</span>a.oaorder) </span><br><span class="line"><span class="keyword">where</span> oaorder <span class="keyword">in</span> (<span class="keyword">select</span> oaorder <span class="keyword">from</span> ECOLOGY.FORMTABLE_MAIN_99_DT1);</span><br><span class="line"><span class="comment">-- 删除发票临时表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span>  tmp_formtable_main_99_dt1;</span><br><span class="line"><span class="comment">-- 更新订单付款金额</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> fkinfo<span class="operator">=</span>(<span class="keyword">select</span> payamount <span class="keyword">from</span> ECOLOGY.uf_ptp0102  <span class="keyword">where</span> id<span class="operator">=</span>a.oaorder);</span><br><span class="line"><span class="comment">-- 更新需求时间</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track <span class="keyword">set</span> ordertime<span class="operator">=</span>nvl(demandenddate,requeststartdate);</span><br><span class="line"><span class="keyword">update</span> order_manage_track <span class="keyword">set</span> requestenddate<span class="operator">=</span><span class="keyword">null</span>  <span class="keyword">where</span> oaorder <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- 更新作废状态</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> order_manage_track <span class="keyword">add</span> (status number);</span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> status<span class="operator">=</span>(<span class="keyword">select</span> status <span class="keyword">from</span> ECOLOGY.UF_PTP0102 <span class="keyword">where</span> id<span class="operator">=</span>a.oaorder) <span class="keyword">where</span> oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">update</span> order_manage_track <span class="keyword">set</span> status<span class="operator">=</span><span class="number">1</span>  <span class="keyword">where</span> oaorder <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- 更新删除采购申请的状态</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track <span class="keyword">set</span> status<span class="operator">=</span><span class="number">9</span> <span class="keyword">where</span>  oarequest <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> oaorder <span class="keyword">is</span> <span class="keyword">null</span> </span><br><span class="line"><span class="keyword">and</span> oarequest  <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> requestid <span class="keyword">from</span> ecology.formtable_main_56);</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> order_manage_track <span class="keyword">add</span> (yfkxx VARCHAR2(<span class="number">500</span>),jdxfkxx VARCHAR2(<span class="number">500</span>));</span><br><span class="line"><span class="comment">-- 创建预付临时表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tmp_uf_PTP0201_yf <span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> oaorder,<span class="built_in">max</span>(appdate) appdate,<span class="built_in">sum</span>(camount) camounts,<span class="built_in">sum</span>(cpayscale) cpayscales </span><br><span class="line"><span class="keyword">from</span>  ECOLOGY.uf_PTP0201 <span class="keyword">where</span> cpaytype<span class="operator">=</span><span class="number">0</span> <span class="keyword">and</span> (status<span class="operator">=</span><span class="number">4</span> <span class="keyword">or</span> status<span class="operator">=</span><span class="number">11</span>) <span class="keyword">and</span> brequest <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">group</span> <span class="keyword">by</span> oaorder;</span><br><span class="line"><span class="keyword">create</span> index inx_oaorder <span class="keyword">on</span> tmp_uf_PTP0201_yf(oaorder);</span><br><span class="line"><span class="comment">--更新“日期+预付款+比例”</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> yfkxx<span class="operator">=</span>(<span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> appdate <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">then</span> appdate<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span>camounts<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span><span class="built_in">cast</span>(cpayscales<span class="operator">*</span><span class="number">100</span> <span class="keyword">as</span> <span class="type">varchar</span>(<span class="number">20</span>)) </span><br><span class="line"><span class="operator">||</span> <span class="string">&#x27;%&#x27;</span> <span class="keyword">end</span> <span class="keyword">from</span> tmp_uf_PTP0201_yf <span class="keyword">where</span> oaorder<span class="operator">=</span>a.oaorder)</span><br><span class="line"><span class="keyword">where</span> a.oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- 删除预付临时表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> tmp_uf_PTP0201_yf;</span><br><span class="line"><span class="comment">-- 创建阶段性付款临时表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tmp_uf_PTP0201_jd <span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> oaorder,<span class="built_in">max</span>(appdate) appdate,<span class="built_in">sum</span>(camount) camounts,<span class="built_in">sum</span>(cpayscale) cpayscales </span><br><span class="line"><span class="keyword">from</span>  ECOLOGY.uf_PTP0201 <span class="keyword">where</span> cpaytype<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> (status<span class="operator">=</span><span class="number">4</span> <span class="keyword">or</span> status<span class="operator">=</span><span class="number">11</span>) <span class="keyword">and</span> brequest <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">group</span> <span class="keyword">by</span> oaorder;</span><br><span class="line"><span class="keyword">create</span> index inx1_oaorder <span class="keyword">on</span> tmp_uf_PTP0201_jd(oaorder);</span><br><span class="line"><span class="comment">--更新“日期+阶段性付款+比例”</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> jdxfkxx<span class="operator">=</span>(<span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> appdate <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">then</span> appdate<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span>camounts<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span><span class="built_in">cast</span>(cpayscales<span class="operator">*</span><span class="number">100</span> <span class="keyword">as</span> <span class="type">varchar</span>(<span class="number">20</span>)) </span><br><span class="line"><span class="operator">||</span> <span class="string">&#x27;%&#x27;</span> <span class="keyword">end</span> <span class="keyword">from</span> tmp_uf_PTP0201_jd <span class="keyword">where</span> oaorder<span class="operator">=</span>a.oaorder)</span><br><span class="line"><span class="keyword">where</span> a.oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- 删除阶段性付款临时表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> tmp_uf_PTP0201_jd;</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> order_manage_track <span class="keyword">add</span> (fpxx VARCHAR2(<span class="number">500</span>));</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> order_manage_track <span class="keyword">add</span> (fpxx1 VARCHAR2(<span class="number">500</span>));</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> order_manage_track <span class="keyword">add</span> (fpxx2 VARCHAR2(<span class="number">500</span>));</span><br><span class="line"><span class="comment">-- 创建收货发票临时表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tmp_PTP0204_fp <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">no</span>,fpno,fpdate,oaorder,ybhsjez,amount,<span class="built_in">ROW_NUMBER</span> () <span class="keyword">OVER</span> ( <span class="keyword">PARTITION</span> <span class="keyword">BY</span> oaorder <span class="keyword">ORDER</span> <span class="keyword">BY</span> gzdate <span class="keyword">asc</span> ) CNO</span><br><span class="line"> <span class="keyword">from</span> (<span class="keyword">select</span> a.no,fpno,fpdate,gzdate,c.oaorder,<span class="built_in">sum</span>(ybhsje) ybhsjez,d.amount <span class="keyword">from</span> ecology.formtable_main_99 a </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.workflow_requestbase b <span class="keyword">on</span> a.requestid<span class="operator">=</span>b.requestid </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.formtable_main_99_dt1 c <span class="keyword">on</span> c.mainid<span class="operator">=</span>a.id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.uf_ptp0102 d <span class="keyword">on</span> d.id<span class="operator">=</span>c.oaorder</span><br><span class="line"><span class="keyword">where</span> currentnodetype<span class="operator">=</span><span class="number">3</span> <span class="keyword">and</span> brequest <span class="keyword">is</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> a.no,fpno,fpdate,gzdate,c.oaorder,d.amount</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> c.oaorder,gzdate);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> index inx_no <span class="keyword">on</span> tmp_PTP0204_fp(<span class="keyword">no</span>);</span><br><span class="line"><span class="keyword">create</span> index inx_oaorder1 <span class="keyword">on</span> tmp_PTP0204_fp(oaorder);</span><br><span class="line"></span><br><span class="line"><span class="comment">--更新第二次入发票总金额</span></span><br><span class="line"><span class="keyword">update</span> tmp_PTP0204_fp fp <span class="keyword">set</span> ybhsjez<span class="operator">=</span>ybhsjez<span class="operator">+</span>(<span class="keyword">select</span> ybhsjez <span class="keyword">from</span> tmp_PTP0204_fp <span class="keyword">where</span> CNO<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> fp.oaorder<span class="operator">=</span>oaorder)</span><br><span class="line"><span class="keyword">where</span> CNO<span class="operator">=</span><span class="number">2</span>;</span><br><span class="line"><span class="comment">--更新第三次入发票总金</span></span><br><span class="line"><span class="keyword">update</span> tmp_PTP0204_fp fp <span class="keyword">set</span> ybhsjez<span class="operator">=</span>ybhsjez<span class="operator">+</span>(<span class="keyword">select</span> ybhsjez <span class="keyword">from</span> tmp_PTP0204_fp <span class="keyword">where</span> CNO<span class="operator">=</span><span class="number">2</span> <span class="keyword">and</span> fp.oaorder<span class="operator">=</span>oaorder)</span><br><span class="line"><span class="keyword">where</span> CNO<span class="operator">=</span><span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--更新“日期+发票+比例1”</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> fpxx<span class="operator">=</span>(<span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> fpdate <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">then</span> fpdate<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span>fpno<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span><span class="built_in">cast</span>(ROUND(ybhsjez<span class="operator">/</span>amount,<span class="number">2</span>)<span class="operator">*</span><span class="number">100</span> <span class="keyword">as</span> <span class="type">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="operator">||</span> <span class="string">&#x27;%&#x27;</span> <span class="keyword">end</span> <span class="keyword">from</span> tmp_PTP0204_fp </span><br><span class="line"><span class="keyword">where</span> oaorder<span class="operator">=</span>a.oaorder <span class="keyword">and</span> CNO<span class="operator">=</span><span class="number">1</span>)</span><br><span class="line"><span class="keyword">where</span> a.oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> fpno <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> a.oaorder <span class="keyword">in</span> (<span class="keyword">select</span> oaorder <span class="keyword">from</span> tmp_PTP0204_fp <span class="keyword">where</span>  CNO<span class="operator">=</span><span class="number">1</span>);</span><br><span class="line"><span class="comment">--更新“日期+发票+比例2”</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> fpxx1<span class="operator">=</span>(<span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> fpdate <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">then</span> fpdate<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span>fpno<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span><span class="built_in">cast</span>(ROUND(ybhsjez<span class="operator">/</span>amount,<span class="number">2</span>)<span class="operator">*</span><span class="number">100</span> <span class="keyword">as</span> <span class="type">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="operator">||</span> <span class="string">&#x27;%&#x27;</span> <span class="keyword">end</span> <span class="keyword">from</span> tmp_PTP0204_fp </span><br><span class="line"><span class="keyword">where</span> oaorder<span class="operator">=</span>a.oaorder <span class="keyword">and</span> CNO<span class="operator">=</span><span class="number">2</span>)</span><br><span class="line"><span class="keyword">where</span> a.oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> fpno <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> a.oaorder <span class="keyword">in</span> (<span class="keyword">select</span> oaorder <span class="keyword">from</span> tmp_PTP0204_fp <span class="keyword">where</span>  CNO<span class="operator">=</span><span class="number">2</span>);</span><br><span class="line"><span class="comment">--更新“日期+发票+比例3”</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> fpxx2<span class="operator">=</span>(<span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> fpdate <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">then</span> fpdate<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span>fpno<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span><span class="built_in">cast</span>(ROUND(ybhsjez<span class="operator">/</span>amount,<span class="number">2</span>)<span class="operator">*</span><span class="number">100</span> <span class="keyword">as</span> <span class="type">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="operator">||</span> <span class="string">&#x27;%&#x27;</span> <span class="keyword">end</span> <span class="keyword">from</span> tmp_PTP0204_fp </span><br><span class="line"><span class="keyword">where</span> oaorder<span class="operator">=</span>a.oaorder <span class="keyword">and</span> CNO<span class="operator">=</span><span class="number">3</span>)</span><br><span class="line"><span class="keyword">where</span> a.oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> fpno <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> a.oaorder <span class="keyword">in</span> (<span class="keyword">select</span> oaorder <span class="keyword">from</span> tmp_PTP0204_fp <span class="keyword">where</span>  CNO<span class="operator">=</span><span class="number">3</span>);</span><br><span class="line"><span class="comment">-- 删除收货发票临时表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> tmp_PTP0204_fp;</span><br><span class="line"><span class="comment">------过账日期</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> syncdata.order_manage_track <span class="keyword">add</span> (REPORT_STATUS VARCHAR2(<span class="number">50</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> syncdata.order_manage_track <span class="keyword">add</span> (COMPANY VARCHAR2(<span class="number">50</span>));</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> syncdata.order_manage_track <span class="keyword">add</span> (<span class="keyword">PERIOD</span> VARCHAR2(<span class="number">50</span>));</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> syncdata.order_manage_track <span class="keyword">add</span> (GZDATE VARCHAR2(<span class="number">50</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_oaorder_sync <span class="keyword">ON</span> syncdata.order_manage_track (oaorder);</span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_no_sync <span class="keyword">ON</span> syncdata.order_manage_track (<span class="keyword">no</span>);</span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_prno_syn <span class="keyword">ON</span> syncdata.order_manage_track (PRNO);</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> syncdata.order_manage_track  </span><br><span class="line"><span class="keyword">SET</span> gzdate <span class="operator">=</span> (  </span><br><span class="line">  <span class="keyword">SELECT</span> <span class="built_in">MAX</span>(gzdate)  </span><br><span class="line">  <span class="keyword">FROM</span> ECOLOGY.formtable_main_99  </span><br><span class="line">  <span class="keyword">WHERE</span> oaorder <span class="operator">=</span> syncdata.order_manage_track.oaorder  </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">--更新订单报告状态 </span></span><br><span class="line"><span class="keyword">UPDATE</span> syncdata.order_manage_track a  </span><br><span class="line"><span class="keyword">SET</span> a.report_status <span class="operator">=</span> (  </span><br><span class="line">  <span class="keyword">SELECT</span> <span class="built_in">MAX</span>(b.status)</span><br><span class="line">  <span class="keyword">FROM</span> ECOLOGY.uf_PTP0102  b</span><br><span class="line">  <span class="keyword">WHERE</span> a.no <span class="operator">=</span> b.no  </span><br><span class="line">);</span><br><span class="line"><span class="comment">--更新订单所属公司</span></span><br><span class="line"><span class="keyword">UPDATE</span> syncdata.order_manage_track  a </span><br><span class="line"><span class="keyword">SET</span> a.company <span class="operator">=</span> (  </span><br><span class="line">  <span class="keyword">SELECT</span>  <span class="built_in">MAX</span>(b.company)</span><br><span class="line">  <span class="keyword">FROM</span> ECOLOGY.uf_PTP0102  b</span><br><span class="line">  <span class="keyword">WHERE</span> b.no <span class="operator">=</span> a.no  </span><br><span class="line">);</span><br><span class="line"><span class="comment">--更新订单账期</span></span><br><span class="line"><span class="keyword">UPDATE</span> syncdata.order_manage_track  a</span><br><span class="line"><span class="keyword">SET</span> a.period <span class="operator">=</span> (  </span><br><span class="line">  <span class="keyword">SELECT</span> <span class="built_in">MAX</span>(b.period)</span><br><span class="line">  <span class="keyword">FROM</span> ECOLOGY.uf_PTP0102  b</span><br><span class="line">  <span class="keyword">WHERE</span> b.no <span class="operator">=</span> a.no  </span><br><span class="line">);</span><br><span class="line"><span class="comment">----更新采购申请账期-</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track  a</span><br><span class="line"><span class="keyword">SET</span> a.period <span class="operator">=</span> (  </span><br><span class="line"> <span class="keyword">select</span> <span class="built_in">MAX</span>(b.period)</span><br><span class="line"> <span class="keyword">FROM</span> ECOLOGY.formtable_main_56  b</span><br><span class="line"> <span class="keyword">WHERE</span> b.no <span class="operator">=</span> a.PRNO</span><br><span class="line">) <span class="keyword">where</span> a.period <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--更新中间字段数据</span></span><br><span class="line"><span class="keyword">UPDATE</span> ECOLOGY.formtable_main_99</span><br><span class="line"><span class="keyword">SET</span> processed_oaorder <span class="operator">=</span> <span class="string">&#x27;,&#x27;</span> <span class="operator">||</span> oaorder <span class="operator">||</span> <span class="string">&#x27;,&#x27;</span> <span class="keyword">where</span> processed_oaorder <span class="keyword">is</span> <span class="keyword">null</span> ;</span><br><span class="line"></span><br><span class="line"><span class="comment">--更新过账日期</span></span><br><span class="line"><span class="keyword">UPDATE</span> syncdata.order_manage_track t</span><br><span class="line"><span class="keyword">SET</span> gzdate <span class="operator">=</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> <span class="built_in">MAX</span>(gzdate)</span><br><span class="line">   <span class="keyword">FROM</span> ECOLOGY.formtable_main_99 r</span><br><span class="line">   <span class="keyword">WHERE</span> r.processed_oaorder <span class="keyword">LIKE</span> <span class="string">&#x27;%,&#x27;</span> <span class="operator">||</span> t.oaorder <span class="operator">||</span> <span class="string">&#x27;,%&#x27;</span></span><br><span class="line">) <span class="keyword">WHERE</span> t.gzdate <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">and</span> t.oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建入库日期中间表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tmp_formtable_main_104_dt2 <span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> a.appdate,b.oaorder <span class="keyword">from</span> ecology.formtable_main_104 a <span class="keyword">left</span> <span class="keyword">join</span> ecology.formtable_main_104_dt1 b <span class="keyword">on</span> a.id <span class="operator">=</span> b.mainid;</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建入库日期中间表索引</span></span><br><span class="line"><span class="keyword">create</span> index idx_oaorder_dt2  <span class="keyword">on</span> tmp_formtable_main_104_dt2(oaorder);</span><br><span class="line"><span class="keyword">create</span> index idx_appdate_dt2  <span class="keyword">on</span> tmp_formtable_main_104_dt2(appdate);</span><br><span class="line"></span><br><span class="line"><span class="comment">--更新入库日期到采购管理跟踪报表</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track t  <span class="keyword">set</span> rkstartdate<span class="operator">=</span>(<span class="keyword">select</span> <span class="built_in">max</span>(a.appdate)  <span class="keyword">from</span> tmp_formtable_main_104_dt2 a <span class="keyword">where</span> a.oaorder<span class="operator">=</span>t.oaorder)</span><br><span class="line"><span class="keyword">where</span>  t.rkstartdate <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">and</span> t.source <span class="operator">=</span> <span class="number">0</span> <span class="keyword">and</span> t.oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--入库日期oaorder不存在则置空</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track t <span class="keyword">set</span> rkstartdate <span class="operator">=</span> <span class="keyword">null</span> <span class="keyword">where</span> t.oaorder <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--删除入库日期中间表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> tmp_formtable_main_104_dt2;</span><br><span class="line"></span><br><span class="line"><span class="comment">--过账日期oaorder不存在则置空</span></span><br><span class="line"><span class="keyword">UPDATE</span> syncdata.order_manage_track t</span><br><span class="line"><span class="keyword">SET</span> gzdate <span class="operator">=</span><span class="keyword">null</span> <span class="keyword">WHERE</span> t.oaorder <span class="keyword">is</span>  <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--更新采购需求状态和采购申请状态</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> syncdata.order_manage_track</span><br><span class="line"><span class="keyword">add</span> (demandstatus <span class="type">CHAR</span>(<span class="number">10</span>),purchaserequeststatus <span class="type">CHAR</span>(<span class="number">10</span>));</span><br><span class="line"><span class="comment">--更新采购需求报告状态数据上去</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track <span class="keyword">set</span> demandstatus  <span class="operator">=</span> (<span class="keyword">select</span> b.status <span class="keyword">from</span> ECOLOGY.UF_PTPDEMAND_DT1 b <span class="keyword">where</span> syncdata.order_manage_track.demandcode  <span class="operator">=</span> b.id  );</span><br><span class="line"><span class="comment">--更新采购申请报告状态上去</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track <span class="keyword">set</span> purchaserequeststatus <span class="operator">=</span> (<span class="keyword">select</span> status <span class="keyword">from</span> ECOLOGY.FORMTABLE_MAIN_56 a <span class="keyword">where</span> syncdata.order_manage_track.oarequest <span class="operator">=</span> a.requestid <span class="keyword">and</span> ROWNUM <span class="operator">&lt;=</span><span class="number">1</span>);</span><br><span class="line"><span class="comment">--添加是否取消字段</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> syncdata.order_manage_track</span><br><span class="line"><span class="keyword">add</span> (iscancelled <span class="type">CHAR</span>(<span class="number">10</span>));</span><br><span class="line"><span class="comment">--更新是否取消数据上去</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track <span class="keyword">set</span> iscancelled <span class="operator">=</span> (<span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> status <span class="operator">=</span><span class="number">8</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span>  <span class="keyword">end</span> <span class="keyword">as</span> iscancelled <span class="keyword">from</span> ECOLOGY.FORMTABLE_MAIN_56 a <span class="keyword">where</span> syncdata.order_manage_track.oarequest <span class="operator">=</span> a.requestid <span class="keyword">and</span> ROWNUM <span class="operator">&lt;=</span><span class="number">1</span>)</span><br><span class="line"><span class="keyword">where</span> iscancelled <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">--增加是否全部入库标识（包含手工改的不再收货）（收货完成标识为是或者收货数量大于等于数量的）</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> syncdata.order_manage_track</span><br><span class="line"><span class="keyword">add</span> (isallinstock <span class="type">CHAR</span>(<span class="number">10</span>));</span><br><span class="line"><span class="comment">--更新是否全部入库标识数据(默认没有全部收货)</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track <span class="keyword">set</span> isallinstock <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">--收货完成标识是的时候全部收货</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track <span class="keyword">set</span> isallinstock <span class="operator">=</span> (<span class="keyword">select</span>  tflag <span class="keyword">from</span> ecology.uf_PTP0102 a  <span class="keyword">where</span> syncdata.order_manage_track.oaorder  <span class="operator">=</span>  a.id) <span class="keyword">where</span> isallinstock <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">--当收货数量大于等于数量的时候也是全部收货</span></span><br><span class="line"><span class="keyword">UPDATE</span> syncdata.order_manage_track</span><br><span class="line"><span class="keyword">SET</span> isallinstock <span class="operator">=</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">CASE</span> <span class="keyword">WHEN</span> a.tnum <span class="operator">&gt;=</span> a.num <span class="keyword">THEN</span> <span class="number">1</span> <span class="keyword">ELSE</span> <span class="number">0</span> <span class="keyword">END</span></span><br><span class="line">    <span class="keyword">FROM</span> ecology.uf_PTP0102_dt1 a </span><br><span class="line">    <span class="keyword">INNER</span> <span class="keyword">JOIN</span> ecology.uf_PTP0102 b <span class="keyword">ON</span> a.mainid <span class="operator">=</span> b.id</span><br><span class="line">    <span class="keyword">WHERE</span> syncdata.order_manage_track.no <span class="operator">=</span> b.no</span><br><span class="line">    <span class="keyword">AND</span> a.demandrq <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">    <span class="keyword">AND</span> syncdata.order_manage_track.demandrq <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">    <span class="keyword">AND</span> ROWNUM <span class="operator">&lt;=</span> <span class="number">1</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">WHERE</span> isallinstock <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">--更新京东订单付款金额为订单金额（供应商为103527时 付款金额等于订单金额）</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track <span class="keyword">set</span> FKINFO <span class="operator">=</span> AMOUNT <span class="keyword">where</span> OAREQUEST <span class="keyword">in</span> (<span class="keyword">select</span> oarequest <span class="keyword">from</span> ecology.uf_PTP0102 <span class="keyword">where</span> lifnr <span class="operator">=</span> <span class="number">103527</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--增加操作时间</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> syncdata.order_manage_track</span><br><span class="line"><span class="keyword">ADD</span> column_name <span class="type">TIMESTAMP</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA </tag>
            
            <tag> OA报表 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OA采购</title>
      <link href="/2024/01/12/oa/OA%E9%87%87%E8%B4%AD/"/>
      <url>/2024/01/12/oa/OA%E9%87%87%E8%B4%AD/</url>
      
        <content type="html"><![CDATA[<h1 id="采购"><a href="#采购" class="headerlink" title="采购"></a>采购</h1><h2 id="数据库关系"><a href="#数据库关系" class="headerlink" title="数据库关系"></a>数据库关系</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240112144748068.png" alt="image-20240112144748068"></p><h2 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h2><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E9%87%87%E8%B4%AD%E4%B8%9A%E5%8A%A1%20(1).jpg" alt="采购业务 (1)" style="zoom:200%;" /><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17024509248627.png" alt="img"></p><h2 id="预算"><a href="#预算" class="headerlink" title="预算"></a>预算</h2><p>1.选择费用大小类</p><p>​<img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231213103220932.png" alt="image-20231213103220932" style="zoom: 33%;" /></p><p>2.对应一个预算科目或者项目</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231213103336926.png" alt="image-20231213103336926" style="zoom: 33%;" /><p>3.预算维护（SAP同步过来）</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231213103428427.png" alt="image-20231213103428427" style="zoom:33%;" /><p>4.采购申请的时候预算费用冻结</p><p>入库的时候费用入账 ，确认收货（实际收货发票录入为准），标识为是的时候释放所有冻结的费用，如果超出预算会有</p><h2 id="京东"><a href="#京东" class="headerlink" title="京东"></a>京东</h2><p>供应商为上海圆迈贸易公司的时候需要同步京东账户的数据</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231213164839521.png" alt="image-20231213164839521"></p><p>CreatePTP0205 归档日期大于预付款基准日期直接付款</p><p>入库 归档入账</p><p>开票 过账日期+账期自动发起付款申请 可能对应多比订单 归档同步凭证</p><p>付款申请  出纳节点同步到SAP</p><p>供应商变更</p><p>合同变更</p><p>预付款和入库是平行的关系</p><p>应付对应预付款 如果发票没有录入还要走应付发票录入 提交就冻结预算 ，发票录入后才会入账</p><p>招标文件</p><p>sap计划任务推到OA直采数据，入库在直采入 直采不涉及预算</p><p>京东付款 直接走SAP 京东同步数据</p><p>采购订单作废</p>]]></content>
      
      
      <categories>
          
          <category> OA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 供应链 </tag>
            
            <tag> OA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>组织架构</title>
      <link href="/2024/01/12/%E6%B5%B7%E6%AD%A3/%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84/"/>
      <url>/2024/01/12/%E6%B5%B7%E6%AD%A3/%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<p>组织架构</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240111112106174.png" alt="image-20240111112106174"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240117140605994.png" alt="image-20240117140605994"></p>]]></content>
      
      
      <categories>
          
          <category> 海正 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 组织 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CR2024000013签约主体公司设置默认“空白 必选项”，并手工选择</title>
      <link href="/2024/01/09/oa%E5%8F%91%E5%B8%83/2023/CR2024000013%E7%AD%BE%E7%BA%A6%E4%B8%BB%E4%BD%93%E5%85%AC%E5%8F%B8%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E2%80%9C%E7%A9%BA%E7%99%BD%20%E5%BF%85%E9%80%89%E9%A1%B9%E2%80%9D%EF%BC%8C%E5%B9%B6%E6%89%8B%E5%B7%A5%E9%80%89%E6%8B%A9/"/>
      <url>/2024/01/09/oa%E5%8F%91%E5%B8%83/2023/CR2024000013%E7%AD%BE%E7%BA%A6%E4%B8%BB%E4%BD%93%E5%85%AC%E5%8F%B8%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E2%80%9C%E7%A9%BA%E7%99%BD%20%E5%BF%85%E9%80%89%E9%A1%B9%E2%80%9D%EF%BC%8C%E5%B9%B6%E6%89%8B%E5%B7%A5%E9%80%89%E6%8B%A9/</url>
      
        <content type="html"><![CDATA[<p>CR2024000013签约主体公司设置默认“空白 必选项”，并手工选择</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> qyztgsVal1 = <span class="title class_">WfForm</span>.<span class="title function_">getFieldValue</span>(qyztgs);<span class="comment">//默认签约主体公司id</span></span><br><span class="line"><span class="keyword">let</span> qyztgsValdesc = <span class="title class_">WfForm</span>.<span class="title function_">getBrowserShowName</span>(qyztgs);  <span class="comment">//默认签约主体公司名称</span></span><br><span class="line"><span class="title class_">WfForm</span>.<span class="title function_">bindFieldChangeEvent</span>(htlx, <span class="keyword">function</span> (<span class="params">obj, id, value</span>) &#123;</span><br><span class="line">  <span class="title function_">show</span>();</span><br><span class="line">  <span class="title class_">WfForm</span>.<span class="title function_">changeFieldValue</span>(hth,&#123;<span class="attr">value</span>:<span class="string">&#x27;&#x27;</span>&#125;);<span class="comment">//清空合同号</span></span><br><span class="line">  <span class="title class_">WfForm</span>.<span class="title function_">changeFieldValue</span>(gdd,&#123;<span class="attr">value</span>:<span class="string">&#x27;&#x27;</span>&#125;);</span><br><span class="line">  <span class="title class_">WfForm</span>.<span class="title function_">changeFieldValue</span>(source,&#123;<span class="attr">value</span>:<span class="string">&#x27;&#x27;</span>&#125;);<span class="comment">//清空框架采购合同类型 cr CR2021000566</span></span><br><span class="line">  <span class="title class_">WfForm</span>.<span class="title function_">changeFieldValue</span>(zbwjfl,&#123;<span class="attr">value</span>:<span class="string">&#x27;&#x27;</span>&#125;);<span class="comment">//情况招标文件分类 CR2021000930</span></span><br><span class="line">  <span class="title function_">htjetb</span>(value);</span><br><span class="line">  <span class="keyword">var</span> baseinfo = <span class="title class_">WfForm</span>.<span class="title function_">getBaseInfo</span>();</span><br><span class="line">  <span class="keyword">if</span>(baseinfo.<span class="property">nodeid</span> == <span class="number">106029</span> &amp;&amp; value == <span class="number">11</span>)&#123;</span><br><span class="line">       <span class="title class_">WfForm</span>.<span class="title function_">changeFieldValue</span>(qyztgs, &#123; <span class="attr">value</span>: <span class="string">&#x27;&#x27;</span> &#125;);</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="title class_">WfForm</span>.<span class="title function_">changeFieldValue</span>(qyztgs, &#123; <span class="attr">value</span>: qyztgsVal1, <span class="attr">specialobj</span>: [&#123; <span class="attr">id</span>: qyztgsVal1, <span class="attr">name</span>: qyztgsValdesc &#125;] &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240109160024184.png" alt="image-20240109160024184" style="zoom:50%;" />]]></content>
      
      
      <categories>
          
          <category> 发布 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA发布 </tag>
            
            <tag> 合同管理流程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>语法</title>
      <link href="/2024/01/08/%E5%A4%96%E8%AF%AD/%E6%97%A5%E8%AF%AD/%E6%96%87%E6%B3%95/"/>
      <url>/2024/01/08/%E5%A4%96%E8%AF%AD/%E6%97%A5%E8%AF%AD/%E6%96%87%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>文法</p><h1 id="第一单元"><a href="#第一单元" class="headerlink" title="第一单元"></a>第一单元</h1><h2 id="快速浏览"><a href="#快速浏览" class="headerlink" title="快速浏览"></a>快速浏览</h2><p>た形／名ーの＋あげく</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">最后... 消极</span><br></pre></td></tr></table></figure><p>　する／の＋　あまり（に）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">由于过度...而...</span><br></pre></td></tr></table></figure><p>来た／である＋　以上（は）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">既然...就...</span><br></pre></td></tr></table></figure><p>である／　＋いっぼうで（は）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一方面...另一方面...</span><br></pre></td></tr></table></figure><p>高まる／高くなる　＋いっぼうだ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不断....越来....</span><br></pre></td></tr></table></figure><p>名ーの／する　＋上では</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在...方面  在...上</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在...之后</span><br></pre></td></tr></table></figure><p>た＋上は</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">既然...就...</span><br></pre></td></tr></table></figure><p>な／名ーの＋うちに</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在...期间 趁着...</span><br></pre></td></tr></table></figure><p>ない＋うちに</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在某事发生的期间，发生了另外的一件事情　．．．</span><br></pre></td></tr></table></figure><p>する／名ーの　＋うちは</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在还没...的时候、期间</span><br></pre></td></tr></table></figure><p>（よ）ではないか／（よ）うじゃないか</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">让我们...吧</span><br></pre></td></tr></table></figure><h2 id="课本"><a href="#课本" class="headerlink" title="课本"></a>课本</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107100418672.png" alt="image-20240107100418672"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107100449460.png" alt="image-20240107100449460"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107100502193.png" alt="image-20240107100502193"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107100516225.png" alt="image-20240107100516225"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107100527731.png" alt="image-20240107100527731"></p><h1 id="第二单元"><a href="#第二单元" class="headerlink" title="第二单元"></a>第二单元</h1><p>ます＋　うる　　</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表示可能性</span><br></pre></td></tr></table></figure><p>えない</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">书面语 不可能</span><br></pre></td></tr></table></figure><p>名　の／た＋おかげで</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">多亏了</span><br></pre></td></tr></table></figure><p>る／名ーの＋おそれがある</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表示不好的事情发生的可能性</span><br></pre></td></tr></table></figure><p>名＋の／た＋甲斐がある</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">有...的价值</span><br></pre></td></tr></table></figure><p>普通形の／名　＋　（を）がきっかけで</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">以...为契机</span><br></pre></td></tr></table></figure><p>る／名＋の　＋　限り／限りでは　／ない限り</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">尽量....</span><br></pre></td></tr></table></figure><p>る＋の／名　＋　が契機で／が契機になっで／を契機に（して）／契機として</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">以... 为契机</span><br></pre></td></tr></table></figure><p>ます　＋　かけだ／かけの／かける</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">没...完</span><br></pre></td></tr></table></figure><p>ます　＋がたい</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">难以....</span><br></pre></td></tr></table></figure><p>とこらが</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">然而....</span><br></pre></td></tr></table></figure><p>といっても</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">虽说...也...</span><br></pre></td></tr></table></figure><h2 id="课本-1"><a href="#课本-1" class="headerlink" title="课本"></a>课本</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107101542791.png" alt="image-20240107101542791"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240107101627.jpg" alt="微信图片_20240107101627"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240107101704.jpg" alt="微信图片_20240107101704"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107101740466.png" alt="image-20240107101740466"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107101753719.png" alt="image-20240107101753719"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107101806395.png" alt="image-20240107101806395"></p><h1 id="第三单元"><a href="#第三单元" class="headerlink" title="第三单元"></a>第三单元</h1><p>ます／名　＋　がちな／がちの／がちだ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">容易...</span><br></pre></td></tr></table></figure><p>かというと／かといえば</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">至于是否...  是不是....就...</span><br></pre></td></tr></table></figure><p>どちらかというと</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">总的来说</span><br></pre></td></tr></table></figure><p>た＋かと思うと／かと思ったら</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">刚...就...</span><br></pre></td></tr></table></figure><p>かと思えば</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">既...又...</span><br></pre></td></tr></table></figure><p>～か～ないかのうちに</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">刚... 就....</span><br></pre></td></tr></table></figure><p>～か何か</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表示泛指</span><br></pre></td></tr></table></figure><p>ます＋かねない</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">有可能...</span><br></pre></td></tr></table></figure><p>～かねる</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">很难....</span><br></pre></td></tr></table></figure><p>～かのようだ／かのような／かのように</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">像...一样</span><br></pre></td></tr></table></figure><p>からいいようなものの</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">幸好/</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="课本-2"><a href="#课本-2" class="headerlink" title="课本"></a>课本</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240107105139.jpg" alt="微信图片_20240107105139"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240107105225.jpg" alt="微信图片_20240107105225"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240107105257.jpg" alt="微信图片_20240107105257"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20240107105331-17045960900888.jpg" alt="微信图片_20240107105331"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107105510299.png" alt="image-20240107105510299"></p><h1 id="第四单元"><a href="#第四单元" class="headerlink" title="第四单元"></a>第四单元</h1><p>からいうと／からいえば／からいったら／からいって</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">从...来说</span><br></pre></td></tr></table></figure><p>からこそ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">正因为...</span><br></pre></td></tr></table></figure><p>からして</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">单从...来看</span><br></pre></td></tr></table></figure><p>からすると</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不能因为...就...</span><br></pre></td></tr></table></figure><p>からといって</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">虽说...但是....</span><br></pre></td></tr></table></figure><p>からには</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">既然...就...</span><br></pre></td></tr></table></figure><p>からみると／から見れば／からみて／からみても</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">从...来看</span><br></pre></td></tr></table></figure><p>かわりに</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">代替，交换</span><br></pre></td></tr></table></figure><p>気味</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">稍微有点...</span><br></pre></td></tr></table></figure><p>きり／きりだ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">只有</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一...就再没...</span><br></pre></td></tr></table></figure><h1 id="第五单元"><a href="#第五单元" class="headerlink" title="第五单元"></a>第五单元</h1><p>きる／きれる／きれない</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">（不）完</span><br></pre></td></tr></table></figure><p>くせに／くせして</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">明明...</span><br></pre></td></tr></table></figure><p>くらい</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">程度</span><br></pre></td></tr></table></figure><p>ことか</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">多么...</span><br></pre></td></tr></table></figure><p>ことから</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">因为...</span><br></pre></td></tr></table></figure><p>こただ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">应该...   不要...</span><br></pre></td></tr></table></figure><p>ことだから</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">因为是...</span><br></pre></td></tr></table></figure><p>ことなく</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不...</span><br></pre></td></tr></table></figure><p>ことは～が</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">是...但...</span><br></pre></td></tr></table></figure><p>ことはない</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">没必要...</span><br></pre></td></tr></table></figure><h1 id="第六单元"><a href="#第六单元" class="headerlink" title="第六单元"></a>第六单元</h1><p>際に</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在..的时候</span><br></pre></td></tr></table></figure><p>最中に／最中だ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">正在...</span><br></pre></td></tr></table></figure><p>ざるを得ない</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不得不...</span><br></pre></td></tr></table></figure><p>次第／次第だ／次第で</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一...就会...</span><br></pre></td></tr></table></figure><p>じょうは</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">从...上来看</span><br></pre></td></tr></table></figure><p>末に</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">经过...最后...</span><br></pre></td></tr></table></figure><p>ずにすむ／ないですむ／なくてすむ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不用...就可以了</span><br></pre></td></tr></table></figure><p>ずにはいられない／ないではいられない</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不由得...</span><br></pre></td></tr></table></figure><p>せいで／せいか／せいだ／せいにする</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">因为...</span><br></pre></td></tr></table></figure><p>たいばかり／ほしいばかり</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">就是因为想....</span><br></pre></td></tr></table></figure><h1 id="第七单元"><a href="#第七单元" class="headerlink" title="第七单元"></a>第七单元</h1><p>だけあって</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">与...相称</span><br></pre></td></tr></table></figure><p>だけに</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">正因为...更加...</span><br></pre></td></tr></table></figure><p>たとえ　ても</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">即使...也</span><br></pre></td></tr></table></figure><p>たとこら</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">表示做了前项动作，发生了后项的结果</span><br></pre></td></tr></table></figure><p>たとこらが</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">虽然...但是...</span><br></pre></td></tr></table></figure><p>たとたんに</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一...就...</span><br></pre></td></tr></table></figure><p>たばかり</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">刚...</span><br></pre></td></tr></table></figure><p>たびに</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">每次...</span><br></pre></td></tr></table></figure><p>だらけ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">满是...</span><br></pre></td></tr></table></figure><p>ついてに</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">顺便...</span><br></pre></td></tr></table></figure><p>こない</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不可能...</span><br></pre></td></tr></table></figure><h1 id="第八单元"><a href="#第八单元" class="headerlink" title="第八单元"></a>第八单元</h1><p>つつも</p><p>つつある</p><p>ぽい</p><p>つもりだ</p><p>て以来</p><p>てからでないと／てからでなければ</p><p>てしょうがない</p><p>てたまらない</p><p>てでも</p><h1 id="第九单元"><a href="#第九单元" class="headerlink" title="第九单元"></a>第九单元</h1><p>てならない</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">非常的....</span><br></pre></td></tr></table></figure><p>てはいられない</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不能...</span><br></pre></td></tr></table></figure><p>てばかりはいられない／てばがりもいられない</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">也不能总是...</span><br></pre></td></tr></table></figure><p>てはじめて</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在...之后才...</span><br></pre></td></tr></table></figure><p>ということだ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">就是...</span><br></pre></td></tr></table></figure><p>というものではない</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">并非...</span><br></pre></td></tr></table></figure><p>というより</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">与其说....</span><br></pre></td></tr></table></figure><p>といっても</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">虽说....</span><br></pre></td></tr></table></figure><p>とおり</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">按照....</span><br></pre></td></tr></table></figure><p>とか</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">说是...什么的</span><br></pre></td></tr></table></figure><p>とかで</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">说是因为...的</span><br></pre></td></tr></table></figure><h1 id="第十单元"><a href="#第十单元" class="headerlink" title="第十单元"></a>第十单元</h1><p> どこらか</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">哪里...</span><br></pre></td></tr></table></figure><p>とからだった</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">差一点就...</span><br></pre></td></tr></table></figure><p>どこらてはない</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不是...的时候</span><br></pre></td></tr></table></figure><p>とこらに</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">正当...的时候</span><br></pre></td></tr></table></figure><p>とこらを</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">正当...的时候</span><br></pre></td></tr></table></figure><p>としかいいようがない</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">只能说是...</span><br></pre></td></tr></table></figure><p>としたら／とすると／とすれば</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果...</span><br></pre></td></tr></table></figure><p>とともに</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">随着...</span><br></pre></td></tr></table></figure><p>とはかぎらない</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">未必...</span><br></pre></td></tr></table></figure><p>ないことには</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果不...</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 英语 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 日语 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>信息技术发展</title>
      <link href="/2024/01/08/%E9%AB%98%E9%A1%B9/%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E5%8F%91%E5%B1%95/"/>
      <url>/2024/01/08/%E9%AB%98%E9%A1%B9/%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E5%8F%91%E5%B1%95/</url>
      
        <content type="html"><![CDATA[<p>信息技术发展</p><h1 id="信息技术发展"><a href="#信息技术发展" class="headerlink" title="信息技术发展"></a>信息技术发展</h1><h2 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108193348712.png" alt="image-20240108193348712"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108193432946.png" alt="image-20240108193432946"></p><h2 id="TCP-IP"><a href="#TCP-IP" class="headerlink" title="TCP&#x2F;IP"></a>TCP&#x2F;IP</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108193626837.png" alt="image-20240108193626837"></p><h2 id="软件定义网络SDN"><a href="#软件定义网络SDN" class="headerlink" title="软件定义网络SDN"></a>软件定义网络SDN</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108193823475.png" alt="image-20240108193823475"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108194002866.png" alt="image-20240108194002866"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108194108718.png" alt="image-20240108194108718"></p><h2 id="5G网络"><a href="#5G网络" class="headerlink" title="5G网络"></a>5G网络</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108195618977.png" alt="image-20240108195618977"></p><h2 id="存储和数据库"><a href="#存储和数据库" class="headerlink" title="存储和数据库"></a>存储和数据库</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108195638186.png" alt="image-20240108195638186"></p><h2 id="3种网络存储对比"><a href="#3种网络存储对比" class="headerlink" title="3种网络存储对比"></a>3种网络存储对比</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108200001196.png" alt="image-20240108200001196"></p><h2 id="存储技术"><a href="#存储技术" class="headerlink" title="存储技术"></a>存储技术</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108200241077.png" alt="image-20240108200241077"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108200435018.png" alt="image-20240108200435018"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108200553603.png" alt="image-20240108200553603"></p><h2 id="信息安全"><a href="#信息安全" class="headerlink" title="信息安全"></a>信息安全</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108200943575.png" alt="image-20240108200943575"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108201219252.png" alt="image-20240108201219252"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108201437534.png" alt="image-20240108201437534"></p><h2 id="物联网"><a href="#物联网" class="headerlink" title="物联网"></a>物联网</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108201641926.png" alt="image-20240108201641926"></p><h2 id="云计算"><a href="#云计算" class="headerlink" title="云计算"></a>云计算</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108202128265.png" alt="image-20240108202128265"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108202503360.png" alt="image-20240108202503360"></p><h2 id="大数据"><a href="#大数据" class="headerlink" title="大数据"></a>大数据</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108202724234.png" alt="image-20240108202724234"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108203055170.png" alt="image-20240108203055170"></p><h2 id="区块链"><a href="#区块链" class="headerlink" title="区块链"></a>区块链</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108203421040.png" alt="image-20240108203421040"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108204004265.png" alt="image-20240108204004265"></p><h2 id="人工智能"><a href="#人工智能" class="headerlink" title="人工智能"></a>人工智能</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108204357406.png" alt="image-20240108204357406"></p><h2 id="虚拟现实"><a href="#虚拟现实" class="headerlink" title="虚拟现实"></a>虚拟现实</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108204704474.png" alt="image-20240108204704474"></p>]]></content>
      
      
      <categories>
          
          <category> 软考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 高项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>信息技术治理</title>
      <link href="/2024/01/08/%E9%AB%98%E9%A1%B9/%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E6%B2%BB%E7%90%86/"/>
      <url>/2024/01/08/%E9%AB%98%E9%A1%B9/%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF%E6%B2%BB%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>信息技术治理</p><h1 id="IT治理"><a href="#IT治理" class="headerlink" title="IT治理"></a>IT治理</h1><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108205246743.png" alt="image-20240108205246743"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108212149896.png" alt="image-20240108212149896"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108213645881.png" alt="image-20240108213645881"></p><p>​</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108214110938.png" alt="image-20240108214110938"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108214228683.png" alt="image-20240108214228683"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108214349478.png" alt="image-20240108214349478"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108214518327.png" alt="image-20240108214518327"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108214645052.png" alt="image-20240108214645052"></p><h1 id="IT审计"><a href="#IT审计" class="headerlink" title="IT审计"></a>IT审计</h1><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108214846748.png" alt="image-20240108214846748"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108215024925.png" alt="image-20240108215024925"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108215251333.png" alt="image-20240108215251333"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108215505760.png" alt="image-20240108215505760"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108215809437.png" alt="image-20240108215809437"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108215959334.png" alt="image-20240108215959334"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108220138035.png" alt="image-20240108220138035"></p>]]></content>
      
      
      <categories>
          
          <category> 软考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 高项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>信息系统管理</title>
      <link href="/2024/01/08/%E9%AB%98%E9%A1%B9/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/"/>
      <url>/2024/01/08/%E9%AB%98%E9%A1%B9/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>信息系统管理</p><h1 id="管理方法"><a href="#管理方法" class="headerlink" title="管理方法"></a>管理方法</h1><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108220703192.png" alt="image-20240108220703192"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108220808595.png" alt="image-20240108220808595"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108220933306.png" alt="image-20240108220933306"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108222000238.png" alt="image-20240108222000238"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108222409968.png" alt="image-20240108222409968"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108222521680.png" alt="image-20240108222521680"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108223016379.png" alt="image-20240108223016379"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108223113091.png" alt="image-20240108223113091"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108223209756.png" alt="image-20240108223209756"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108223251485.png" alt="image-20240108223251485"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108223432246.png" alt="image-20240108223432246"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108223709229.png" alt="image-20240108223709229"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108223943510.png" alt="image-20240108223943510"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108224027042.png" alt="image-20240108224027042"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108224545630.png" alt="image-20240108224545630"></p><p><img src="C:\Users\ALIENWARE\Desktop\blog\blog\source_posts\高项\信息系统管理.assets\image-20240108224739965-17047252630051.png" alt="image-20240108224739965"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108224846351.png" alt="image-20240108224846351"></p>]]></content>
      
      
      <categories>
          
          <category> 软考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 高项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CR2024000012采购申请去掉过滤字符</title>
      <link href="/2024/01/08/oa%E5%8F%91%E5%B8%83/2023/%E5%8E%BB%E6%8E%89%E8%BF%87%E6%BB%A4%E5%AD%97%E7%AC%A6/"/>
      <url>/2024/01/08/oa%E5%8F%91%E5%B8%83/2023/%E5%8E%BB%E6%8E%89%E8%BF%87%E6%BB%A4%E5%AD%97%E7%AC%A6/</url>
      
        <content type="html"><![CDATA[<p>去掉过滤字符</p><p>因为采购申请是1系统需要对外检查，因此要去除特殊字符过滤。</p><p>调整</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hisun.mode.PTP0102_SAPORDER#Jco_ZMM0051</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 发布 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA发布 </tag>
            
            <tag> 采购申请流程 </tag>
            
            <tag> 供应链发布 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>影刀初级</title>
      <link href="/2024/01/07/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%BD%B1%E5%88%80%E4%B8%8E%E5%AE%9E%E8%B7%B5/"/>
      <url>/2024/01/07/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E5%BD%B1%E5%88%80%E4%B8%8E%E5%AE%9E%E8%B7%B5/</url>
      
        <content type="html"><![CDATA[<a href="https://chenbaitao120.gitee.io/2024/01/07/影刀初级" onclick="window.location.replace(this.href); return false;">    <img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231210144809908.png" alt="image-20231209143728319" style="zoom: 80%;"  /></a><span id="more"></span><h1 id="搭建第一个机器人"><a href="#搭建第一个机器人" class="headerlink" title="搭建第一个机器人"></a>搭建第一个机器人</h1><h2 id="搭建第一个自动化流程"><a href="#搭建第一个自动化流程" class="headerlink" title="搭建第一个自动化流程"></a>搭建第一个自动化流程</h2><ul><li><p>打开网页-&gt;填写输入框-&gt;crlt+鼠标左键可以选择输入框元素-&gt;点击元素 -&gt;crlt+左键</p></li><li><p>搭建完成，其实就是对 元素+操作 的编排集合。</p></li></ul><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231210144154573.png" alt="image-20231210144154573" style="zoom:50%;" /><h2 id="元素"><a href="#元素" class="headerlink" title="元素"></a>元素</h2><ul><li>最大相似性</li></ul><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231210204111384.png" alt="image-20231210204111384"></p><ul><li><p>元素有完成和取消，如果想捕获全部，那么完成和取消都需要捕获，因为他们只有位置是相似的。</p></li><li><p>相似元素主要处理循环相似元素的操作。</p></li></ul><h2 id="操作类型"><a href="#操作类型" class="headerlink" title="操作类型"></a>操作类型</h2><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231216135128038.png" alt="image-20231216135128038" style="zoom: 50%;"/><p><a href="https://shop.yingdao.com/">https://shop.yingdao.com/</a> 影刀商城</p><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><ul><li>对象命名不能重复；要有意义；</li></ul> <img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231216143618599.png" alt="image-20231216143618599" style="zoom: 50%;" /><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><ul><li><p>字符串  数字 区别是拼接和相加</p></li><li><p>列表</p></li></ul><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231216151701472.png" alt="image-20231216151701472" style="zoom:50%;" /><h2 id="如何搭建一个实用的机器人"><a href="#如何搭建一个实用的机器人" class="headerlink" title="如何搭建一个实用的机器人"></a>如何搭建一个实用的机器人</h2><p>输入商品名称进行搜索，搜索出来的内容抓取下来保存到本地的excel里面去</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231216152031597.png" alt="image-20231216152031597"></p><p>打开页面，输入账号密码，设置超时时间，通过获取相似元素列表获取底下的页码，然后获得倒数第二个就是页码的数值，设为变量，这个就是页码的数字，批量数据抓取抓取页数这里设置成这个数字，就能固定获取到指定的全部列表数据。</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231216161643149.png" alt="image-20231216161643149" style="zoom: 80%;" /><h2 id="如何进行人机交互"><a href="#如何进行人机交互" class="headerlink" title="如何进行人机交互"></a>如何进行人机交互</h2><ul><li>用这个可以让执行的过程中允许你输入东西，可以让你在运行过程中个性化自定义的东西放进去</li></ul><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231216162316281-17027150274641.png" style="zoom: 80%;" /><h2 id="如何进行机器人的分享"><a href="#如何进行机器人的分享" class="headerlink" title="如何进行机器人的分享"></a>如何进行机器人的分享</h2><ul><li><p>左上角重命名保存一下退出来。</p></li><li><p>要分享先发版；选中机器人点击发版。填写发版备注；</p></li></ul><h2 id="定时任务"><a href="#定时任务" class="headerlink" title="定时任务"></a>定时任务</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231216164525524.png" alt="image-20231216164525524"></p><h1 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h1><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231218205554441.png" alt="image-20231218205554441" style="zoom:50%;" /><h2 id="单分支"><a href="#单分支" class="headerlink" title="单分支"></a>单分支</h2><p>可以进行条件判断</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231218214427565.png" alt="image-20231218214427565"></p><h2 id="二分支"><a href="#二分支" class="headerlink" title="二分支"></a>二分支</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231218214839752.png" alt="image-20231218214839752"></p><h2 id="多分支"><a href="#多分支" class="headerlink" title="多分支"></a>多分支</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231218220439559.png" alt="image-20231218220439559"></p><h2 id="与或"><a href="#与或" class="headerlink" title="与或"></a>与或</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231218222344644.png" alt="image-20231218222344644"></p><h2 id="元素判断"><a href="#元素判断" class="headerlink" title="元素判断"></a>元素判断</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231218223824657.png" alt="image-20231218223824657"></p><h1 id="等待指令"><a href="#等待指令" class="headerlink" title="等待指令"></a>等待指令</h1><p>网页元素没有及时加载出来需要等待一段时间。</p><h2 id="等待固定时间"><a href="#等待固定时间" class="headerlink" title="等待固定时间"></a>等待固定时间</h2><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240101105830655.png" alt="image-20240101105830655" style="zoom:50%;" /><h2 id="等待不固定的时间"><a href="#等待不固定的时间" class="headerlink" title="等待不固定的时间"></a>等待不固定的时间</h2><p>等待-&gt;等待元素web</p><p> 如果超过时间可以设置超时时间</p><h2 id="等待随机事件"><a href="#等待随机事件" class="headerlink" title="等待随机事件"></a>等待随机事件</h2><p>为了让操作更像人，可以在操作后面加入随机的等待</p><h1 id="循环指令"><a href="#循环指令" class="headerlink" title="循环指令"></a>循环指令</h1><h2 id="FOR循环"><a href="#FOR循环" class="headerlink" title="FOR循环"></a>FOR循环</h2><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240102202321665.png" alt="image-20240102202321665" style="zoom:50%;" /><h2 id="FOREACH循环"><a href="#FOREACH循环" class="headerlink" title="FOREACH循环"></a>FOREACH循环</h2><p> 可以按照python语法循环里面的值<img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240102203057848.png" alt="image-20240102203057848"></p><h2 id="循环指令-1"><a href="#循环指令-1" class="headerlink" title="循环指令"></a>循环指令</h2><p>不仅仅可以循环元素对象还可以循环元素的文本内容</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240102203719748.png" alt="image-20240102203719748"></p><h2 id="如何处理分页的订单"><a href="#如何处理分页的订单" class="headerlink" title="如何处理分页的订单"></a>如何处理分页的订单</h2><p>固定页数</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240102210455527.png" alt="image-20240102210455527"></p><p>不固定页数</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240102210909864.png" alt="image-20240102210909864"></p><h2 id="如何去循环多个账号"><a href="#如何去循环多个账号" class="headerlink" title="如何去循环多个账号"></a>如何去循环多个账号</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240102220222057.png" alt="image-20240102220222057"></p><h2 id="无限循环"><a href="#无限循环" class="headerlink" title="无限循环"></a>无限循环</h2><p>实时监控作用</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240102221343735.png" alt="image-20240102221343735" style="zoom:50%;" /><h2 id="循环的控制"><a href="#循环的控制" class="headerlink" title="循环的控制"></a>循环的控制</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240102222052797.png" alt="image-20240102222052797"></p><h1 id="网页操作自动化"><a href="#网页操作自动化" class="headerlink" title="网页操作自动化"></a>网页操作自动化</h1><p>跳转至新网站 前进 后退 刷新</p><h2 id="点击与悬浮"><a href="#点击与悬浮" class="headerlink" title="点击与悬浮"></a>点击与悬浮</h2><p>点击被遮盖住 如何操作 可以勾选掉  直接通过代码点击</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107141617001.png" alt="image-20240107141617001" style="zoom:25%;" /><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107141954124.png" alt="image-20240107141954124"></p><h2 id="输入框"><a href="#输入框" class="headerlink" title="输入框"></a>输入框</h2><p>{Enter} 是快捷键回车</p><p>输入密码的时候强制加载美式键盘</p><h2 id="各种框的操作"><a href="#各种框的操作" class="headerlink" title="各种框的操作"></a>各种框的操作</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107144438233.png" alt="image-20240107144438233"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107144602720.png" alt="image-20240107144602720"></p><h2 id="父级元素找子级元素"><a href="#父级元素找子级元素" class="headerlink" title="父级元素找子级元素"></a>父级元素找子级元素</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107144959282.png" alt="image-20240107144959282"></p><p>根据子元素判断决定是否对另外的子元素执行什么样的操作</p><p>捕小的相似元素 然后找到父级相似元素 拿到大元素之后</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107145301643.png" alt="image-20240107145301643" style="zoom:50%;" /><p>获取元素对象 从大元素里面去找小元素</p><p>找到对应的相似元素 然后得出交级</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107145540270.png" alt="image-20240107145540270" style="zoom:50%;" /><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107145618233.png" alt="image-20240107145618233" style="zoom:50%;" /><p>把这个特定元素保存为‘状态’</p><p>然后在数据提取里面获取元素信息进行判断操作</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107150030441.png" alt="image-20240107150030441"></p><p> 确认按钮可能有多个，建议判断一下是否可见<img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107150332066.png" alt="image-20240107150332066"></p><h2 id="关联元素"><a href="#关联元素" class="headerlink" title="关联元素"></a>关联元素</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107150731316.png" alt="image-20240107150731316"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107151854301.png" alt="image-20240107151854301"></p><p>输入框是名称的相邻元素的子元素</p><h1 id="其他网页元素操作"><a href="#其他网页元素操作" class="headerlink" title="其他网页元素操作"></a>其他网页元素操作</h1><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107152944097.png" alt="image-20240107152944097"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107153100756.png" alt="image-20240107153100756"></p><h1 id="获取网页信息"><a href="#获取网页信息" class="headerlink" title="获取网页信息"></a>获取网页信息</h1><p>可以获取网页的属性 都可以拿出来</p><p>比如图片的src</p><p>滚动条的位置</p><p>网页的截图 可以保存起来</p><h2 id="处理网页对话框"><a href="#处理网页对话框" class="headerlink" title="处理网页对话框"></a>处理网页对话框</h2><p>上传文件</p><p>下载文件</p><p>有些对话框 要当软件元素处理 捕获一下 深度模式捕获 </p><p>网页设置要设置允许访问文件网址 这样才能用影刀访问文件</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107155859341.png" alt="image-20240107155859341"></p><h2 id="发货案例"><a href="#发货案例" class="headerlink" title="发货案例"></a>发货案例</h2><p>状态是完成；名称不能是篮球鞋  满足后点击发货 然后翻页</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107160039809.png" alt="image-20240107160039809"></p><p>获取相似元素列表可以获取到倒数第二个元素</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107160805774.png" alt="image-20240107160805774" style="zoom:50%;" /><p>循环处理</p>  <img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107160850960.png" alt="image-20240107160850960" style="zoom: 67%;" /><p>点击下一页</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107160933769.png" alt="image-20240107160933769" style="zoom:50%;" /><p>第五次的时候不需要点下一次按钮了</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107161015302.png" alt="image-20240107161015302" style="zoom:50%;" /><p>处理页的订单，循环订单的相似元素，捕获小元素找到父元素</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107161107495.png" alt="image-20240107161107495" style="zoom:50%;" /><p>父元素里面找到小元素，交集找法 获取元素对象</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107161240128.png" alt="image-20240107161240128" style="zoom:50%;" /><p>找到元素后获取元素文本内容，保存起来</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107161304604.png" alt="image-20240107161304604" style="zoom:50%;" /><p>判断商品内容是不是等于篮球鞋</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107161329348.png" alt="image-20240107161329348" style="zoom:50%;" /><p>获取元素对象-获取状态，父元素关联相似元素状态</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107161417106.png" alt="image-20240107161417106" style="zoom:50%;" /><p>然后获取子元素确认发货 然后点击一下</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107161540245.png" alt="image-20240107161540245" style="zoom:50%;" /><p>再点击确认按钮</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107161613196.png" alt="image-20240107161613196" style="zoom:50%;" /><h3 id="先抓后搜"><a href="#先抓后搜" class="headerlink" title="先抓后搜"></a>先抓后搜</h3><p>先抓订单号 然后再搜索再去操作</p><p>无限循环找到订单号，一边抓数据一边判断是否到最后一页了 可以判断网页是否包含下一页 或者用元素判断；如果存在就退出循环；否则点击下一页按钮；</p><p>循环这些订单号 进行搜索 再进行操作</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107162256796.png" alt="image-20240107162256796" style="zoom:50%;" /><p>流程运转之前清除一下数据表格</p><p>填写输入框，捕获一下输入框，然后填入订单号的元素，点击一下搜索按钮</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107162608955.png" alt="image-20240107162608955" style="zoom:50%;" /><p>考虑一下异常情况</p><p>判断是否包含暂无数据这个元素</p><p>如果包含暂无数据就可以进入下一个循环</p><p>找到元素后判断一下是否包含篮球鞋这个元素</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107162834301.png" alt="image-20240107162834301"></p><p>如果包含就不需要了</p><p>存在不存在完成这个元素</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107162911442.png" alt="image-20240107162911442" style="zoom:50%;" /><p>如果包含的话直接点击确认发货按钮</p>]]></content>
      
      
      <categories>
          
          <category> IT </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 自动化 </tag>
            
            <tag> 爬虫 </tag>
            
            <tag> 影刀 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Uni-App</title>
      <link href="/2024/01/07/it/Uni-App/"/>
      <url>/2024/01/07/it/Uni-App/</url>
      
        <content type="html"><![CDATA[<p>Uni-App</p><span id="more"></span><p>官网下载一下Hbuilder</p><h1 id="新建项目"><a href="#新建项目" class="headerlink" title="新建项目"></a>新建项目</h1><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106211613766.png" alt="image-20240106211613766"></p><p>编译报错解决方法 <a href="https://blog.csdn.net/itopit/article/details/127404822">https://blog.csdn.net/itopit/article/details/127404822</a></p><p>配置浏览器安装路径和微信开发者工具安装路径</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107122444583.png" alt="image-20240107122444583"></p><p>微信开发者工具打开服务端口</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107122405675.png" alt="image-20240107122405675"></p><h1 id="vue语法在uiniapp中的使用"><a href="#vue语法在uiniapp中的使用" class="headerlink" title="vue语法在uiniapp中的使用"></a>vue语法在uiniapp中的使用</h1><h2 id="vue基本格式"><a href="#vue基本格式" class="headerlink" title="vue基本格式"></a>vue基本格式</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="配置样式"><a href="#配置样式" class="headerlink" title="配置样式"></a>配置样式</h2><p>主要可以包含标签</p><p>小程序可能不兼容很多标签</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>uniapp<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span>零基础<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span>从基础到进阶<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>加粗<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.box</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">width</span>: <span class="number">1000px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">height</span>: <span class="number">100px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">background</span>: pink;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-tag">h1</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">font-size</span>: <span class="number">40px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">color</span>: red;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.row</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">font-style</span>: italic;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="文件配置和全局配置"><a href="#文件配置和全局配置" class="headerlink" title="文件配置和全局配置"></a>文件配置和全局配置</h1><p>新建页面</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107124703374.png" alt="image-20240107124703374"></p><p>这里就会有一个新的配置文件</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107124748550.png" alt="image-20240107124748550" style="zoom:50%;" /><p>修改配置可以更改展示的页面，做哪个哪个配置到最前面</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">//pages数组中第一项表示应用启动页，参考：https://uniapp.dcloud.io/collocation/pages</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;path&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;pages/list/list&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni-app&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;globalStyle&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni-app&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#F8F8F8&quot;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#F8F8F8&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;uniIdRouter&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="单位有内置的视图容器组件-修复"><a href="#单位有内置的视图容器组件-修复" class="headerlink" title="单位有内置的视图容器组件-修复"></a>单位有内置的视图容器组件-修复</h1><p>小程序官方文档有的uniapp里面都有 组件和标签等等</p><p>rpx 会按照比例进行适配 全屏是750rpx 因为最早的苹果就是750px</p><p>view是行级标签</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107131908351.png" alt="image-20240107131908351" style="zoom: 50%;" /><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;out&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;block&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span>uiapp<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span>web前端开发<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">text</span>&gt;</span>nodejs span<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.out</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.box</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">width</span>: <span class="number">200px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">height</span>: <span class="number">200px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">background</span>: pink;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.block</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">width</span>: <span class="number">750</span>rpx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">height</span>: <span class="number">200</span>rpx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">background</span>: green;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="滑动组件"><a href="#滑动组件" class="headerlink" title="滑动组件"></a>滑动组件</h1><p>滑块的功能  让我们可以往后滑动</p><p>scoll-x 允许横向滚动 scoll-y允许上下滑动</p><p>nowrap可以让内容不换行</p><p>swiper可以制作轮播器</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;out&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;scroll&quot;</span> <span class="attr">scroll-x</span> <span class="attr">scroll-y</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;group&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">111</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">222</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">333</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">444</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">swiper</span> <span class="attr">class</span>=<span class="string">&quot;swiper&quot;</span> <span class="attr">loop</span> <span class="attr">autoplay</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/images/Capture001.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;../../static/logo.png&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;../../static/images/123.webp&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.scroll</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">height</span>: <span class="number">100</span>rpx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">box-sizing</span>: border-box;//内边框</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.group</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">width</span>: <span class="number">750</span>rpx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">white-space</span>: nowrap;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.item</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">width</span>: <span class="number">220</span>rpx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">height</span>: <span class="number">220</span>rpx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">background</span>: royalblue;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">display</span>: inline-block;//行级元素</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="attribute">margin-right</span>: <span class="number">10</span>rpx;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.swiper</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.item</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1 id="媒体image组件属性以及自定义swiper轮播"><a href="#媒体image组件属性以及自定义swiper轮播" class="headerlink" title="媒体image组件属性以及自定义swiper轮播"></a>媒体image组件属性以及自定义swiper轮播</h1><p>image 图像标签</p><p>video 视频 音频标签</p><p>img会有一个默认的宽高，不给image指定的时候页数这个大小</p><p>mode默认属性可以使得图片的宽高完全拉伸填满image元素，也可以让长边或者短边可以完全显示出来。</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240107135709676.png" alt="image-20240107135709676"></p>]]></content>
      
      
      <categories>
          
          <category> IT </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小程序 </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>贝优妮塔1</title>
      <link href="/2024/01/06/%E6%B8%B8%E6%88%8F/%E8%B4%9D%E4%BC%98%E5%A6%AE%E5%A1%941%E6%94%BB%E7%95%A5/"/>
      <url>/2024/01/06/%E6%B8%B8%E6%88%8F/%E8%B4%9D%E4%BC%98%E5%A6%AE%E5%A1%941%E6%94%BB%E7%95%A5/</url>
      
        <content type="html"><![CDATA[<p>贝优妮塔1</p><span id="more"></span><h1 id="剧情"><a href="#剧情" class="headerlink" title="剧情"></a>剧情</h1><h2 id="天使之都"><a href="#天使之都" class="headerlink" title="天使之都"></a>天使之都</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153225132.png" alt="image-20240106153225132"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153314575.png" alt="image-20240106153314575"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153333660.png" alt="image-20240106153333660"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153347708.png" alt="image-20240106153347708"></p><h2 id="幻影之都"><a href="#幻影之都" class="headerlink" title="幻影之都"></a>幻影之都</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153409186.png" alt="image-20240106153409186"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153434656.png" alt="image-20240106153434656"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153449303.png" alt="image-20240106153449303"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153501293.png" alt="image-20240106153501293"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153522680.png" alt="image-20240106153522680"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153602154.png" alt="image-20240106153602154"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153634883.png" alt="image-20240106153634883"></p><h2 id="燃烧的大地"><a href="#燃烧的大地" class="headerlink" title="燃烧的大地"></a>燃烧的大地</h2><p>这个狗一样的怪物攻击速度很快，要尽量用魔女时间打它。</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153653167.png" alt="image-20240106153653167"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153707344.png" alt="image-20240106153707344"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153741250.png" alt="image-20240106153741250"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153754917.png" alt="image-20240106153754917"></p><h2 id="坚韧"><a href="#坚韧" class="headerlink" title="坚韧"></a>坚韧</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153851459.png" alt="image-20240106153851459"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153921212.png" alt="image-20240106153921212"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106153955357.png" alt="image-20240106153955357"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106154012058.png" alt="image-20240106154012058"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106154025062.png" alt="image-20240106154025062"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106154049002.png" alt="image-20240106154049002"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106154100594.png" alt="image-20240106154100594"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106154121361.png" alt="image-20240106154121361"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106154148391.png" alt="image-20240106154148391"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106154203867.png" alt="image-20240106154203867"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106154219668.png" alt="image-20240106154219668"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106154232237.png" alt="image-20240106154232237"></p><h2 id="失落的圣地"><a href="#失落的圣地" class="headerlink" title="失落的圣地"></a>失落的圣地</h2><p>这个女人 一定要装备武士刀和手套和她打，然后尽量近身贴住，找出攻击破绽和闪避，不然伤害太低了。</p><p>这一章以后获得变身黑豹的能力。</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106154254855.png" alt="image-20240106154254855"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106154342838.png" alt="image-20240106154342838"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106154447382.png" alt="image-20240106154447382"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106154511442.png" alt="image-20240106154511442"></p><h1 id="连招"><a href="#连招" class="headerlink" title="连招"></a>连招</h1><p>装备武士刀+火爪</p><p>1.拳+ZR后滚+拳 剑气 </p><p>2.拳拳+脚 按住释放大核弹</p><p>3.拳拳脚拳  发动上挑编织攻击，随后可以皇牌空战</p><p>4.拳拳脚脚脚 第二下是下踏 第三下前踢吹飞 威力控场</p><p>5.拳拳拳脚脚脚 两下扫堂 最后一下为前踢的编制攻击</p><p>6.拳拳脚（按住） 脚（按住）脚（按住） 可以释放三个大爆弹 </p><p>7.拳拳脚（连按）</p><p>百裂脚-A组武器脚上装爪子，B组武器装上火箭筒</p><p>当最后的爪子百裂脚使出瞬间切换到B组的火箭筒 可以一下子打出几十发火箭炮 威力可观</p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 贝优妮塔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>信息化发展</title>
      <link href="/2024/01/06/%E9%AB%98%E9%A1%B9/%E4%BF%A1%E6%81%AF%E5%8C%96%E5%8F%91%E5%B1%95/"/>
      <url>/2024/01/06/%E9%AB%98%E9%A1%B9/%E4%BF%A1%E6%81%AF%E5%8C%96%E5%8F%91%E5%B1%95/</url>
      
        <content type="html"><![CDATA[<p>信息化发展</p><h1 id="信息与信息化"><a href="#信息与信息化" class="headerlink" title="信息与信息化"></a>信息与信息化</h1><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106192043982.png" alt="image-20240106192043982" style="zoom:50%;" /><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106192219668.png" alt="image-20240106192219668"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106192336082.png" alt="image-20240106192336082"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106192814314.png" alt="image-20240106192814314"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106193216717.png" alt="image-20240106193216717"></p><h1 id="现代化基础设施"><a href="#现代化基础设施" class="headerlink" title="现代化基础设施"></a>现代化基础设施</h1><h2 id="新基建"><a href="#新基建" class="headerlink" title="新基建"></a>新基建</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106193441651.png" alt="image-20240106193441651"></p><h2 id="工业互联网"><a href="#工业互联网" class="headerlink" title="工业互联网"></a>工业互联网</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106193640637.png" alt="image-20240106193640637"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106193757963.png" alt="image-20240106193757963"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106194013655.png" alt="image-20240106194013655"></p><h2 id="车联网"><a href="#车联网" class="headerlink" title="车联网"></a>车联网</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106194244226.png" alt="image-20240106194244226"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106194558429.png" alt="image-20240106194558429"></p><h1 id="现代化发展创新"><a href="#现代化发展创新" class="headerlink" title="现代化发展创新"></a>现代化发展创新</h1><h2 id="农业现代化"><a href="#农业现代化" class="headerlink" title="农业现代化"></a>农业现代化</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106194820326.png" alt="image-20240106194820326"></p><h2 id="两化融合"><a href="#两化融合" class="headerlink" title="两化融合"></a>两化融合</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106195117969.png" alt="image-20240106195117969"></p><h2 id="智能制造"><a href="#智能制造" class="headerlink" title="智能制造"></a>智能制造</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106195240145.png" alt="image-20240106195240145"></p><h2 id="消费互联网"><a href="#消费互联网" class="headerlink" title="消费互联网"></a>消费互联网</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106195516939.png" alt="image-20240106195516939"></p><h2 id="数字中国"><a href="#数字中国" class="headerlink" title="数字中国"></a>数字中国</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106195701694.png" alt="image-20240106195701694"></p><h2 id="数字经济"><a href="#数字经济" class="headerlink" title="数字经济"></a>数字经济</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106195754549.png" alt="image-20240106195754549"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106200013166.png" alt="image-20240106200013166"></p><h2 id="智慧城市"><a href="#智慧城市" class="headerlink" title="智慧城市"></a>智慧城市</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106200604892.png" alt="image-20240106200604892"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106200833602.png" alt="image-20240106200833602"></p><h2 id="数字乡村"><a href="#数字乡村" class="headerlink" title="数字乡村"></a>数字乡村</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106201121821.png" alt="image-20240106201121821"></p><h2 id="数字生态"><a href="#数字生态" class="headerlink" title="数字生态"></a>数字生态</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106201309670.png" alt="image-20240106201309670"></p><h2 id="数字化转型"><a href="#数字化转型" class="headerlink" title="数字化转型"></a>数字化转型</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106201556445.png" alt="image-20240106201556445"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106201731705.png" alt="image-20240106201731705"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106201841597.png" alt="image-20240106201841597"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106201957310.png" alt="image-20240106201957310"></p><h2 id="元宇宙"><a href="#元宇宙" class="headerlink" title="元宇宙"></a>元宇宙</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106202147711.png" alt="image-20240106202147711"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240106202407431.png" alt="image-20240106202407431"></p>]]></content>
      
      
      <categories>
          
          <category> 软考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 高项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>整合管理</title>
      <link href="/2024/01/05/%E9%AB%98%E9%A1%B9/%E6%95%B4%E5%90%88%E7%AE%A1%E7%90%86/"/>
      <url>/2024/01/05/%E9%AB%98%E9%A1%B9/%E6%95%B4%E5%90%88%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>整合管理</p><h1 id="管理基础"><a href="#管理基础" class="headerlink" title="管理基础"></a>管理基础</h1><p>项目经理对整个项目承担最终责任</p><p>项目经理承担组织层面和项目层面的责任。</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105200250642.png" alt="image-20240105200250642" style="zoom: 33%;" /><p>范围、成本、进度是三个大的基准。</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105200617068.png" alt="image-20240105200617068" style="zoom:50%;" /><h1 id="指定项目章程"><a href="#指定项目章程" class="headerlink" title="指定项目章程"></a>指定项目章程</h1><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105202248444.png" alt="image-20240105202248444"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105202818057.png" alt="image-20240105202818057"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105203347741.png" alt="image-20240105203347741"></p><h1 id="指定项目管理计划"><a href="#指定项目管理计划" class="headerlink" title="指定项目管理计划"></a>指定项目管理计划</h1><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105204039643.png" alt="image-20240105204039643"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105204542140.png" alt="image-20240105204542140"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105204855875.png" alt="image-20240105204855875"></p><h1 id="指导和管理项目工作"><a href="#指导和管理项目工作" class="headerlink" title="指导和管理项目工作"></a>指导和管理项目工作</h1><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105205139178.png" alt="image-20240105205139178"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105205308959.png" alt="image-20240105205308959"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105205405893.png" alt="image-20240105205405893"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105205826259.png" alt="image-20240105205826259"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105205911132.png" alt="image-20240105205911132"></p><h1 id="管理项目知识"><a href="#管理项目知识" class="headerlink" title="管理项目知识"></a>管理项目知识</h1><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105210218873.png" alt="image-20240105210218873"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105210628159.png" alt="image-20240105210628159"></p><h1 id="监控项目工作"><a href="#监控项目工作" class="headerlink" title="监控项目工作"></a>监控项目工作</h1><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105211112486.png" alt="image-20240105211112486"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105211246929.png" alt="image-20240105211246929"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105211610297.png" alt="image-20240105211610297"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105212016501.png" alt="image-20240105212016501"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105212140539.png" alt="image-20240105212140539"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105212305126.png" alt="image-20240105212305126"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105212333367.png" alt="image-20240105212333367"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105212431472.png" alt="image-20240105212431472"></p><h1 id="结束项目或阶段"><a href="#结束项目或阶段" class="headerlink" title="结束项目或阶段"></a>结束项目或阶段</h1><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105212553428.png" alt="image-20240105212553428"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105212732225.png" alt="image-20240105212732225"></p>]]></content>
      
      
      <categories>
          
          <category> 软考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 高项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CR2024000007法律文书流程变更</title>
      <link href="/2024/01/04/oa%E5%8F%91%E5%B8%83/2023/CR2024000007%E6%B3%95%E5%BE%8B%E6%96%87%E4%B9%A6%E6%B5%81%E7%A8%8B%E5%8F%98%E6%9B%B4/"/>
      <url>/2024/01/04/oa%E5%8F%91%E5%B8%83/2023/CR2024000007%E6%B3%95%E5%BE%8B%E6%96%87%E4%B9%A6%E6%B5%81%E7%A8%8B%E5%8F%98%E6%9B%B4/</url>
      
        <content type="html"><![CDATA[<p>CR2024000007法律文书流程变更</p><h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240104154833523.png" alt="image-20240104154833523" style="zoom: 33%;" /><p>发函主体为海正杭州的，选择法务赵龙娇并由其对应ASL进行审批<br>发函主体为海正药业或海正南通的还是走原来的变更配置</p><p>目前不需要区分板块了，流程可能也需要调整</p><h1 id="实施步骤"><a href="#实施步骤" class="headerlink" title="实施步骤"></a>实施步骤</h1><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240105144202444.png" alt="image-20240105144202444"></p><p>节点后附加操作 ，新增字段fhztgsdm </p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108100326304.png" alt="image-20240108100326304"></p><p>更新公司代码格式</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108100355934.png" alt="image-20240108100355934"></p><p>修改配置并且调整优先级</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240108100453376.png" alt="image-20240108100453376"></p><p>配置组负责人</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240109133002731.png" alt="image-20240109133002731"></p><p>修改读取审批人的sql</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240109133121448.png" alt="image-20240109133121448"></p>]]></content>
      
      
      <categories>
          
          <category> 发布 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA发布 </tag>
            
            <tag> 其他发布 </tag>
            
            <tag> 法务支持流程-法律文书流程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CR2022000554省公司人力请假功能需求</title>
      <link href="/2024/01/02/oa%E5%8F%91%E5%B8%83/2023/%E7%9C%81%E5%85%AC%E5%8F%B8%E8%AF%B7%E5%81%87%E6%B5%81%E7%A8%8B%E5%8F%91%E5%B8%83%E6%89%8B%E5%86%8C/"/>
      <url>/2024/01/02/oa%E5%8F%91%E5%B8%83/2023/%E7%9C%81%E5%85%AC%E5%8F%B8%E8%AF%B7%E5%81%87%E6%B5%81%E7%A8%8B%E5%8F%91%E5%B8%83%E6%89%8B%E5%86%8C/</url>
      
        <content type="html"><![CDATA[<p><strong>省公司请假流程发布手册</strong></p><h2 id="建模"><a href="#建模" class="headerlink" title="建模"></a>建模</h2><p>2.执行sql语句</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">CREATE OR REPLACE VIEW DEPARTMENT_LEAVE_SUMMARY AS  </span><br><span class="line">SELECT   </span><br><span class="line">    a.department,  </span><br><span class="line">    TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;YYYY&#x27;) AS year,  </span><br><span class="line">    TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;YYYY&#x27;)||&#x27;-&#x27;||TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;MM&#x27;) AS month, </span><br><span class="line">    a.department ||  TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;YYYY&#x27;) ||  TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;MM&#x27;) as id,</span><br><span class="line">    TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;YYYY&#x27;)||&#x27;-&#x27;||TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;MM&#x27;)||&#x27;-01&#x27; AS day, </span><br><span class="line">    SUM(CASE WHEN a.qjlx = -6 THEN days ELSE 0 END) AS annual_leave_days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 27 THEN days ELSE 0 END) AS sick_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 34 THEN days ELSE 0 END) AS nursing_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 30 THEN days ELSE 0 END) AS home_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 32 THEN days ELSE 0 END) AS wedding_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 26 THEN days ELSE 0 END) AS personal_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 35 THEN days ELSE 0 END) AS bereavement_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 37 THEN days ELSE 0 END) AS vacation_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 39 THEN days ELSE 0 END) AS maternity_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 42 THEN days ELSE 0 END) AS nursing_Personal_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 43 THEN days ELSE 0 END) AS prenatal_Checkup_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 40 THEN days ELSE 0 END) AS work_Injury_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 46 THEN days ELSE 0 END) AS only_Child_Parental_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 41 THEN days ELSE 0 END) AS pregnancy_Personal_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 44 THEN days ELSE 0 END) AS family_Planning_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 45 THEN days ELSE 0 END) AS parental_Leave_Days  </span><br><span class="line">FROM FORMTABLE_MAIN_82 a  </span><br><span class="line">LEFT JOIN workflow_requestbase b ON a.requestid = b.requestid  </span><br><span class="line">WHERE b.currentnodetype = 3  and a.department is not null and a.bukrs = &#x27;2050&#x27;</span><br><span class="line">GROUP BY a.department, TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;YYYY&#x27;), TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;MM&#x27;);</span><br><span class="line"></span><br><span class="line">CREATE OR REPLACE VIEW APPLICANT_LEAVE_SUMMARY AS  </span><br><span class="line">SELECT   </span><br><span class="line">    a.applicant,</span><br><span class="line">    TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;YYYY&#x27;) AS year,  </span><br><span class="line">    TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;YYYY&#x27;)||&#x27;-&#x27;||TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;MM&#x27;) AS month, </span><br><span class="line">    a.applicant ||  TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;YYYY&#x27;) ||  TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;MM&#x27;) as id,</span><br><span class="line">    TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;YYYY&#x27;)||&#x27;-&#x27;||TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;MM&#x27;)||&#x27;-01&#x27; AS day, </span><br><span class="line">    SUM(CASE WHEN a.qjlx = -6 THEN days ELSE 0 END) AS annual_leave_days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 27 THEN days ELSE 0 END) AS sick_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 34 THEN days ELSE 0 END) AS nursing_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 30 THEN days ELSE 0 END) AS home_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 32 THEN days ELSE 0 END) AS wedding_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 26 THEN days ELSE 0 END) AS personal_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 35 THEN days ELSE 0 END) AS bereavement_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 37 THEN days ELSE 0 END) AS vacation_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 39 THEN days ELSE 0 END) AS maternity_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 42 THEN days ELSE 0 END) AS nursing_Personal_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 43 THEN days ELSE 0 END) AS prenatal_Checkup_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 40 THEN days ELSE 0 END) AS work_Injury_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 46 THEN days ELSE 0 END) AS only_Child_Parental_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 41 THEN days ELSE 0 END) AS pregnancy_Personal_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 44 THEN days ELSE 0 END) AS family_Planning_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 45 THEN days ELSE 0 END) AS parental_Leave_Days  </span><br><span class="line">FROM FORMTABLE_MAIN_82 a  </span><br><span class="line">LEFT JOIN workflow_requestbase b ON a.requestid = b.requestid  </span><br><span class="line">WHERE b.currentnodetype = 3  and a.applicant  is not null and a.bukrs = &#x27;2050&#x27;</span><br><span class="line">GROUP BY a.applicant, TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;YYYY&#x27;), TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;MM&#x27;);</span><br><span class="line"></span><br><span class="line">DROP VIEW APPLICANT_LEAVE_SUMMARY;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW APPLICANT_LEAVE_SUMMARY;</span><br><span class="line">CREATE OR REPLACE VIEW APPLICANT_LEAVE_SUMMARY AS  </span><br><span class="line">SELECT   </span><br><span class="line">    a.applicant,</span><br><span class="line">    TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;YYYY&#x27;) AS year,  </span><br><span class="line">    TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;YYYY&#x27;)||&#x27;-&#x27;||TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;MM&#x27;) AS month, </span><br><span class="line">    a.applicant ||  TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;YYYY&#x27;) ||  TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;MM&#x27;) as id,</span><br><span class="line">    TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;YYYY&#x27;)||&#x27;-&#x27;||TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;MM&#x27;)||&#x27;-01&#x27; AS day, </span><br><span class="line">    SUM(CASE WHEN a.qjlx = -6 THEN daysnew ELSE 0 END) AS annual_leave_days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 27 THEN daysnew ELSE 0 END) AS sick_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 34 THEN daysnew ELSE 0 END) AS nursing_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 30 THEN daysnew ELSE 0 END) AS home_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 32 THEN daysnew ELSE 0 END) AS wedding_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 26 THEN daysnew ELSE 0 END) AS personal_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 35 THEN daysnew ELSE 0 END) AS bereavement_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 37 THEN daysnew ELSE 0 END) AS vacation_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 39 THEN daysnew ELSE 0 END) AS maternity_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 42 THEN daysnew ELSE 0 END) AS nursing_Personal_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 43 THEN daysnew ELSE 0 END) AS prenatal_Checkup_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 40 THEN daysnew ELSE 0 END) AS work_Injury_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 46 THEN daysnew ELSE 0 END) AS only_Child_Parental_Leave_Days,  </span><br><span class="line">    SUM(CASE WHEN a.qjlx = 44 THEN daysnew ELSE 0 END) AS family_Planning_Leave_Days,</span><br><span class="line">    SUM(CASE WHEN a.qjlx = 45 THEN daysnew ELSE 0 END) AS yuer_Leave_Days,</span><br><span class="line">    SUM(CASE WHEN a.qjlx = 47 THEN daysnew ELSE 0 END) AS traveling_Days</span><br><span class="line">FROM FORMTABLE_MAIN_82 a  </span><br><span class="line">LEFT JOIN workflow_requestbase b ON a.requestid = b.requestid  </span><br><span class="line">WHERE b.currentnodetype = 3  and a.applicant  is not null and a.bukrs = &#x27;2050&#x27;</span><br><span class="line">GROUP BY a.applicant, TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;YYYY&#x27;), TO_CHAR(TO_DATE(a.KSRQ, &#x27;YYYY-MM-DD&#x27;), &#x27;MM&#x27;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>4.新增《考勤系统》菜单 </p><p>3.导入建模 省公司年假数据(不要重新生成表)，人员数据模块，请假周期主表维护，请假周期明细表维护</p><p>5.新增《请假周期》菜单 生成主表和明细表等报表</p><h2 id="流程"><a href="#流程" class="headerlink" title="流程"></a>流程</h2><p>1.导入流程 省公司请假流程 不要生成新表单;更新了字段</p><p>6.导入请假流程和请假周期ecode代码 配置id</p><p>7.注意自定义页面 HrmCustomLeave_e9_qj_provice 要上传配置，修改jsp里面的nodeid，<strong>需要配置应用中心里面的考勤流程配置</strong></p><p><strong>8.修改自定义节点createnodeid</strong>**</p><h2 id="后端代码"><a href="#后端代码" class="headerlink" title="后端代码"></a>后端代码</h2><p>9.提交后端发布代码</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/usr/weaver/ecology/classbean/com/engine/hisun/kq/cmd -&gt;</span><br><span class="line">com.engine.hisun.kq.cmd.KqGetTxyeCmd</span><br><span class="line">com.engine.hisun.kq.cmd.KqGetVacationInfoCmd</span><br><span class="line">com.engine.hisun.kq.cmd.KqCheckZqExitCmd</span><br><span class="line">com.engine.hisun.kq.cmd.KqLeavePeriodCmd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/usr/weaver/ecology/classbean/com/engine/hisun/kq/service/impl -&gt;</span><br><span class="line">com.engine.hisun.kq.service.impl.KqServiceImpl</span><br><span class="line"></span><br><span class="line">/usr/weaver/ecology/classbean/com/engine/hisun/kq/service -&gt;</span><br><span class="line">com.engine.hisun.kq.service.KqService</span><br><span class="line"></span><br><span class="line">/usr/weaver/ecology/classbean/com/engine/hisun/kq/web -&gt;</span><br><span class="line">com.engine.hisun.kq.web.KqAction</span><br><span class="line"></span><br><span class="line">/usr/weaver/ecology/classbean/hisun/action -&gt;</span><br><span class="line">hisun.action.HrXjCreate</span><br><span class="line">hisun.action.KqPeriod_Update</span><br><span class="line"></span><br><span class="line">/usr/weaver/ecology/classbean/hisun/mode -&gt;</span><br><span class="line">hisun.mode.ProvinceKqPeriodExpand</span><br><span class="line"></span><br><span class="line">/usr/weaver/ecology/classbean/hisun/util -&gt;</span><br><span class="line">hisun.util.ProvinceKqUtils</span><br></pre></td></tr></table></figure><p>11.配置数据</p><p>&#x2F;usr&#x2F;weaver&#x2F;ecology&#x2F;WEB-INF&#x2F;prop下配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#请假周期明细表id</span><br><span class="line">uf_qjzqwh_module_id=101501</span><br></pre></td></tr></table></figure><h2 id="集成中心"><a href="#集成中心" class="headerlink" title="集成中心"></a>集成中心</h2><p>9.修改考勤流程设置</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231215111754853.png" alt="image-20231215111754853"></p><ol start="10"><li></li></ol><p>配置假期 類型，不要启动假期余额</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231215141553201.png" alt="image-20231215141553201"></p>]]></content>
      
      
      <categories>
          
          <category> 发布 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA发布 </tag>
            
            <tag> 未完成 </tag>
            
            <tag> 人力发布 </tag>
            
            <tag> 省公司请假流程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>孙子兵法</title>
      <link href="/2024/01/01/%E8%AF%BB%E4%B9%A6/%E5%AD%99%E5%AD%90%E5%85%B5%E6%B3%95/"/>
      <url>/2024/01/01/%E8%AF%BB%E4%B9%A6/%E5%AD%99%E5%AD%90%E5%85%B5%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>36个兵学规则</p><p>国家战略、军事战略、治军理念、战斗战术 四个军事范畴为坐标</p><p>政治战略、经济战略、国防战略、情报战略、经常战略、权变战略、领导战略、军队管理、战术原则、战斗方法 为策略地图</p><h1 id="始计"><a href="#始计" class="headerlink" title="始计"></a>始计</h1><p>1.战争动员前要进行充足的调研和准备，观察道天地将法。</p><ul><li>道：思想和民众保持一致</li><li>天：气候的阴晴、寒暑、四季节令的更替</li><li>地：地势的远近、险峻、平易、战场的广狭窄</li></ul><p>2.通过政治清明、将帅才能、天时地利、法令贯彻、武器精良、士兵训练、赏罚公正来观察胜负。</p><p>3.虽有智慧、不如乘势。势者，因利而制权也。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">击敌半渡，无势可用，造势。</span><br></pre></td></tr></table></figure><p>4.兵者，诡道也。攻其无备，出其不意。</p><ul><li>利用敌人的弱点打击敌人。</li></ul><p>5.多算胜，少算不胜。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">庙算，古代在战争动员前会分析胜利的条件哪边更多。郭嘉的十胜十负论。</span><br></pre></td></tr></table></figure><h1 id="作战"><a href="#作战" class="headerlink" title="作战"></a>作战</h1><p>兵马未动，粮草先行。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">战争消耗的是粮。</span><br></pre></td></tr></table></figure><p>冲锋陷阵，激励士气。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">要用攻取得到的物质奖励士兵。</span><br></pre></td></tr></table></figure><p>胜敌而我益强。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">借助他人的力量壮大自己。</span><br></pre></td></tr></table></figure><p>兵贵胜，不贵久。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">难得的是时间，易失的是机会。</span><br></pre></td></tr></table></figure><h1 id="谋攻篇"><a href="#谋攻篇" class="headerlink" title="谋攻篇"></a>谋攻篇</h1><p>不战而屈人之兵。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">最高明是不通过战斗手段就是降服。</span><br></pre></td></tr></table></figure><p>上兵伐谋，以交代兵。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">伐谋为上，不行的话伐交是次要手段。</span><br></pre></td></tr></table></figure><p>将能而君不御者胜。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">学会信任。</span><br></pre></td></tr></table></figure><p>既惑且疑，诸侯乃至。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">千军易得，一讲</span><br></pre></td></tr></table></figure><p>小敌之坚，大敌之擒</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不要硬碰硬，迂回作战。</span><br></pre></td></tr></table></figure><p>知己知彼，百战不殆。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">了解敌人</span><br></pre></td></tr></table></figure><h1 id="军形篇"><a href="#军形篇" class="headerlink" title="军形篇"></a>军形篇</h1><p>先为不胜，待敌可胜。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">寻找间隙打击。</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 读书 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 策略 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CR2023000489采购需求调整</title>
      <link href="/2024/01/01/oa%E5%8F%91%E5%B8%83/2023/%E9%87%87%E8%B4%AD%E9%9C%80%E6%B1%82%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83%E6%93%8D%E4%BD%9C(2)deda45eca2b93e378898d4fce0c94a52afbdf6a41530141b/"/>
      <url>/2024/01/01/oa%E5%8F%91%E5%B8%83/2023/%E9%87%87%E8%B4%AD%E9%9C%80%E6%B1%82%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83%E6%93%8D%E4%BD%9C(2)deda45eca2b93e378898d4fce0c94a52afbdf6a41530141b/</url>
      
        <content type="html"><![CDATA[<h1 id="建模操作"><a href="#建模操作" class="headerlink" title="建模操作"></a>建模操作</h1><p>1.采购需求操作表uf_ptpdemandlog添加 完结原因、是否是新流程、是否需要采购审核重新审批（主表明细表都需要）</p><p>2.采购需求表uf_ptpdemand添加 完结原因、是否是新流程、是否需要采购审核重新审批（主表明细表都需要） </p><p>3.导入设备类别大全模块</p><p>4.配置SYNCDATA.SYNC_DEVICECARD </p><p>4.自定义树形单选框</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231208093406186.png" alt="image-20231208093406186" style="zoom:50%;" /><p>5.导入设备信息大全模块</p><p>6.新增完结原因</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231208162111721.png" alt="image-20231208162111721" style="zoom:50%;" /><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231208162429747.png" alt="image-20231208162429747" style="zoom:50%;" /><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231208162556256.png" alt="image-20231208162556256"></p><p>采购需求模块增加一个完结操作按钮 增加目标调用链接</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231208163125617.png" alt="image-20231208163125617"></p><p>采购需求代办查询增加完结操作按钮</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231208162747665.png" alt="image-20231208162747665"></p><p>采购代办查询加一个跳转的js</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231208163235398.png" alt="image-20231208163235398"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231208163600859.png" alt="image-20231208163600859"></p><p>添加采购需求操作类型  添加设备添置单明细表3操作类型  设备维修单明细表3操作类型 采购需求明细表2操作类型 </p><p>加一个完结</p><p>采购需求状态里面增加一个已完结</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231208164448661.png" alt="image-20231208164448661"></p><p>采购需求操作模块需要增加自定义接口动作 是否是新流程 是否需要采购申请采购审核</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231208165344653.png" alt="image-20231208165344653"></p><p>采购需求转采购需求操作要添加映射</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231219152358099.png" alt="image-20231219152358099"></p><p>采购需求操作表单加一个字段 sfxycgsqcgsh 是否需要采购申请采购审核</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231219153506178.png" alt="image-20231219153506178"></p><p>明细表也要加上</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231219154039880.png" alt="image-20231219154039880"></p><h1 id="流程操作"><a href="#流程操作" class="headerlink" title="流程操作"></a>流程操作</h1><ol><li><p>导入流程和ecode代码</p></li><li><p>修改ecode代码的nodeid为开始节点的nodeid</p><p>2.1 需求来源的选择框要重新选</p></li><li><p>提交节点后附附加操作接口：</p></li></ol><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231207145426059.png" alt="image-20231207145426059"  /><p><strong>这里DML操作需要更改表名为系统生成的采购需求流程的表名</strong></p><p> 4.ASL节点附加操作接口</p><p> 5.归档节点前附加操作接口</p><p> 6.归档节点后附加操作接口</p><p> 7.配置流程转数据 <strong>需要配置触发条件</strong></p><p>8.外部接口需要修改表名为当前采购需求流程表名（设备添置单 装备总监外部接口自定义sql需要修改）</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231208091500078.png" alt="image-20231208091500078" style="zoom: 67%;" /><p>9.修改设备类别为当前树</p><p>10.需要配置ecode的设备类别fieldid</p><p>11.采购申请流程加一个字段 是否需要采购申请财务审核</p><p>11.<img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231219135414521.png" alt="image-20231219135414521"></p><p>12.配置采购申请流程（流程 条件 审批人）</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17042404158711.png" alt="img" style="zoom:50%;" /><p>节点类型要改成分叉中间点</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231219155035124.png" alt="image-20231219155035124"></p><ol start="12"><li></li></ol><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231219150847119.png" alt="image-20231219150847119"></p><p>采购需求操作这里模块要加上是否是新流程</p><p>采购申请申请节点加一个是否需要采购申请财务审核， 是从采购需求带过来的</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231219155603682.png" alt="image-20231219155603682"></p><h1 id="后端代码"><a href="#后端代码" class="headerlink" title="后端代码"></a>后端代码</h1><h2 id="发布代码"><a href="#发布代码" class="headerlink" title="发布代码"></a>发布代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/usr/weaver/ecology/classbean/hisun/action -&gt;</span><br><span class="line">hisun.action.NewPurchaseDemand_create</span><br><span class="line"></span><br><span class="line">/usr/weaver/ecology/classbean/hisun/mode -&gt; </span><br><span class="line">hisun.mode.SaveDemandNew</span><br><span class="line">hisun.mode.SubmitDemand</span><br><span class="line">hisun.mode.SubmitDemandNew</span><br><span class="line"></span><br><span class="line">/usr/weaver/ecology/classbean/hisun/operatoraction -&gt;</span><br><span class="line">hisun.operatoraction.GetAsListForPurchase</span><br><span class="line">hisun.operatoraction.GetPurchaseFZR</span><br><span class="line">hisun.operatoraction.NewGetFunDeptFna</span><br><span class="line">hisun.operatoraction.NewGetFunDeptFnaOpr</span><br><span class="line">hisun.operatoraction.NewGetFunforSBTZ</span><br><span class="line">hisun.operatoraction.NewGetPurchaseFZR</span><br><span class="line"></span><br><span class="line">/usr/weaver/ecology/classbean/hisun/cron -&gt;</span><br><span class="line">hisun.cron.DeviceSyncCronJob</span><br><span class="line"></span><br><span class="line">/usr/weaver/ecology/classbean/com/engine/hisun/device -&gt;</span><br><span class="line">上传整个device文件夹</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/usr/weaver/ecology/classbean/com/api/hisun/web -&gt;</span><br><span class="line">com.api.hisun.web.DeviceApi</span><br></pre></td></tr></table></figure><h2 id="配置动态数据"><a href="#配置动态数据" class="headerlink" title="配置动态数据"></a>配置动态数据</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/usr/weaver/ecology/WEB-INF/prop </span><br><span class="line">uf_cgxqlc=uf_cgxqlc</span><br><span class="line">uf_device_type_all_code=94001</span><br></pre></td></tr></table></figure><p><strong>需要生产实际的数据</strong></p><p>执行定时任务hisun.cron.DeviceSyncCronJob</p><h1 id="转单时间、归档时间、单据编号"><a href="#转单时间、归档时间、单据编号" class="headerlink" title="转单时间、归档时间、单据编号"></a>转单时间、归档时间、单据编号</h1><p>1.归档时间、单据编号加上去</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231220101624194.png" alt="image-20231220101624194"></p><p>2.增加单据编号更新，要放在归档前面更新单据编号</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231220103354859.png" alt="image-20231220103354859"></p><p>3.归档模板增加这两个字段</p><p>4.转数据的时候加字段映射 和字段赋值表达式赋值归档时间</p><ol start="5"><li></li></ol><h1 id="测试验证点"><a href="#测试验证点" class="headerlink" title="测试验证点"></a>测试验证点</h1><p>设备添置单</p><p>1.项目负责人是否正确经过，需要设备添置单选择配置项目负责人的项目</p><p>2.工程装备部总监是否正确经过</p><p>3.测试采购审核节点是否正常经过</p><p>4.是否正常生成代办需求</p><p>5.测试完结按钮是否可用（测试中）</p>]]></content>
      
      
      <categories>
          
          <category> 发布 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA发布 </tag>
            
            <tag> 未完成 </tag>
            
            <tag> 供应链发布 </tag>
            
            <tag> 采购需求三合一流程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十大管理</title>
      <link href="/2023/12/31/%E9%AB%98%E9%A1%B9/%E5%8D%81%E5%A4%A7%E7%AE%A1%E7%90%86/"/>
      <url>/2023/12/31/%E9%AB%98%E9%A1%B9/%E5%8D%81%E5%A4%A7%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="十大管理"><a href="#十大管理" class="headerlink" title="十大管理"></a>十大管理</h1><h2 id="五大过程组"><a href="#五大过程组" class="headerlink" title="五大过程组"></a>五大过程组</h2><h3 id="1-启动"><a href="#1-启动" class="headerlink" title="1.启动"></a>1.启动</h3><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231160618192.png" alt="image-20231231160618192"></p><h3 id="2-规划"><a href="#2-规划" class="headerlink" title="2.规划"></a>2.规划</h3><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231160642669.png" alt="image-20231231160642669"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231160937888.png" alt="image-20231231160937888"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231161238464.png" alt="image-20231231161238464"></p><h3 id="3-执行"><a href="#3-执行" class="headerlink" title="3.执行"></a>3.执行</h3><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231161927361.png" alt="image-20231231161927361"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231162204994.png" alt="image-20231231162204994"></p><h3 id="监控"><a href="#监控" class="headerlink" title="监控"></a>监控</h3><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231162410080.png" alt="image-20231231162410080"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231162751747.png" alt="image-20231231162751747"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231162857867.png" alt="image-20231231162857867"></p><h3 id="收尾"><a href="#收尾" class="headerlink" title="收尾"></a>收尾</h3><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231163109436.png" alt="image-20231231163109436"></p><h2 id="十大管理-1"><a href="#十大管理-1" class="headerlink" title="十大管理"></a>十大管理</h2><p>整合、范围、进度、成本、质量、资源、沟通、风险、采购、干系人</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231160154319.png" alt="image-20231231160154319"></p><h2 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231164024049.png" alt="image-20231231164024049"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231164327834.png" alt="image-20231231164327834"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231164743833.png" alt="image-20231231164743833"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231164948412.png" alt="image-20231231164948412"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231165035947.png" alt="image-20231231165035947"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231165137424.png" alt="image-20231231165137424"></p><h2 id="工具技术"><a href="#工具技术" class="headerlink" title="工具技术"></a>工具技术</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231165611492.png" alt="image-20231231165611492"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231170122551.png" alt="image-20231231170122551"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231170250869.png" alt="image-20231231170250869"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231170907025.png" alt="image-20231231170907025"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231171012664.png" alt="image-20231231171012664"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231171739692.png" alt="image-20231231171739692"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231171822087.png" alt="image-20231231171822087"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231172039913.png" alt="image-20231231172039913"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231172212735.png" alt="image-20231231172212735"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231172352056.png" alt="image-20231231172352056"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231172447177.png" alt="image-20231231172447177"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231172536853.png" alt="image-20231231172536853"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231172600805.png" alt="image-20231231172600805"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231172720494.png" alt="image-20231231172720494"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231172907694.png" alt="image-20231231172907694"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231172921634.png" alt="image-20231231172921634"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231173131707.png" alt="image-20231231173131707"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231173239509.png" alt="image-20231231173239509"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231173407316.png" alt="image-20231231173407316"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231173536865.png" alt="image-20231231173536865"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231173608173.png" alt="image-20231231173608173"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231173720200.png" alt="image-20231231173720200"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231173816928.png" alt="image-20231231173816928"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231173917033.png" alt="image-20231231173917033"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231174028399.png" alt="image-20231231174028399"></p>]]></content>
      
      
      <categories>
          
          <category> 软考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 高项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>成本管理</title>
      <link href="/2023/12/31/%E9%AB%98%E9%A1%B9/%E7%AB%8B%E9%A1%B9%E7%AE%A1%E7%90%86/"/>
      <url>/2023/12/31/%E9%AB%98%E9%A1%B9/%E7%AB%8B%E9%A1%B9%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="立项管理"><a href="#立项管理" class="headerlink" title="立项管理"></a>立项管理</h1><h2 id="立项流程"><a href="#立项流程" class="headerlink" title="立项流程"></a>立项流程</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231152637487.png" alt="image-20231231152637487"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231153306331.png" alt="image-20231231153306331"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231154047722.png" alt="image-20231231154047722"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231154112625.png" alt="image-20231231154112625"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231154312455.png" alt="image-20231231154312455"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231231154659781.png" alt="image-20231231154659781"></p>]]></content>
      
      
      <categories>
          
          <category> 软考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 高项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>云服务器部署指令</title>
      <link href="/2023/12/31/it/%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2023/12/31/it/%E9%98%BF%E9%87%8C%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<a href="https://chenbaitao120.gitee.io/2023/12/31/it/阿里云服务器的使用/" onclick="window.location.replace(this.href); return false;">  <img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231230220847087.png" alt="image-20231230220847087" style="zoom: 100%;"  /><span id="more"></span><h1 id="阿里云服务器的使用"><a href="#阿里云服务器的使用" class="headerlink" title="阿里云服务器的使用"></a>阿里云服务器的使用</h1><h2 id="什么是云服务器"><a href="#什么是云服务器" class="headerlink" title="什么是云服务器"></a>什么是云服务器</h2><p>可弹性伸缩的计算服务，管理方式比物理服务器更加简单高效。</p><p>拓展方式:</p><ul><li>垂直拓展:可以在几分钟之内升级CPU和内存，实时升级宽带</li><li>水平拓展:可以在几分钟之内，创建几百个新的实例，完成任务后，可以立刻销毁这些实例.</li></ul><p>ECS一般提供自动宕机迁移，数据备份和回滚，系统性能分析报警的功能，稳定性更高。</p><p><a href="https://home.console.aliyun.com/home/dashboard/ProductAndService">https://home.console.aliyun.com/home/dashboard/ProductAndService</a></p><p>测试部署用便宜一点的就可以</p><p>镜像选centos 7.6 最常见的版本</p><p>硬盘空间默认40GB 性能高效云盘＞ESSD云盘＞SSD云盘</p><p>服务器密码是用于等于操作系统的，需要记一下</p><h2 id="远程连接"><a href="#远程连接" class="headerlink" title="远程连接"></a>远程连接</h2><p>1.打开安全组</p><p>要保证开启22端口；入方向是外部连接服务器，出方向是访问别人</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231230194257763.png" alt="image-20231230194257763"></p><p>2.使用XHELL连接你的公网ip登录选择你购买的服务器的账号密码</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231230194710879.png" alt="image-20231230194710879"></p><h2 id="安装MSQL"><a href="#安装MSQL" class="headerlink" title="安装MSQL"></a>安装MSQL</h2><p>1.进来创建一个文件夹server用来放环境软件</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231230195614300.png" alt="image-20231230195614300" style="zoom: 80%;" /><p>2.打开xftp，把本地的安装包都放上去</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231230195822794.png" alt="image-20231230195822794" style="zoom:50%;" /><p>3.卸载Centos7自带mariadb，要卸载你查找出来的版本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查找</span></span><br><span class="line">rpm -qa|grep mariadb</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">mariadb-libs-5.5.52-1.el7.x86_64</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">卸载</span></span><br><span class="line">rpm -e mariadb-libs-5.5.52-1.el7.x86_64 --nodeps -C mysql</span><br></pre></td></tr></table></figure><p>4.解压mysql</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建mysql安装包存放点</span></span><br><span class="line">mkdir /usr/server/mysql</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">解压到对应的mysql目录里面去</span></span><br><span class="line">tar xvf mysql-5.7.34-1.el7.x86_64.rpm-bundle.tar -C mysql</span><br></pre></td></tr></table></figure><p>5.执行安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">切换到安装目录</span></span><br><span class="line">cd /usr/server/mysql/</span><br><span class="line">yum -y install libaio</span><br><span class="line">yum -y install libncurses*</span><br><span class="line">yum -y install perl perl-devel</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">安装</span></span><br><span class="line">rpm -ivh mysql-community-common-5.7.34-1.el7.x86_64.rpm </span><br><span class="line">rpm -ivh mysql-community-libs-5.7.34-1.el7.x86_64.rpm </span><br><span class="line">rpm -ivh mysql-community-client-5.7.34-1.el7.x86_64.rpm </span><br><span class="line">rpm -ivh mysql-community-server-5.7.34-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure><p>6.启动Mysql</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动mysql</span></span><br><span class="line">systemctl start mysqld.service</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看生成的临时root密码</span></span><br><span class="line">cat  /var/log/mysqld.log | grep password</span><br></pre></td></tr></table></figure><p>7.初始的随机密码</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">登录mysql</span></span><br><span class="line">mysql -u root -p</span><br><span class="line">Enter password:     #输入在日志中生成的临时密码</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">更新root密码  设置为root</span></span><br><span class="line">set global validate_password_policy=0;</span><br><span class="line">set global validate_password_length=1;</span><br><span class="line">set password=password(&#x27;root&#x27;);</span><br></pre></td></tr></table></figure><p>8.授予远程连接权限</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges on *.* to &#x27;root&#x27; @&#x27;%&#x27; identified by &#x27;root&#x27;;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">刷新</span></span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>9.控制命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">mysql的启动和关闭 状态查看</span></span><br><span class="line">systemctl stop mysqld</span><br><span class="line">systemctl status mysqld</span><br><span class="line">systemctl start mysqld</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">建议设置为开机自启动服务</span></span><br><span class="line">systemctl enable  mysqld</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看是否已经设置自启动成功</span></span><br><span class="line">systemctl list-unit-files | grep mysqld</span><br></pre></td></tr></table></figure><p>10.关闭防火墙</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --state #查看防火墙状态</span><br><span class="line">systemctl stop firewalld.service  #停止firewall</span><br><span class="line">systemctl disable firewalld.service  #禁止firewall开机启动</span><br></pre></td></tr></table></figure><h2 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install epel-release</span><br><span class="line">yum update</span><br><span class="line">yum -y install nginx</span><br></pre></td></tr></table></figure><p>nginx命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx #开启nginx服务</span><br><span class="line">systemctl stop nginx #停止nginx服务</span><br><span class="line">systemctl restart nginx #重启nginx服务</span><br></pre></td></tr></table></figure><h2 id="配置JDK"><a href="#配置JDK" class="headerlink" title="配置JDK"></a>配置JDK</h2><p>解压</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zvxf jdk-8u131-linux-x64.tar.gz</span><br></pre></td></tr></table></figure><p>编辑 &#x2F;etc&#x2F;profile 文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/profile</span><br><span class="line"># 文件末尾增加</span><br><span class="line">export JAVA_HOME=/usr/server/jdk1.8.0_131</span><br><span class="line">export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH</span><br></pre></td></tr></table></figure><p>执行source命令，使配置立即生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><p>检查是否安装成功</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure><h2 id="项目部署"><a href="#项目部署" class="headerlink" title="项目部署"></a>项目部署</h2><h4 id="打包Vue项目"><a href="#打包Vue项目" class="headerlink" title="打包Vue项目"></a>打包Vue项目</h4><p>进入到Vue项目目录，执行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure><p>将生成的dist目录上传至服务器 &#x2F;usr&#x2F;vue&#x2F;dist</p><h4 id="配置nginx"><a href="#配置nginx" class="headerlink" title="配置nginx"></a>配置nginx</h4><p>进入到&#x2F;etc&#x2F;nginx&#x2F;conf.d目录，创建vue.conf文件，内容如下</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server</span> <span class="string">&#123;</span></span><br><span class="line">    <span class="attr">listen</span>       <span class="string">80;</span></span><br><span class="line">    <span class="attr">server_name</span>  <span class="string">locahost;</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">location</span> <span class="string">/ &#123;</span></span><br><span class="line">        <span class="attr">root</span> <span class="string">/usr/app/dist;</span></span><br><span class="line">        <span class="attr">index</span> <span class="string">index.html;</span></span><br><span class="line">    <span class="attr">&#125;</span></span><br><span class="line"><span class="attr">&#125;</span></span><br></pre></td></tr></table></figure><p>使配置生效</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure><h3 id="2-2-打包Java程序"><a href="#2-2-打包Java程序" class="headerlink" title="2.2 打包Java程序"></a>2.2 打包Java程序</h3><p>双击package，会自动打包在项目路径文件夹的&#x2F;target文件夹下</p><p>因为springboot有内置tomcat容器，这点比较方便，省去了tomcat的部署。我们到时候直接可以直接把jar包扔到linux上。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar shop-0.0.1-SNAPSHOT.jar &gt; logName.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar JavaWork-0.0.1-SNAPSHOT.jar &gt; logName.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><p>JavaWork-0.0.1-SNAPSHOT.jar</p><h2 id="重启服务"><a href="#重启服务" class="headerlink" title="重启服务"></a>重启服务</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">netstat -ntlp</span><br><span class="line">kill 端口</span><br></pre></td></tr></table></figure><p>个人放在阿里云上面的springBoot服务</p><p><a href="http://59.110.225.105:8081/year">http://59.110.225.105:8081/year</a></p>]]></content>
      
      
      <categories>
          
          <category> IT </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 运维 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CR2023000801合同管理系统增加销售类型“外销-直销”</title>
      <link href="/2023/12/30/oa%E5%8F%91%E5%B8%83/2023/CR2023000801OA%E5%90%88%E5%90%8C%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E5%A2%9E%E5%8A%A0%E9%94%80%E5%94%AE%E7%B1%BB%E5%9E%8B%E2%80%9C%E5%A4%96%E9%94%80-%E7%9B%B4%E9%94%80%E2%80%9D/"/>
      <url>/2023/12/30/oa%E5%8F%91%E5%B8%83/2023/CR2023000801OA%E5%90%88%E5%90%8C%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E5%A2%9E%E5%8A%A0%E9%94%80%E5%94%AE%E7%B1%BB%E5%9E%8B%E2%80%9C%E5%A4%96%E9%94%80-%E7%9B%B4%E9%94%80%E2%80%9D/</url>
      
        <content type="html"><![CDATA[<p><strong>CR2023000801OA</strong>合同管理系统增加销售类型“外销-直销</p><h1 id="VERSION1"><a href="#VERSION1" class="headerlink" title="VERSION1"></a>VERSION1</h1><h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><p>销售类型增加一个类型“外销-直销”，当选中该类型的时候对应的产品单价控制为 金额&#x2F;数量。</p><h2 id="实施步骤"><a href="#实施步骤" class="headerlink" title="实施步骤"></a>实施步骤</h2><p>1.增加外销-直销类型</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240102084544654.png" alt="image-20240102084544654" style="zoom:50%;" /><p>2.调整金额计算逻辑</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[明细表1.金额]=IF([明细表1.金额]&gt;0&amp;([主表.销售类型]==1||[主表.销售类型]==4),[明细表1.金额],[明细表1.数量]×[明细表1.单价])</span><br></pre></td></tr></table></figure><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240102102347727.png" alt="image-20240102102347727" style="zoom:50%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[明细表1.单价]=IF([明细表1.单价]&gt;0&amp;([主表.销售类型]!=1&amp;&amp;[主表.销售类型]!=4),[明细表1.单价],[明细表1.金额]÷[明细表1.数量])</span><br></pre></td></tr></table></figure><p>单价逻辑也改一下</p><p>自营出口和外销-直销一样：单价&#x3D;金额&#x2F;数量  其他几个是：金额&#x3D;单价*数量   你再看一下</p><h1 id="VERSION2"><a href="#VERSION2" class="headerlink" title="VERSION2"></a>VERSION2</h1><p>选择销售类型以后需要带出合同号，也要看下</p>]]></content>
      
      
      <categories>
          
          <category> 发布 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA发布 </tag>
            
            <tag> 供应链发布 </tag>
            
            <tag> 合同管理流程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2023/12/29双周周报</title>
      <link href="/2023/12/29/%E5%8F%8C%E5%91%A8%E5%91%A8%E6%8A%A5/%E5%8F%8C%E5%91%A8%E5%91%A8%E6%8A%A5/"/>
      <url>/2023/12/29/%E5%8F%8C%E5%91%A8%E5%91%A8%E6%8A%A5/%E5%8F%8C%E5%91%A8%E5%91%A8%E6%8A%A5/</url>
      
        <content type="html"><![CDATA[<p>双周周报</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.受限是电子档案MD5的一个校验，相关部门提出希望有方案可以防止电子档案文件被篡改，经过讨论得出的方案是在上传文件的时候记录文件的MD5值，然后定时任务定期去扫描文档云里的文件，取出MD5值和当时上传的文件做比对，如果发现MD5值不一样，那么说明文件被篡改了，这时候就需要发送邮件给相关部门的邮箱做一个提醒。这个已经上线了。电子档案还有一个水印问题，好像</span><br><span class="line">2.第二个是原料药研究院的工作委托联系单，流程做了调整，把原来主任和经理的节点合并成ASL审批节点，审批到各自的板块负责人这里，最后增加了委托人确认节点，这个已经上线了。</span><br><span class="line">3.第三个是采购需求查询页面增加了单据编号，归档时间和转单时间，就是在流程转数据的时候增加了字段映射，还有操作表单的时候修改了一下接口，历史数据是通过写sql的方式进行更新。</span><br><span class="line">4.第四个是人力提出来的，因为新冠期间有人请了调休假还没补上，所以请假流程这里新增一个调休黑名单功能，在名单里面的人提交调休请假流程申请的时候会进行拦截。这个已经上线了元旦的时候会打开。还有是报表的一些数据展示上面的优化，功能都是已经上线了的。</span><br><span class="line"></span><br><span class="line">目前正在开发的一个是和SAP的对接，物料报废申请的时候调用SAP进行报废处理。</span><br><span class="line">第二个是入账发票数据的一个统计功能，主要是开发一个数据视图。</span><br><span class="line">这两个目前都还在了解业务和开发进行中。</span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">本周下周&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</th><th align="center">系统</th><th>模块</th><th>任务&#x2F;解决方案</th><th>业务对接部门</th><th>业务对接人</th><th>计划开始日期</th><th>计划完成日期</th><th>实际开始日期</th><th>实际完成日期</th><th>IT负责人</th><th>状态</th><th>说明</th><th>变更控制号</th></tr></thead><tbody><tr><td align="center">本周</td><td align="center">OA</td><td>OA</td><td>MD5定期校验</td><td>档案管理室</td><td>杨玲芬</td><td>2023&#x2F;12&#x2F;19</td><td>2023&#x2F;12&#x2F;27</td><td>2023&#x2F;12&#x2F;19</td><td>2023&#x2F;12&#x2F;27</td><td>陈柏涛</td><td>已上线</td><td></td><td></td></tr><tr><td align="center">解决方案:国际药政注册部门上传文件需要备份MD5值，定期校验文件是否修改，如有修改发送邮件提醒</td><td align="center"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td align="center">OA</td><td align="center">CR2023000763原料药研究院工作委托联系单</td><td>原料药研究院</td><td>马海霞</td><td>2023&#x2F;12&#x2F;19</td><td>2023&#x2F;12&#x2F;27</td><td>2023&#x2F;12&#x2F;19</td><td>2023&#x2F;12&#x2F;27</td><td>陈柏涛</td><td>已上线</td><td></td><td></td><td></td><td></td></tr><tr><td align="center">解决方案：     1.流程升级一个版本，把委托部门主任和委托部门事业部经理节点合并成ASL审批节点，审批到各板块负责人，如果提交人是原料药业务板块的台州南通富阳工厂下级就审批到各自工厂总经理；同时抄送给原料药研究院办公室马海霞。     2.委托部门技术人员后增加委托人确认节点。</td><td align="center"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td align="center">OA</td><td align="center">CR2023000771采购需求查询页面增加单据编号、归档时间、转单时间三列</td><td>生产信息运营</td><td>周啸天</td><td>2023&#x2F;12&#x2F;14</td><td>2023&#x2F;12&#x2F;19</td><td>2023&#x2F;12&#x2F;14</td><td>2023&#x2F;12&#x2F;19</td><td>陈柏涛</td><td>已上线</td><td></td><td></td><td></td><td></td></tr><tr><td align="center">解决方案:      采购需求表单增加单据编号、归档时间、转单时间三个字段，相关流程流程转数据新增单据编号和归档时间字段映射，历史数据通过sql关联更新；转单时间在提交转单操作的时候通过接口更新，历史数据没有关联无法更新转单时间。</td><td align="center"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td align="center">OA</td><td align="center">CR2023000779增加2024年调休假提交受限人员名单功能等</td><td>人力</td><td>周勤</td><td>2023&#x2F;12&#x2F;19</td><td>2023&#x2F;12&#x2F;27</td><td>2023&#x2F;12&#x2F;19</td><td>2023&#x2F;12&#x2F;27</td><td>陈柏涛</td><td>已上线</td><td></td><td></td><td></td><td></td></tr><tr><td align="center">解决方案:新增调休黑名单建模功能，如果有余额，在黑名单中的人员，在提交调休假的时候，提示“您有新冠疫情期间的调休假未补上，请联系人力资源部处理”，流程不允许提交下去。维护建模人员为台州周勤，南通林玉、富阳贺丹                年假调休余额查询报表优化：       (a)有加班时长，且已调休时长为空的，剩余调休时长不应为空，变为0，需加上公式显示出剩余时长；        (b)年假基数，额外年假，已休年假，剩余年假，可休年假余额调整为本年年假基数，本年额外年假，本年已休年假，本年剩余年假，本年可休年假余额，增加一列本年总共可休年假（本年可休年假余额+上一年年假余额）</td><td align="center"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td align="center">下周</td><td align="center">OA</td><td>OA</td><td>CR2023000760在物料报废申请中增加在产品分类</td><td>财务</td><td>罗淋尹</td><td>2023&#x2F;12&#x2F;29</td><td>2023&#x2F;1&#x2F;6</td><td>2023&#x2F;12&#x2F;29</td><td></td><td>陈柏涛</td><td>进行中</td><td></td><td></td></tr><tr><td align="center">解决方案:开发</td><td align="center"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td align="center">OA</td><td align="center">OA</td><td>CR2023000700新建药业入账发票数据统计查询功能</td><td>财务</td><td>周锦绣</td><td>2023&#x2F;1&#x2F;2</td><td>2023&#x2F;1&#x2F;6</td><td></td><td></td><td>陈柏涛</td><td>未开始</td><td></td><td></td><td></td></tr><tr><td align="center">解决方案：开发</td><td align="center"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 海正双周周报 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CR2023000760在物料报废申请中增加在产品分类</title>
      <link href="/2023/12/29/oa%E5%8F%91%E5%B8%83/2023/CR2023000760%E5%9C%A8%E7%89%A9%E6%96%99%E6%8A%A5%E5%BA%9F%E7%94%B3%E8%AF%B7%E4%B8%AD%E5%A2%9E%E5%8A%A0%E5%9C%A8%E4%BA%A7%E5%93%81%E5%88%86%E7%B1%BB/"/>
      <url>/2023/12/29/oa%E5%8F%91%E5%B8%83/2023/CR2023000760%E5%9C%A8%E7%89%A9%E6%96%99%E6%8A%A5%E5%BA%9F%E7%94%B3%E8%AF%B7%E4%B8%AD%E5%A2%9E%E5%8A%A0%E5%9C%A8%E4%BA%A7%E5%93%81%E5%88%86%E7%B1%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="CR2023000760在物料报废申请中增加在产品分类"><a href="#CR2023000760在物料报废申请中增加在产品分类" class="headerlink" title="CR2023000760在物料报废申请中增加在产品分类"></a>CR2023000760在物料报废申请中增加在产品分类</h1><p><a href="https://oa.hisunpharm.com:48998/spa/workflow/static4form/index.html?_rdm=1703839574744#/main/workflow/req?requestid=6033692&preloadkey=1703839574744&timestamp=1703839574744&_key=bca14b">https://oa.hisunpharm.com:48998/spa/workflow/static4form/index.html?_rdm=1703839574744#/main/workflow/req?requestid=6033692&amp;preloadkey=1703839574744&amp;timestamp=1703839574744&amp;_key=bca14b</a></p><h2 id="计划实施方案"><a href="#计划实施方案" class="headerlink" title="计划实施方案"></a>计划实施方案</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">OA</span>：</span><br><span class="line">    表头新增物料分类字段（库存商品/在产品），如果是在产品，仓库只读；</span><br><span class="line">    行：增加生产流程订单号字段，不需要填写报废数量</span><br><span class="line">    如果公司是<span class="number">1000</span>和<span class="number">1100</span>公司的，归档后调用<span class="variable constant_">SAP</span>接口进行报废处理。</span><br><span class="line"><span class="variable constant_">SAP</span>：</span><br><span class="line"><span class="variable constant_">OA</span>审批后，通过接口将对应的在产品流程订单号传给<span class="variable constant_">SAP</span>，<span class="variable constant_">SAP</span>需要对该订单修改结算规则。</span><br><span class="line"><span class="variable constant_">SAP</span>表：<span class="variable constant_">COBRB</span> 、<span class="variable constant_">AUFK</span></span><br><span class="line">逻辑：<span class="variable constant_">AUFK</span>-<span class="variable constant_">AUFNR</span>=订单号，<span class="variable constant_">COBRB</span>-<span class="variable constant_">OBJNR</span>=<span class="variable constant_">AUFK</span>-<span class="variable constant_">OBJNR</span>，</span><br><span class="line">订单原结算规则行（<span class="variable constant_">COBRB</span>-<span class="variable constant_">KONTY</span>=<span class="variable constant_">MAT</span>），百分比（<span class="variable constant_">COBRB</span>-<span class="variable constant_">PROZS</span>）修改为<span class="number">0</span></span><br><span class="line">新增一行：<span class="variable constant_">COBRB</span>-<span class="variable constant_">KONTY</span>=G/L，<span class="variable constant_">COBRB</span>-<span class="variable constant_">PROZS</span>=<span class="number">100</span> ，<span class="variable constant_">COBRB</span>-<span class="variable constant_">REC_OBJNR1</span>=<span class="number">1901010000</span></span><br></pre></td></tr></table></figure><p><font color=red><strong>1000和1100公司要对接  其他公司不对接SAP 在产品的时候调用服务，否则保持原来逻辑</strong></font></p><p>sap系统只需要调用SAP2和SAP</p><h2 id="SAP规则"><a href="#SAP规则" class="headerlink" title="SAP规则"></a>SAP规则</h2><p><a href="https://oa.hisunpharm.com:48998/spa/document/index.jsp?f_weaver_belongto_userid=32033&f_weaver_belongto_usertype=0&id=1360890&isrequest=1&requestid=6033692&desrequestid=-1&authStr=dmlld0NoYWluPTYwMzM2OTJ8bWFpbmlkPTYwMzM2OTJ8&authSignatureStr=b6b4471bc2a938730ea27a45910271ad&router=1#/main/document/detail?_key=v1w6pk">https://oa.hisunpharm.com:48998/spa/document/index.jsp?f_weaver_belongto_userid=32033&amp;f_weaver_belongto_usertype=0&amp;id=1360890&amp;isrequest=1&amp;requestid=6033692&amp;desrequestid=-1&amp;authStr=dmlld0NoYWluPTYwMzM2OTJ8bWFpbmlkPTYwMzM2OTJ8&amp;authSignatureStr=b6b4471bc2a938730ea27a45910271ad&amp;router=1#/main/document/detail?_key=v1w6pk</a></p><h2 id="实施步骤"><a href="#实施步骤" class="headerlink" title="实施步骤"></a>实施步骤</h2><p>配置编码</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231228162623023.png" alt="image-20231228162623023"></p><p>1.1 新增字段主表物料分类 明细表生产订单编号</p><p>表单也要修改上去</p><p>2.修改代码 <font color=red>这里注意是在出口信息这里添加接口，财务审批节点账密金额必填</font></p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231229153953643.png" alt="image-20231229153953643" style="zoom: 50%;" /><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hisun.action.PTP0303_OVER</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.engine.hisun.main.web.SapMMAction</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hisun.action.CPRK_Create</span><br></pre></td></tr></table></figure><p>3.修改流程逻辑</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240103111331617.png" alt="image-20240103111331617" style="zoom:50%;" /><p><font color=red>配置接口到自动处理后面的线上</font></p><p>4.添加ecode代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//CR2023000760</span></span><br><span class="line"><span class="keyword">let</span> wlfl = <span class="title class_">WfForm</span>.<span class="title function_">convertFieldNameToId</span>(<span class="string">&quot;wlfl&quot;</span>); <span class="comment">// 物料分类</span></span><br><span class="line"><span class="keyword">let</span> sclcddh_dt1 = <span class="title class_">WfForm</span>.<span class="title function_">convertFieldNameToId</span>(<span class="string">&quot;sclcddh&quot;</span>, <span class="string">&quot;detail_1&quot;</span>); <span class="comment">// 生产流程订单号</span></span><br><span class="line"><span class="keyword">let</span> sxrq_dt1 = <span class="title class_">WfForm</span>.<span class="title function_">convertFieldNameToId</span>(<span class="string">&quot;sxrq&quot;</span>, <span class="string">&quot;detail_1&quot;</span>); <span class="comment">// 失效日期</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">//CR2023000760 物料分类变动</span></span><br><span class="line">  <span class="title function_">show</span>();</span><br><span class="line">  <span class="title class_">WfForm</span>.<span class="title function_">bindFieldChangeEvent</span>(wlfl, <span class="keyword">function</span> (<span class="params">obj, id, value</span>) &#123;</span><br><span class="line">    <span class="comment">//清空行项目</span></span><br><span class="line">    <span class="title class_">WfForm</span>.<span class="title function_">delDetailRow</span>(<span class="string">&quot;detail_1&quot;</span>, <span class="string">&quot;all&quot;</span>);</span><br><span class="line">    <span class="title class_">WfForm</span>.<span class="title function_">changeFieldValue</span>(kwid, &#123; <span class="attr">value</span>: <span class="string">&quot;&quot;</span> &#125;);</span><br><span class="line">    <span class="title function_">show</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">show</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> wlflValue = <span class="title class_">WfForm</span>.<span class="title function_">getFieldValue</span>(wlfl);</span><br><span class="line">    <span class="keyword">let</span> indexStr = <span class="title class_">WfForm</span>.<span class="title function_">getDetailAllRowIndexStr</span>(<span class="string">&quot;detail_1&quot;</span>);  <span class="comment">//取明细表1的序号集</span></span><br><span class="line">    <span class="keyword">let</span> indexsplit = indexStr.<span class="title function_">split</span>(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">    <span class="comment">//选择在产品时</span></span><br><span class="line">    <span class="keyword">if</span>(wlflValue == <span class="number">1</span>)&#123;</span><br><span class="line">      <span class="comment">//仓库只读</span></span><br><span class="line">      <span class="title class_">WfForm</span>.<span class="title function_">changeFieldAttr</span>(kwid,<span class="number">1</span>);</span><br><span class="line">      $.<span class="title function_">each</span>(indexsplit, <span class="keyword">function</span> (<span class="params">i, index</span>) &#123;</span><br><span class="line">        <span class="comment">//失效日期、报废数量只读，生产流程订单号必填</span></span><br><span class="line">        <span class="title class_">WfForm</span>.<span class="title function_">changeFieldAttr</span>(sxrq_dt1 + <span class="string">&quot;_&quot;</span> + index,<span class="number">1</span>);</span><br><span class="line">        <span class="title class_">WfForm</span>.<span class="title function_">changeFieldAttr</span>(bfsl + <span class="string">&quot;_&quot;</span> + index,<span class="number">1</span>);</span><br><span class="line">        <span class="title class_">WfForm</span>.<span class="title function_">changeFieldAttr</span>(sclcddh_dt1 + <span class="string">&quot;_&quot;</span> + index,<span class="number">3</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="title class_">WfForm</span>.<span class="title function_">changeFieldAttr</span>(kwid,<span class="number">3</span>);</span><br><span class="line">      $.<span class="title function_">each</span>(indexsplit, <span class="keyword">function</span> (<span class="params">i, index</span>) &#123;</span><br><span class="line">        <span class="title class_">WfForm</span>.<span class="title function_">changeFieldAttr</span>(sxrq_dt1 + <span class="string">&quot;_&quot;</span> + index,<span class="number">3</span>);</span><br><span class="line">        <span class="title class_">WfForm</span>.<span class="title function_">changeFieldAttr</span>(bfsl + <span class="string">&quot;_&quot;</span> + index,<span class="number">3</span>);</span><br><span class="line">        <span class="title class_">WfForm</span>.<span class="title function_">changeFieldAttr</span>(sclcddh_dt1 + <span class="string">&quot;_&quot;</span> + index,<span class="number">1</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//新增行时</span></span><br><span class="line">  <span class="title class_">WfForm</span>.<span class="title function_">registerAction</span>(<span class="title class_">WfForm</span>.<span class="property">ACTION_ADDROW</span>+<span class="string">&quot;1&quot;</span>, <span class="keyword">function</span>(<span class="params">index</span>)&#123;</span><br><span class="line">    <span class="title function_">show</span>();</span><br><span class="line">  &#125;); </span><br><span class="line">  <span class="comment">//仓库节点</span></span><br><span class="line">  <span class="keyword">if</span>(baseinfo.<span class="property">nodeid</span> == ckckjd)&#123;</span><br><span class="line">    <span class="keyword">let</span> wlflValue = <span class="title class_">WfForm</span>.<span class="title function_">getFieldValue</span>(wlfl);</span><br><span class="line">    <span class="keyword">if</span>(wlflValue == <span class="number">1</span>)&#123;</span><br><span class="line">      <span class="keyword">let</span> indexStr = <span class="title class_">WfForm</span>.<span class="title function_">getDetailAllRowIndexStr</span>(<span class="string">&quot;detail_1&quot;</span>);  <span class="comment">//取明细表1的序号集</span></span><br><span class="line">      <span class="keyword">let</span> indexsplit = indexStr.<span class="title function_">split</span>(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">      $.<span class="title function_">each</span>(indexsplit, <span class="keyword">function</span> (<span class="params">i, index</span>) &#123;</span><br><span class="line">      <span class="comment">//物料分类为在产品</span></span><br><span class="line">        <span class="comment">//确认报废数量只读</span></span><br><span class="line">        <span class="title class_">WfForm</span>.<span class="title function_">changeFieldAttr</span>(qrbfsl + <span class="string">&quot;_&quot;</span> + index,<span class="number">1</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240109091558373.png" alt="image-20240109091558373"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select matnr,matnr,matnr from uf_mard where bukrs=&#x27;$bukrs$&#x27; and werks=&#x27;$fcode$&#x27; and  (case when $wlfl$=0 then &#x27;$kwcode$&#x27; else LGORT  end ) = LGORT and upper(nvl(lvorm, &#x27;null&#x27;)) &lt;&gt; &#x27;X&#x27;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 发布 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA发布 </tag>
            
            <tag> 物料报废申请流程 </tag>
            
            <tag> 供应链发布 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CR2023000779增加2024年调休假提交受限人员名单功能等</title>
      <link href="/2023/12/29/oa%E5%8F%91%E5%B8%83/2023/%E5%A2%9E%E5%8A%A02024%E5%B9%B4%E8%B0%83%E4%BC%91%E5%81%87%E6%8F%90%E4%BA%A4%E5%8F%97%E9%99%90%E4%BA%BA%E5%91%98%E5%90%8D%E5%8D%95%E5%8A%9F%E8%83%BD%E7%AD%89/"/>
      <url>/2023/12/29/oa%E5%8F%91%E5%B8%83/2023/%E5%A2%9E%E5%8A%A02024%E5%B9%B4%E8%B0%83%E4%BC%91%E5%81%87%E6%8F%90%E4%BA%A4%E5%8F%97%E9%99%90%E4%BA%BA%E5%91%98%E5%90%8D%E5%8D%95%E5%8A%9F%E8%83%BD%E7%AD%89/</url>
      
        <content type="html"><![CDATA[<h1 id="CR2023000779增加2024年调休假提交受限人员名单功能等"><a href="#CR2023000779增加2024年调休假提交受限人员名单功能等" class="headerlink" title="CR2023000779增加2024年调休假提交受限人员名单功能等"></a>CR2023000779增加2024年调休假提交受限人员名单功能等</h1><p>1.上线后调休受限人员清单的权限分配要修改一下</p><p>2.配置后置处理接口</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231221133129484.png" alt="image-20231221133129484" style="zoom:50%;" /><p>校验拦截的接口要放在最前面<br>3.重新选一下用工主体浏览</p><h2 id="后端代码"><a href="#后端代码" class="headerlink" title="后端代码"></a>后端代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/weaver/ecology/classbean/hisun/action -&gt;</span><br><span class="line">KqCompensatoryLeaveBlackListCheck</span><br></pre></td></tr></table></figure><h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><p>修改调休余额查询SQL为</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> e.id,e.resourceid resourceid,b.lastname lastname,e.belongyear belongyear ,<span class="built_in">COALESCE</span>(a.extraamount,<span class="number">0</span>) extraamount</span><br><span class="line">,<span class="built_in">COALESCE</span>(aa.usedAmount,<span class="number">0</span>) usedAmount,<span class="built_in">COALESCE</span>(a.extraamount,<span class="number">0</span>)<span class="operator">-</span><span class="built_in">COALESCE</span>(aa.usedAmount,<span class="number">0</span>) txye,b.departmentid departmentid,c.field6 field6,BUKRS,</span><br><span class="line">e.baseAmount njbaseAmount,e.extraAmount njextraAmount,e.usedAmount njusedAmount </span><br><span class="line">,e.baseAmount<span class="operator">+</span>e.extraAmount<span class="operator">-</span>e.usedAmount njye,<span class="keyword">case</span> <span class="keyword">when</span> e.belongyear<span class="operator">&lt;=</span>to_number(to_char(sysdate,<span class="string">&#x27;yyyy&#x27;</span>))<span class="number">-2</span> <span class="keyword">then</span> <span class="number">0</span> </span><br><span class="line"><span class="keyword">when</span> e.belongyear<span class="operator">=</span>to_number(to_char(sysdate,<span class="string">&#x27;yyyy&#x27;</span>))<span class="number">-1</span> <span class="keyword">then</span> e.baseAmount<span class="operator">+</span>e.extraAmount<span class="operator">-</span>e.usedAmount <span class="keyword">else</span>  </span><br><span class="line">ROUND((trunc(sysdate) <span class="operator">-</span> trunc(sysdate,<span class="string">&#x27;YYYY&#x27;</span>)<span class="operator">+</span><span class="number">1</span>)<span class="operator">*</span>e.baseAmount<span class="operator">/</span><span class="number">365</span>,<span class="number">2</span>)<span class="operator">-</span>e.usedAmount <span class="keyword">end</span> kxnjye ,</span><br><span class="line">NVL(f.baseAmount,<span class="number">0</span>)<span class="operator">+</span>NVL(f.extraAmount,<span class="number">0</span>)<span class="operator">-</span>NVL(f.usedAmount,<span class="number">0</span>) qnye,<span class="built_in">COALESCE</span>(g.txhj, <span class="number">0</span>) <span class="keyword">AS</span> txhj,</span><br><span class="line">e.baseAmount<span class="operator">+</span>e.extraAmount<span class="operator">+</span>NVl(f.baseAmount,<span class="number">0</span>)<span class="operator">+</span>NVL(f.extraAmount,<span class="number">0</span>)<span class="operator">-</span>NVL(f.usedAmount,<span class="number">0</span>) njqnye</span><br><span class="line"><span class="keyword">from</span> </span><br><span class="line">ecology.kq_balanceOfLeave e</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> (<span class="keyword">select</span> resourceid,belongyear,<span class="built_in">sum</span>(extraamount)<span class="operator">+</span><span class="built_in">sum</span>(tiaoxiuamount) extraamount <span class="keyword">from</span> </span><br><span class="line">ecology.KQ_BALANCEOFLEAVE </span><br><span class="line"><span class="keyword">where</span> LEAVERULESID<span class="operator">=</span><span class="number">-13</span> <span class="keyword">and</span> (isdelete<span class="operator">=</span><span class="number">0</span> <span class="keyword">or</span> isdelete <span class="keyword">is</span> <span class="keyword">null</span>)</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> resourceid,belongyear) a <span class="keyword">on</span> a.resourceid<span class="operator">=</span>e.resourceid <span class="keyword">and</span> a.belongyear<span class="operator">=</span>e.belongyear</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> (<span class="keyword">select</span> nvl(<span class="built_in">sum</span>(aa.hjts), <span class="number">0</span>) <span class="operator">-</span> nvl(<span class="built_in">sum</span>(dd.detail_duration), <span class="number">0</span>) usedAmount,substr(jsrq,<span class="number">0</span>,<span class="number">4</span>) nd,applicant  <span class="keyword">from</span> ecology.formtable_main_82 aa </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.workflow_requestbase bb <span class="keyword">on</span> aa.requestid<span class="operator">=</span>bb.requestid </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.formtable_main_105 cc <span class="keyword">on</span> aa.requestid <span class="operator">=</span> cc.qjlc</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.formtable_main_105_dt1 dd <span class="keyword">on</span> cc.id <span class="operator">=</span> dd.mainid <span class="keyword">and</span> dd.detail_newLeaveType <span class="keyword">in</span> (<span class="number">48</span>, <span class="number">-13</span>)</span><br><span class="line"><span class="keyword">where</span> (qjlx<span class="operator">=</span><span class="number">48</span> <span class="keyword">or</span> qjlx<span class="operator">=</span><span class="number">-13</span>) <span class="keyword">and</span> currentnodetype<span class="operator">=</span><span class="number">3</span> </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> applicant,substr(jsrq,<span class="number">0</span>,<span class="number">4</span>)) aa <span class="keyword">on</span> aa.applicant <span class="operator">=</span>e.resourceid <span class="keyword">and</span> aa.nd<span class="operator">=</span>e.belongyear</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.hrmresource b <span class="keyword">on</span> e.resourceid<span class="operator">=</span>b.id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.CUS_FIELDDATA c <span class="keyword">on</span> b.id<span class="operator">=</span>c.id </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.uf_company d <span class="keyword">on</span> d.COMPANY<span class="operator">=</span>c.field6</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.kq_balanceOfLeave f <span class="keyword">on</span> f.leaveRulesId<span class="operator">=</span><span class="number">-6</span> <span class="keyword">and</span> e.resourceid<span class="operator">=</span>f.resourceid <span class="keyword">and</span> e.belongyear<span class="number">-1</span><span class="operator">=</span>f.belongyear</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> (<span class="keyword">select</span> <span class="built_in">sum</span>(hjts) txhj,substr(jsrq,<span class="number">0</span>,<span class="number">4</span>) nd,applicant  <span class="keyword">from</span> ecology.formtable_main_82 aa </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.workflow_requestbase bb <span class="keyword">on</span> aa.requestid<span class="operator">=</span>bb.requestid </span><br><span class="line"><span class="keyword">where</span> (qjlx<span class="operator">=</span><span class="number">48</span> <span class="keyword">or</span> qjlx<span class="operator">=</span><span class="number">-13</span>) <span class="keyword">and</span> currentnodetype<span class="operator">=</span><span class="number">1</span> </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> applicant,substr(jsrq,<span class="number">0</span>,<span class="number">4</span>)) g <span class="keyword">on</span> g.applicant <span class="operator">=</span>e.resourceid <span class="keyword">and</span> g.nd<span class="operator">=</span>e.belongyear</span><br><span class="line"><span class="keyword">where</span> e.leaveRulesId<span class="operator">=</span><span class="number">-6</span> <span class="keyword">and</span> e.baseAmount <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> b.lastname <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> e.belongyear<span class="operator">&gt;=</span><span class="string">&#x27;2019&#x27;</span> <span class="keyword">and</span> c.field1<span class="operator">=</span><span class="string">&#x27;Y&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="调休余额控制"><a href="#调休余额控制" class="headerlink" title="调休余额控制"></a>调休余额控制</h2><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231229143040162.png" alt="image-20231229143040162" style="zoom:50%;" />]]></content>
      
      
      <categories>
          
          <category> 发布 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA发布 </tag>
            
            <tag> 人力发布 </tag>
            
            <tag> 请假流程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>街头趣闻</title>
      <link href="/2023/12/27/%E8%AF%BB%E4%B9%A6/%E8%A1%97%E5%A4%B4%E8%B6%A3%E9%97%BB/"/>
      <url>/2023/12/27/%E8%AF%BB%E4%B9%A6/%E8%A1%97%E5%A4%B4%E8%B6%A3%E9%97%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="街头趣闻"><a href="#街头趣闻" class="headerlink" title="街头趣闻"></a>街头趣闻</h1><h2 id="怎么会失去客户"><a href="#怎么会失去客户" class="headerlink" title="怎么会失去客户"></a>怎么会失去客户</h2><ul><li>客户不愿意花钱供养你的奢侈的生活，不要制造任何机会让他们产生这样的感觉。</li><li>养成定期小额涨价的习惯，避免将来有一天你被迫大幅度涨价。</li><li>你的公司是你最有价值的个人资产，不要因为毛利率贬低了你公司的价值。</li><li>当心你自己做出的规定，无意之中会迫使你的员工给客户提供恶劣的服务。</li></ul><h2 id="拓展业务的决定"><a href="#拓展业务的决定" class="headerlink" title="拓展业务的决定"></a>拓展业务的决定</h2><ul><li>发展业务是达到目的的一种手段，制定计划前要规划号你的人生。</li><li>当你尝试将销售额提高到下一个新台阶后，千万不要自以为你对最初使你成功的全部因素了然于心。</li><li>拓展业务是你个人选择的问题。在做出正式决定之前，要想清楚你为什么要拓展业务。</li><li>更大并不意味着更好。小公司也有大公司无法企及的优势。</li></ul><h2 id="成为BOSS"><a href="#成为BOSS" class="headerlink" title="成为BOSS"></a>成为BOSS</h2><ul><li>老板和员工之间是一种业务关系，不能逾越这种关系。</li><li>如果你更喜欢销售而不是管理，可以雇佣其他人来管理公司。</li><li>处理员工关系的方式是管理你的制度，不要放弃信任他人。</li><li>当你需要退居的时候，要找一个合适的人，自己找其他方式贡献。</li></ul><h2 id="你必须亲自完成的一件事情"><a href="#你必须亲自完成的一件事情" class="headerlink" title="你必须亲自完成的一件事情"></a>你必须亲自完成的一件事情</h2><ul><li>文化是强有力的工具。</li><li>确保只有一种统一文化，而不是几种文化并存竞争。</li><li>抑制爬行式的开支。</li><li>传递信息，你是真的关爱，帮助你降低各种开支。</li></ul><h2 id="求助"><a href="#求助" class="headerlink" title="求助"></a>求助</h2><ul><li>当你因为某一个问题困扰的时候，最好去听听业外人士的意见，并且提出有效的解决方案。</li><li>会计人员擅长对过去发生的事件进行分析，但是不要指望他们提供业务上的分析。</li><li>律师的职责是为你指出某个决策或者某种行动在法律上将会产生各种可能后果。</li></ul><h2 id="处处留心皆学问"><a href="#处处留心皆学问" class="headerlink" title="处处留心皆学问"></a>处处留心皆学问</h2><p>做生意的窍门随处都可以学到，要做个有心人。</p><p>解决问题的过程分两步，努力降低危害，然后找出问题出现的原因。</p><p>准备充分是一个关键的竞争优势，除非你已经反复研读，不要轻易认定你对合同很熟悉。</p><p>越是有人催促你做决定，你就越要坚持原则从容不迫。</p>]]></content>
      
      
      <categories>
          
          <category> 读书 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 商业 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SRM系统需求讨论会议纪要</title>
      <link href="/2023/12/26/srm/%E4%BC%9A%E8%AE%AE%E7%BA%AA%E8%A6%81/"/>
      <url>/2023/12/26/srm/%E4%BC%9A%E8%AE%AE%E7%BA%AA%E8%A6%81/</url>
      
        <content type="html"><![CDATA[<p>会议内容：</p><p>一、关于SRM系统讨论会，经过与海正和瀚晖采购部门确认以下几点内容：</p><p>1、供应商分类一级包含直接材料供应商、间接采购供应商、财务专用供应商、员工供应商、讲者供应商、关联供应商。可以对供应商贴标签进行分类。增加年度供应商的维护。供应商信息集团管理还是各公司单独管理，后续还有其他需请示公司高层后再做确定。</p><p>2、品类分类，集团层面统一管理。品类二级分类可以和供应商分类进行关联起来。分类划分是按照采购本身类型，不按照分工来进行划分。大类商量如下：</p><p>大类：</p><table><thead><tr><th>耗材类（办公劳保实验室研发等）</th><th>研发物料</th><th>设备类</th><th>服务类</th><th>土建工程类</th><th>设备维保类</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>以下分类可以继续再分：</p><p>耗材类分类：</p><p>  试剂标准品  </p><p>研发物料分类：</p><table><thead><tr><th>特殊危化品（政府管控）</th><th>其他</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><p>设备类分类（资本性支出的）</p><table><thead><tr><th>IT设备</th><th>制剂专用设备</th><th>原料药专用设备</th><th>通用设备</th><th>公共动力设备</th><th>办公设备</th><th>实验室设备</th><th>环保类设备</th><th>特种设备类</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>服务类分类：</p><table><thead><tr><th>会议类</th><th>EHS类</th><th>软件服务类</th><th>推广咨询类</th><th>翻译类</th><th>招聘类</th><th>工程类服务</th><th>审计类</th><th>能源类  （水电蒸气）</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>设备维保类分类：</p><table><thead><tr><th>模具</th><th>备品备件</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><p>3、采购品类和财务的费用大小类在OA系统中分开，可以根据采购品类设置审批流，如果品类能对应上采购组，可以直接设置采购组。在品类下可以建编码。</p><p>4、SRM系统和OA系统对接如下图：</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231227160901957.png" alt="image-20231227160901957">海正采购入库是申请人或者仓库录入，收货发票录入是采购员录入，预付及阶段性付款是采购员录入。</p><p>瀚晖采购入库，收货发票录入，预付及阶段性付款都是业务自行录入。</p><p>系统支持业务部门和采购员2种方式录入。</p><p>5、项目小组：</p><p>海正：黄贤陆，殷海飞，李丛建，胡强英，周啸天，李芳芳，蒋星星，戴美玲，杜丽娥，刘春麟</p><p>瀚晖：楼群，章程波，戴丽丽，陈健 </p>]]></content>
      
      
      <categories>
          
          <category> SRM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 供应链 </tag>
            
            <tag> 会议纪要 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MD5进行文件一致性校验</title>
      <link href="/2023/12/26/oa/%E5%A6%82%E4%BD%95%E7%94%A8MD5%E8%BF%9B%E8%A1%8C%E6%96%87%E4%BB%B6%E4%B8%80%E8%87%B4%E6%80%A7%E6%A0%A1%E9%AA%8C/"/>
      <url>/2023/12/26/oa/%E5%A6%82%E4%BD%95%E7%94%A8MD5%E8%BF%9B%E8%A1%8C%E6%96%87%E4%BB%B6%E4%B8%80%E8%87%B4%E6%80%A7%E6%A0%A1%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="如何用MD5进行文件一致性校验"><a href="#如何用MD5进行文件一致性校验" class="headerlink" title="如何用MD5进行文件一致性校验"></a>如何用MD5进行文件一致性校验</h1><p>背景是文件通过OA上传到文档云需要定期进行文件是否篡改校验，解决方案是在上传到文档云的时候，请求文档云的服务，获取文件，然后解析成MD5保存到OA系统里，定时任务实时获取文档云当前的MD5值和OA系统的进行比对。</p><h2 id="HTTP请求工具类"><a href="#HTTP请求工具类" class="headerlink" title="HTTP请求工具类"></a>HTTP请求工具类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hisun.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.HttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.config.RequestConfig;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpPost;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.utils.URIBuilder;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.entity.StringEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.HttpClientBuilder;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.HttpClients;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.message.BasicHeader;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.protocol.HTTP;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"><span class="keyword">import</span> weaver.conn.StringUtil;</span><br><span class="line"><span class="keyword">import</span> weaver.file.Prop;</span><br><span class="line"><span class="keyword">import</span> weaver.general.BaseBean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.HttpURLConnection;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.StandardCharsets;</span><br><span class="line"><span class="keyword">import</span> java.util.Base64;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> cbt</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/8/21 15:48</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HttpUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发送post请求</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> url</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> param</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> encoding</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> contentType</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">sendPostReq</span><span class="params">(String url, String param,String encoding,<span class="type">int</span> contentType)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">CloseableHttpClient</span> <span class="variable">httpClient</span> <span class="operator">=</span> HttpClients.createDefault();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">body</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//创建httpclient对象</span></span><br><span class="line">            <span class="comment">//创建post方式请求对象</span></span><br><span class="line">            <span class="type">HttpPost</span> <span class="variable">httpPost</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpPost</span>(url);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//设置请求参数实体</span></span><br><span class="line">            <span class="type">StringEntity</span> <span class="variable">reqParam</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringEntity</span>(param, <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">            reqParam.setContentEncoding(<span class="keyword">new</span> <span class="title class_">BasicHeader</span>(HTTP.CONTENT_TYPE,</span><br><span class="line">                    <span class="string">&quot;application/json&quot;</span>));</span><br><span class="line">            <span class="comment">//将请求参数放到请求对象中</span></span><br><span class="line">            httpPost.setEntity(reqParam);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//设置请求报文头信息</span></span><br><span class="line">            httpPost.setHeader (<span class="string">&quot;Accept&quot;</span>, <span class="string">&quot;application/json, text/javascript, */*; q=0.01&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (contentType == <span class="number">0</span>)&#123;</span><br><span class="line">                httpPost.setHeader(<span class="string">&quot;Content-type&quot;</span>, <span class="string">&quot;application/json;charset=UTF-8&quot;</span>);<span class="comment">//设置发送JSON请求</span></span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span> (contentType == <span class="number">1</span>)&#123;</span><br><span class="line">                httpPost.setHeader(<span class="string">&quot;Content-type&quot;</span>, <span class="string">&quot;application/x-www-form-urlencoded;charset=UTF-8&quot;</span>);<span class="comment">//设置发送表单请求</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            httpPost.setHeader(<span class="string">&quot;User-Agent&quot;</span>, <span class="string">&quot;Mozilla/5.0 (Linux; Android 9; CLT-AL01 Build/HUAWEICLT-AL01; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/69.0.3497.100 Mobile Safari/537.36 Html5Plus/1.0&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//发送请求，并拿到结果（同步阻塞）</span></span><br><span class="line">            <span class="type">CloseableHttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> httpClient.execute(httpPost);</span><br><span class="line">            <span class="comment">//获取返回结果</span></span><br><span class="line">            <span class="type">HttpEntity</span> <span class="variable">entity</span> <span class="operator">=</span> response.getEntity();</span><br><span class="line">            <span class="keyword">if</span> (entity != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">//按指定编码转换结果实体为String类型</span></span><br><span class="line">                body = EntityUtils.toString(entity, encoding);</span><br><span class="line">            &#125;</span><br><span class="line">            EntityUtils.consume(entity);</span><br><span class="line">            <span class="comment">//释放Http请求链接</span></span><br><span class="line">            response.close();</span><br><span class="line">            <span class="keyword">return</span> body;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e)&#123;</span><br><span class="line">            <span class="type">BaseBean</span> <span class="variable">baseBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BaseBean</span>();</span><br><span class="line">            baseBean.writeLog(<span class="string">&quot;请求服务失败...&quot;</span>+url);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            httpClient.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">post</span><span class="params">(String url,String formData)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建URL对象</span></span><br><span class="line">        <span class="type">URL</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(url);</span><br><span class="line">        <span class="comment">// 打开连接</span></span><br><span class="line">        <span class="type">HttpURLConnection</span> <span class="variable">conn</span> <span class="operator">=</span> (HttpURLConnection) obj.openConnection();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置请求方法为POST</span></span><br><span class="line">        conn.setRequestMethod(<span class="string">&quot;POST&quot;</span>);</span><br><span class="line">        <span class="comment">// 允许写入请求内容</span></span><br><span class="line">        conn.setDoOutput(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置请求头部信息</span></span><br><span class="line">        conn.setRequestProperty(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>);</span><br><span class="line">        conn.setRequestProperty(<span class="string">&quot;Charset&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取请求体输出流，写入表单数据</span></span><br><span class="line">        <span class="keyword">try</span> (<span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> conn.getOutputStream()) &#123;</span><br><span class="line">            <span class="type">byte</span>[] formDataBytes = formData.getBytes(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">            os.write(formDataBytes);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取响应状态码</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">responseCode</span> <span class="operator">=</span> conn.getResponseCode();</span><br><span class="line">        System.out.println(<span class="string">&quot;Response Code: &quot;</span> + responseCode);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 读取响应内容</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">response</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">try</span> (<span class="type">BufferedReader</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(conn.getInputStream()))) &#123;</span><br><span class="line">            String line;</span><br><span class="line">            <span class="keyword">while</span> ((line = in.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">                response.append(line);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 打印响应内容</span></span><br><span class="line">        System.out.println(<span class="string">&quot;Response: &quot;</span> + response.toString());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 关闭连接</span></span><br><span class="line">        conn.disconnect();</span><br><span class="line">        <span class="keyword">return</span> response.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * get 方式调用</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> url</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">get</span><span class="params">(String url)</span> &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">body</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">res</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="comment">// 实例化CloseableHttpClient</span></span><br><span class="line">        <span class="type">CloseableHttpClient</span> <span class="variable">client</span> <span class="operator">=</span> HttpClients.createDefault();</span><br><span class="line">        <span class="type">CloseableHttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">BaseBean</span> <span class="variable">baseBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BaseBean</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 添加URL和请求参数</span></span><br><span class="line">            <span class="comment">//替换空格;get请求，url拼接参数时，参数值可能存在空格，需要对空格做处理，不然接口会调不通</span></span><br><span class="line">            url = url.replaceAll(<span class="string">&quot; &quot;</span>, <span class="string">&quot;%20&quot;</span>);</span><br><span class="line">            <span class="type">URIBuilder</span> <span class="variable">ub</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URIBuilder</span>(url);</span><br><span class="line">            <span class="comment">// 使用get方法添加URL</span></span><br><span class="line">            <span class="type">HttpGet</span> <span class="variable">get</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpGet</span>(ub.build());</span><br><span class="line">            <span class="comment">// 设置请求超时时间</span></span><br><span class="line">            <span class="type">RequestConfig</span> <span class="variable">config</span> <span class="operator">=</span> RequestConfig.custom().setConnectTimeout(<span class="number">5000</span>).build();</span><br><span class="line">            get.setConfig(config);</span><br><span class="line">            <span class="comment">//使用http调用远程，获取相应信息</span></span><br><span class="line">            response = client.execute(get);</span><br><span class="line">            <span class="comment">// 获取响应状态码，可根据是否响应正常来判断是否需要进行下一步</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">statusCode</span> <span class="operator">=</span> response.getStatusLine().getStatusCode();</span><br><span class="line">            <span class="keyword">if</span> (statusCode != <span class="number">200</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;请求失败 statusCode=&quot;</span> + statusCode;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 获取响应实体</span></span><br><span class="line">            <span class="type">HttpEntity</span> <span class="variable">entity</span> <span class="operator">=</span> response.getEntity();</span><br><span class="line">            <span class="comment">// 读取响应内容</span></span><br><span class="line">            <span class="keyword">if</span> (entity != <span class="literal">null</span>) &#123;</span><br><span class="line">                is = entity.getContent();</span><br><span class="line">                <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(is, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line">                <span class="keyword">while</span> ((body = br.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">                    res.append(body);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            baseBean.writeLog(<span class="string">&quot;请求服务失败....&quot;</span>+url);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                client.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 请求basic auth http请求</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> url</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> requestBody</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> password</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">basicAuthRequest</span><span class="params">(String url, String requestBody, String username, String password)</span> <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">        <span class="comment">// 创建HttpClient实例</span></span><br><span class="line">        <span class="type">HttpClient</span> <span class="variable">httpClient</span> <span class="operator">=</span> HttpClientBuilder.create().build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建HttpPost实例</span></span><br><span class="line">        <span class="type">HttpPost</span> <span class="variable">httpPost</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpPost</span>(url);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置请求体</span></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotEmpty(requestBody))&#123;</span><br><span class="line">            <span class="type">HttpEntity</span> <span class="variable">entity</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringEntity</span>(requestBody);</span><br><span class="line">            httpPost.setEntity(entity);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置Header参数</span></span><br><span class="line">        httpPost.setHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">        httpPost.setHeader(<span class="string">&quot;Accept&quot;</span>, <span class="string">&quot;application/json&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置Authorization参数（Basic Auth）</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">authString</span> <span class="operator">=</span> username + <span class="string">&quot;:&quot;</span> + password;</span><br><span class="line">        <span class="type">String</span> <span class="variable">encodedAuthString</span> <span class="operator">=</span> Base64.getEncoder().encodeToString(authString.getBytes(StandardCharsets.UTF_8));</span><br><span class="line">        httpPost.setHeader(<span class="string">&quot;Authorization&quot;</span>, <span class="string">&quot;Basic &quot;</span> + encodedAuthString);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 发送请求并获取响应</span></span><br><span class="line">            <span class="type">HttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> httpClient.execute(httpPost);</span><br><span class="line">            <span class="type">HttpEntity</span> <span class="variable">responseEntity</span> <span class="operator">=</span> response.getEntity();</span><br><span class="line">            <span class="keyword">return</span> EntityUtils.toString(responseEntity);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 处理响应结果</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取ZOOM token</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getZoomBasicAuthToken</span><span class="params">()</span> <span class="keyword">throws</span> UnsupportedEncodingException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">clientId</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;hisun&quot;</span>, <span class="string">&quot;Zoom_client_id&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;hisun&quot;</span>, <span class="string">&quot;Zoom_username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;hisun&quot;</span>, <span class="string">&quot;Zoom_password&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">response</span> <span class="operator">=</span> basicAuthRequest(<span class="string">&quot;https://zoom.us/oauth/token?grant_type=account_credentials&amp;account_id=&quot;</span>+clientId, <span class="literal">null</span>, username,password);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotEmpty(response))&#123;</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(response);</span><br><span class="line">            <span class="keyword">return</span> jsonObject.getString(<span class="string">&quot;access_token&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="获取MD5值工具类"><a href="#获取MD5值工具类" class="headerlink" title="获取MD5值工具类"></a>获取MD5值工具类</h2><p>通过HTTP接口请求文档云的地址，然后下载压缩文件流，读取文件内容更新MD5摘要。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hisun.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONArray;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> io.swagger.models.auth.In;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpPost;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.entity.ContentType;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.entity.mime.MultipartEntityBuilder;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.entity.mime.content.StringBody;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.HttpClients;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.protocol.HTTP;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"><span class="keyword">import</span> weaver.conn.RecordSet;</span><br><span class="line"><span class="keyword">import</span> weaver.conn.StringUtil;</span><br><span class="line"><span class="keyword">import</span> weaver.crm.Maint.CustomerInfoComInfo;</span><br><span class="line"><span class="keyword">import</span> weaver.docs.category.MainCategoryComInfo;</span><br><span class="line"><span class="keyword">import</span> weaver.docs.category.SecCategoryComInfo;</span><br><span class="line"><span class="keyword">import</span> weaver.docs.category.SubCategoryComInfo;</span><br><span class="line"><span class="keyword">import</span> weaver.docs.docs.DocComInfo;</span><br><span class="line"><span class="keyword">import</span> weaver.docs.docs.DocImageManager;</span><br><span class="line"><span class="keyword">import</span> weaver.docs.docs.ImageFileIdUpdate;</span><br><span class="line"><span class="keyword">import</span> weaver.docs.webservices.DocAttachment;</span><br><span class="line"><span class="keyword">import</span> weaver.docs.webservices.DocInfo;</span><br><span class="line"><span class="keyword">import</span> weaver.docs.webservices.DocService;</span><br><span class="line"><span class="keyword">import</span> weaver.docs.webservices.DocServiceImpl;</span><br><span class="line"><span class="keyword">import</span> weaver.file.ImageFileManager;</span><br><span class="line"><span class="keyword">import</span> weaver.file.Prop;</span><br><span class="line"><span class="keyword">import</span> weaver.general.BaseBean;</span><br><span class="line"><span class="keyword">import</span> weaver.general.MD5;</span><br><span class="line"><span class="keyword">import</span> weaver.general.Util;</span><br><span class="line"><span class="keyword">import</span> weaver.hrm.User;</span><br><span class="line"><span class="keyword">import</span> weaver.hrm.company.DepartmentComInfo;</span><br><span class="line"><span class="keyword">import</span> weaver.hrm.resource.ResourceComInfo;</span><br><span class="line"><span class="keyword">import</span> weaver.login.Base64;</span><br><span class="line"><span class="keyword">import</span> weaver.systeminfo.language.LanguageComInfo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.zip.ZipEntry;</span><br><span class="line"><span class="keyword">import</span> java.util.zip.ZipInputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> cbt</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/8/21 16:00</span></span><br><span class="line"><span class="comment"> * 文档云操作工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EfileUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">ImageFileIdUpdate</span> <span class="variable">imageFileIdUpdate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ImageFileIdUpdate</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Map</span> <span class="variable">sessionIDMap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Map</span> <span class="variable">sessionTimeMap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">byte</span>[] data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;formprocessnode&quot;</span>, <span class="string">&quot;efile_pre_url&quot;</span>)+ <span class="string">&quot;/api/services/Org/UserLoginIntegrationByUserLoginName&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">preUrl</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;formprocessnode&quot;</span>, <span class="string">&quot;efile_pre_url&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> EfileUtil efileUtil;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">EfileUtil</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> EfileUtil <span class="title function_">getEfileUtil</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (efileUtil == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (EfileUtil.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (efileUtil == <span class="literal">null</span>) &#123;</span><br><span class="line">                    efileUtil = <span class="keyword">new</span> <span class="title class_">EfileUtil</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> efileUtil;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据文件名称获取文件目录id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getWjmlPkcostSubj</span><span class="params">(String name,String parent )</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">formName</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;hisun&quot;</span>, <span class="string">&quot;efile_form_name&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isEmpty(parent))&#123;</span><br><span class="line">            sql  = <span class="string">&quot;select pkcostsubj from &quot;</span>+formName+<span class="string">&quot; where costname = &#x27;&quot;</span> + name +<span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            sql = <span class="string">&quot;select pkcostsubj from &quot;</span>+formName+<span class="string">&quot; where pkparent = &#x27;&quot;</span>+parent +<span class="string">&quot;&#x27; and  costname = &#x27;&quot;</span> + name +<span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">RecordSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RecordSet</span>();</span><br><span class="line">        rs.execute(sql);</span><br><span class="line">        <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">            <span class="keyword">return</span> rs.getString(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取文件目录</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> folderId 文件夹的id</span></span><br><span class="line"><span class="comment">     *                 type FilesInfo  FoldersInfo</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> JSONArray <span class="title function_">getEfileJsonArray</span><span class="params">(String folderId, String type)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//Json请求参数</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="string">&quot;&#123;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;loginName\&quot;: \&quot;admin\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;ipAddress\&quot;: \&quot;172.16.1.6\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;integrationKey\&quot;: \&quot;46aa92ec-66af-4818-b7c1-8495a9bd7f17\&quot;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">tokenRes</span> <span class="operator">=</span> HttpUtil.sendPostReq(url, param, <span class="string">&quot;utf-8&quot;</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(tokenRes);</span><br><span class="line">            <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">preUrl</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;formprocessnode&quot;</span>, <span class="string">&quot;efile_pre_url&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">efileUrl</span> <span class="operator">=</span>  preUrl+<span class="string">&quot;/api/services/Doc/GetChildListByFolderId?pageNumber=1&amp;pageSize=100000000&amp;token=&quot;</span> + token + <span class="string">&quot;&amp;folderId=&quot;</span> + folderId;</span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> HttpUtil.get(efileUrl);</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject1</span> <span class="operator">=</span> JSON.parseObject(result);</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">data</span> <span class="operator">=</span> jsonObject1.getJSONObject(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">            <span class="type">JSONArray</span> <span class="variable">filesInfo</span> <span class="operator">=</span> data.getJSONArray(type);</span><br><span class="line">            <span class="keyword">return</span> filesInfo;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 上传文件</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileId 文件id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> folderId 需要移交的文件夹id</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span>  String <span class="title function_">uploadEfile</span><span class="params">(String folderId, String fileId,String no)</span>  &#123;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">retryFalg</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">BaseBean</span> <span class="variable">baseBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BaseBean</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">while</span> (retryFalg &lt; <span class="number">20</span>)&#123;</span><br><span class="line">            retryFalg ++;</span><br><span class="line">             result = <span class="built_in">this</span>.updaLoad(folderId, fileId, no);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isNotEmpty(result))&#123;</span><br><span class="line">                retryFalg = <span class="number">1000</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                baseBean.writeLog(<span class="string">&quot;获取文件上传id失败.....&quot;</span> + folderId + <span class="string">&quot;:&quot;</span> + fileId + <span class="string">&quot;:&quot;</span>+ no);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取文件流解码上传文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> folderId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> no</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">updaLoad</span><span class="params">(String folderId, String fileId,String no)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//获取文件编码</span></span><br><span class="line">            <span class="type">BaseBean</span> <span class="variable">baseBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BaseBean</span>();</span><br><span class="line">            baseBean.writeLog(<span class="string">&quot;[上传文件]&quot;</span>+folderId +<span class="string">&quot;:&quot;</span>+fileId+<span class="string">&quot;:&quot;</span>+no);</span><br><span class="line">            <span class="type">String</span> <span class="variable">fileContent</span> <span class="operator">=</span> <span class="built_in">this</span>.getFileContent(fileId);</span><br><span class="line">            <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="built_in">this</span>.getFileName2(fileId);</span><br><span class="line">            <span class="type">String</span> <span class="variable">filedId</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;<span class="comment">//文件回传id</span></span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isEmpty(fileContent))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//解码转流</span></span><br><span class="line">            <span class="type">CloseableHttpClient</span> <span class="variable">client</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="type">byte</span>[] content = Base64.decode(fileContent);</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayInputStream</span>(content);</span><br><span class="line">            <span class="comment">//获取文件大小</span></span><br><span class="line">            String[] split = fileName.split(<span class="string">&quot;\\.&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> split.length;</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isNotEmpty(no))&#123;</span><br><span class="line">                fileName = split[<span class="number">0</span>] + no + <span class="string">&quot;.&quot;</span>+split[length - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            baseBean.writeLog(<span class="string">&quot;[上传文件]&quot;</span>+fileName);</span><br><span class="line">            <span class="type">String</span> <span class="variable">fileType</span> <span class="operator">=</span> split[length - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//获取token</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="string">&quot;&#123;\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;loginName\&quot;: \&quot;admin\&quot;,\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;ipAddress\&quot;: \&quot;172.16.1.6\&quot;,\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;integrationKey\&quot;: \&quot;46aa92ec-66af-4818-b7c1-8495a9bd7f17\&quot;\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">                <span class="type">String</span> <span class="variable">preUrl</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;formprocessnode&quot;</span>, <span class="string">&quot;efile_pre_url&quot;</span>);</span><br><span class="line">                <span class="comment">//获取regionHash</span></span><br><span class="line">                <span class="type">HttpPost</span> <span class="variable">webCorePost</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpPost</span>(preUrl+<span class="string">&quot;/WebCore?module=RegionDocOperationApi&amp;fun=CheckAndCreateDocInfo&quot;</span>);</span><br><span class="line">                <span class="type">MultipartEntityBuilder</span> <span class="variable">webBuilder</span> <span class="operator">=</span> MultipartEntityBuilder.create();</span><br><span class="line">                webBuilder.addTextBody(<span class="string">&quot;folderId&quot;</span>, folderId);</span><br><span class="line">                <span class="type">ContentType</span> <span class="variable">contentType</span> <span class="operator">=</span> ContentType.create(HTTP.PLAIN_TEXT_TYPE, HTTP.UTF_8);</span><br><span class="line">                <span class="type">StringBody</span> <span class="variable">stringBody</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBody</span>(fileName, contentType);</span><br><span class="line">                webBuilder.addPart(<span class="string">&quot;fileName&quot;</span>, stringBody);</span><br><span class="line">                webBuilder.addTextBody(<span class="string">&quot;type&quot;</span>, fileType);</span><br><span class="line">                webBuilder.addTextBody(<span class="string">&quot;fileModel&quot;</span>, <span class="string">&quot;UPLOAD&quot;</span>);</span><br><span class="line">                webBuilder.addTextBody(<span class="string">&quot;attachType&quot;</span>, <span class="string">&quot;0&quot;</span>);</span><br><span class="line">                webBuilder.addTextBody(<span class="string">&quot;size&quot;</span>, String.valueOf(content.length));</span><br><span class="line">                webCorePost.setEntity(webBuilder.build());</span><br><span class="line">                client = HttpClients.createDefault();</span><br><span class="line">                <span class="type">HttpResponse</span> <span class="variable">response1</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">                <span class="type">String</span> <span class="variable">regionHash</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="type">Integer</span> <span class="variable">retryCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">while</span> (retryCount &lt; <span class="number">20</span>)&#123;</span><br><span class="line">                    retryCount++;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="type">String</span> <span class="variable">tokenRes</span> <span class="operator">=</span> HttpUtil.sendPostReq(preUrl+<span class="string">&quot;/api/services/Org/UserLoginIntegrationByUserLoginName&quot;</span>, param, <span class="string">&quot;utf-8&quot;</span>, <span class="number">0</span>);</span><br><span class="line">                        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(tokenRes);</span><br><span class="line">                        token = jsonObject.getString(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">                        webBuilder.addTextBody(<span class="string">&quot;token&quot;</span>, token);</span><br><span class="line">                        webCorePost.setEntity(webBuilder.build());</span><br><span class="line">                        response1 = client.execute(webCorePost);</span><br><span class="line">                        <span class="keyword">if</span> (response1.getStatusLine().getStatusCode() == <span class="number">200</span>) &#123;</span><br><span class="line">                            <span class="comment">// 取回服务器端的响应结果</span></span><br><span class="line">                            result = EntityUtils.toString(response1.getEntity(), <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">                            <span class="type">JSONObject</span> <span class="variable">jsonObject1</span> <span class="operator">=</span> JSON.parseObject(result);</span><br><span class="line">                            <span class="type">String</span> <span class="variable">result1</span> <span class="operator">=</span> jsonObject1.getString(<span class="string">&quot;result&quot;</span>);</span><br><span class="line">                            <span class="keyword">if</span> (!StringUtils.equals(result1, <span class="string">&quot;0&quot;</span>)) &#123;</span><br><span class="line">                                <span class="type">String</span> <span class="variable">reason</span> <span class="operator">=</span> jsonObject1.getString(<span class="string">&quot;reason&quot;</span>);</span><br><span class="line">                                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(reason);</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="type">JSONObject</span> <span class="variable">data</span> <span class="operator">=</span> jsonObject1.getJSONObject(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">                            regionHash = data.getString(<span class="string">&quot;RegionHash&quot;</span>);</span><br><span class="line">                            filedId = data.getString(<span class="string">&quot;FileId&quot;</span>);</span><br><span class="line">                            retryCount = <span class="number">10000</span>;</span><br><span class="line">                        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                            baseBean.writeLog(<span class="string">&quot;获取文件流的响应结果失败:&quot;</span>+JSON.toJSONString(response1));</span><br><span class="line">                            Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">                        baseBean.writeLog(<span class="string">&quot;[获取文件流的响应结果失败]&quot;</span>+EntityUtils.toString(response1.getEntity(), <span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                        Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                client = HttpClients.createDefault();</span><br><span class="line">                <span class="type">HttpPost</span> <span class="variable">httpPost</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpPost</span>(preUrl+<span class="string">&quot;/document/upload&quot;</span>);</span><br><span class="line">                <span class="type">MultipartEntityBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> MultipartEntityBuilder.create();</span><br><span class="line">                <span class="comment">//builder.addTextBody(&quot;id&quot;, &quot;1&quot;);</span></span><br><span class="line">                builder.addTextBody(<span class="string">&quot;regionHash&quot;</span>, regionHash);</span><br><span class="line">                builder.addTextBody(<span class="string">&quot;size&quot;</span>, String.valueOf(content.length));</span><br><span class="line">                builder.addTextBody(<span class="string">&quot;uploadId&quot;</span>, UUID.randomUUID().toString());</span><br><span class="line">                builder.addTextBody(<span class="string">&quot;regionId&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">                contentType = ContentType.create(HTTP.PLAIN_TEXT_TYPE, HTTP.UTF_8);</span><br><span class="line">                stringBody = <span class="keyword">new</span> <span class="title class_">StringBody</span>(fileName, contentType);</span><br><span class="line">                builder.addPart(<span class="string">&quot;fileName&quot;</span>, stringBody);</span><br><span class="line">                builder.addTextBody(<span class="string">&quot;chunks&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">                builder.addTextBody(<span class="string">&quot;chunk&quot;</span>, <span class="string">&quot;0&quot;</span>);</span><br><span class="line">                builder.addTextBody(<span class="string">&quot;chunkSize&quot;</span>, String.valueOf(content.length));</span><br><span class="line">                builder.addTextBody(<span class="string">&quot;blockSize&quot;</span>, String.valueOf(content.length));</span><br><span class="line">                builder.addTextBody(<span class="string">&quot;token&quot;</span>, token);</span><br><span class="line">                builder.addTextBody(<span class="string">&quot;code&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">                inputStream = <span class="keyword">new</span> <span class="title class_">ByteArrayInputStream</span>(content);</span><br><span class="line">                <span class="comment">//addBinaryBody()该方法传入二进制内容，可以传入InputStream，File, 参数三是传入的类型，参数四是文件名称</span></span><br><span class="line">                builder.addBinaryBody(<span class="string">&quot;form&quot;</span>, inputStream, ContentType.MULTIPART_FORM_DATA, fileName);</span><br><span class="line">                builder.addBinaryBody(<span class="string">&quot;file&quot;</span>, inputStream, ContentType.MULTIPART_FORM_DATA, fileName);</span><br><span class="line">                httpPost.setEntity(builder.build());</span><br><span class="line">                <span class="type">HttpResponse</span> <span class="variable">response</span> <span class="operator">=</span> client.execute(httpPost);</span><br><span class="line">                result = EntityUtils.toString(response.getEntity(), <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span> (response.getStatusLine().getStatusCode() == <span class="number">200</span>) &#123;</span><br><span class="line">                    <span class="comment">// 取回服务器端的响应结果</span></span><br><span class="line">                    <span class="type">JSONObject</span> <span class="variable">jsonObject1</span> <span class="operator">=</span> JSON.parseObject(result);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">errorCode</span> <span class="operator">=</span> jsonObject1.getString(<span class="string">&quot;errorCode&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (StringUtils.equals(errorCode,<span class="string">&quot;0&quot;</span>))&#123;</span><br><span class="line">                        <span class="keyword">return</span> filedId;</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        baseBean.writeLog(<span class="string">&quot;[提交文件错误返回结果]&quot;</span>+result);</span><br><span class="line">                        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    client.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 创建文件夹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name 名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> remark 备注</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> parentFolderId 父级文件夹id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">createFolder</span><span class="params">(String name,String remark,String parentFolderId)</span>&#123;</span><br><span class="line">        <span class="type">BaseBean</span> <span class="variable">baseBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BaseBean</span>();</span><br><span class="line">        baseBean.writeLog(<span class="string">&quot;上传文件夹:&quot;</span>+name+<span class="string">&quot;:&quot;</span>+<span class="string">&quot;:&quot;</span>+remark+<span class="string">&quot;:&quot;</span>+parentFolderId);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//获取token</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="string">&quot;&#123;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;loginName\&quot;: \&quot;admin\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;ipAddress\&quot;: \&quot;172.16.1.6\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;integrationKey\&quot;: \&quot;46aa92ec-66af-4818-b7c1-8495a9bd7f17\&quot;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">tokenRes</span> <span class="operator">=</span> HttpUtil.sendPostReq(url, param, <span class="string">&quot;utf-8&quot;</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(tokenRes);</span><br><span class="line">            <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">uuid</span> <span class="operator">=</span> UUID.randomUUID().toString();</span><br><span class="line">            <span class="type">String</span> <span class="variable">param2</span> <span class="operator">=</span> <span class="string">&quot;&#123;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;token\&quot;: \&quot;&quot;</span>+token+<span class="string">&quot;\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;name\&quot;: \&quot;&quot;</span>+name+<span class="string">&quot;\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;folderCode\&quot;: \&quot;&quot;</span>+uuid+<span class="string">&quot;\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;remark\&quot;: \&quot;&quot;</span>+remark+<span class="string">&quot;\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;parentFolderId\&quot;: &quot;</span>+parentFolderId+<span class="string">&quot;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">preUrl</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;formprocessnode&quot;</span>, <span class="string">&quot;efile_pre_url&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> HttpUtil.sendPostReq(preUrl+<span class="string">&quot;/api/services/Folder/CreateFolder&quot;</span>, param2, <span class="string">&quot;utf-8&quot;</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject2</span> <span class="operator">=</span> JSON.parseObject(result);</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">data</span> <span class="operator">=</span> jsonObject2.getJSONObject(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (data != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">folderId</span> <span class="operator">=</span> data.getString(<span class="string">&quot;FolderId&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> folderId;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 更新文件夹名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> folderId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">updateFolderName</span><span class="params">(String name,String folderId)</span>&#123;</span><br><span class="line">        <span class="type">BaseBean</span> <span class="variable">baseBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BaseBean</span>();</span><br><span class="line">        baseBean.writeLog(<span class="string">&quot;更新文件夹名称:&quot;</span>+name+<span class="string">&quot;:&quot;</span>+folderId);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//获取token</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="string">&quot;&#123;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;loginName\&quot;: \&quot;admin\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;ipAddress\&quot;: \&quot;172.16.1.6\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;integrationKey\&quot;: \&quot;46aa92ec-66af-4818-b7c1-8495a9bd7f17\&quot;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">tokenRes</span> <span class="operator">=</span> HttpUtil.sendPostReq(url, param, <span class="string">&quot;utf-8&quot;</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(tokenRes);</span><br><span class="line">            <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">param2</span> <span class="operator">=</span> <span class="string">&quot;&#123;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;token\&quot;: \&quot;&quot;</span>+token+<span class="string">&quot;\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;docId\&quot;: &quot;</span>+folderId+<span class="string">&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;newName\&quot;: \&quot;&quot;</span>+name+<span class="string">&quot;\&quot;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">preUrl</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;formprocessnode&quot;</span>, <span class="string">&quot;efile_pre_url&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> HttpUtil.sendPostReq(preUrl+<span class="string">&quot;/api/services/Folder/RenameFolder&quot;</span>, param2, <span class="string">&quot;utf-8&quot;</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject2</span> <span class="operator">=</span> JSON.parseObject(result);</span><br><span class="line">            <span class="type">String</span> <span class="variable">result1</span> <span class="operator">=</span> jsonObject2.getString(<span class="string">&quot;result&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.equals(result1, <span class="string">&quot;0&quot;</span>)) &#123;</span><br><span class="line">                <span class="type">JSONObject</span> <span class="variable">data</span> <span class="operator">=</span> jsonObject2.getJSONObject(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span> (data != <span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取文件流</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span>  String <span class="title function_">getFileContent</span><span class="params">(String fileId)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//根据Eclipse生成的Web Service客户端程序，取得接口</span></span><br><span class="line">            <span class="type">DocService</span> <span class="variable">service</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DocServiceImpl</span>();</span><br><span class="line">            <span class="comment">//登陆</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">adminCount</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;formprocessnode&quot;</span>, <span class="string">&quot;admin_account&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">adminPassword</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;formprocessnode&quot;</span>, <span class="string">&quot;admin_password&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">session</span> <span class="operator">=</span> service.login(adminCount, adminPassword, <span class="number">0</span>, <span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">            <span class="type">DocInfo</span> <span class="variable">doc</span> <span class="operator">=</span> service.getDoc(Integer.parseInt(fileId), session);</span><br><span class="line">            DocAttachment[] attachments = doc.getAttachments();</span><br><span class="line">            <span class="type">DocAttachment</span> <span class="variable">attachment</span> <span class="operator">=</span> attachments[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">return</span> attachment.getFilecontent();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取文件名</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span>  String <span class="title function_">getFileName</span><span class="params">(String fileId)</span> &#123;</span><br><span class="line">        <span class="type">BaseBean</span> <span class="variable">baseBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BaseBean</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//根据Eclipse生成的Web Service客户端程序，取得接口</span></span><br><span class="line">            <span class="type">DocService</span> <span class="variable">service</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DocServiceImpl</span>();</span><br><span class="line">            <span class="comment">//登陆</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">adminCount</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;formprocessnode&quot;</span>, <span class="string">&quot;admin_account&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">adminPassword</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;formprocessnode&quot;</span>, <span class="string">&quot;admin_password&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">session</span> <span class="operator">=</span> service.login(adminCount, adminPassword, <span class="number">0</span>, <span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">            <span class="type">DocInfo</span> <span class="variable">doc</span> <span class="operator">=</span> service.getDoc(Integer.parseInt(fileId), session);</span><br><span class="line">            DocAttachment[] attachments = doc.getAttachments();</span><br><span class="line">            <span class="type">DocAttachment</span> <span class="variable">attachment</span> <span class="operator">=</span> attachments[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">return</span> attachment.getFilename();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            baseBean.writeLog(<span class="string">&quot;获取文件名失败&quot;</span>+fileId);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> DocInfo <span class="title function_">getDocByUser</span><span class="params">(<span class="type">int</span> var1)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">DocInfo</span> <span class="variable">var4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DocInfo</span>();</span><br><span class="line">        var4.setId(var1);</span><br><span class="line">        <span class="type">RecordSet</span> <span class="variable">var5</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RecordSet</span>();</span><br><span class="line">        <span class="type">DocComInfo</span> <span class="variable">var6</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DocComInfo</span>();</span><br><span class="line">        <span class="type">MainCategoryComInfo</span> <span class="variable">var7</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MainCategoryComInfo</span>();</span><br><span class="line">        <span class="type">SubCategoryComInfo</span> <span class="variable">var8</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SubCategoryComInfo</span>();</span><br><span class="line">        <span class="type">SecCategoryComInfo</span> <span class="variable">var9</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SecCategoryComInfo</span>();</span><br><span class="line">        <span class="type">DepartmentComInfo</span> <span class="variable">var10</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DepartmentComInfo</span>();</span><br><span class="line">        <span class="type">LanguageComInfo</span> <span class="variable">var11</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LanguageComInfo</span>();</span><br><span class="line">        <span class="type">CustomerInfoComInfo</span> <span class="variable">var12</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CustomerInfoComInfo</span>();</span><br><span class="line">        <span class="type">ResourceComInfo</span> <span class="variable">var13</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResourceComInfo</span>();</span><br><span class="line">        <span class="type">String</span> <span class="variable">var14</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">var15</span> <span class="operator">=</span> var5.getDBType();</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">var16</span> <span class="operator">=</span> var15.equals(<span class="string">&quot;oracle&quot;</span>);</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">var17</span> <span class="operator">=</span> var15.equals(<span class="string">&quot;mysql&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (!var16 &amp;&amp; !var17) &#123;</span><br><span class="line">            var14 = <span class="string">&quot; select * from DocDetail t1 where &quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            var14 = <span class="string">&quot; select t1.* , t2.doccontent from DocDetail t1 , DocDetailContent t2 where t1.id = t2.docid and &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        var14 = var14 + <span class="string">&quot; t1.id = &quot;</span> + var1;</span><br><span class="line">        var5.executeSql(var14);</span><br><span class="line">        <span class="keyword">if</span> (var5.next()) &#123;</span><br><span class="line">            var4.setDocType(Util.getIntValue(Util.null2String(var5.getString(<span class="string">&quot;doctype&quot;</span>)), <span class="number">1</span>));</span><br><span class="line">            <span class="type">String</span> <span class="variable">var18</span> <span class="operator">=</span> Util.null2String(var5.getString(<span class="string">&quot;docsubject&quot;</span>));</span><br><span class="line">            var18 = var18.replaceAll(<span class="string">&quot;\n&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">            var4.setDocSubject(var18);</span><br><span class="line">            var4.setDocCode(Util.null2String(var5.getString(<span class="string">&quot;docCode&quot;</span>)));</span><br><span class="line">            var4.setDocPublishType(Util.getIntValue(Util.null2String(var5.getString(<span class="string">&quot;docpublishtype&quot;</span>)), <span class="number">1</span>));</span><br><span class="line">            var4.setDocEdition(Util.getIntValue(Util.null2String(var5.getString(<span class="string">&quot;docEdition&quot;</span>)), <span class="number">0</span>));</span><br><span class="line">            var4.setDocEditionId(Util.getIntValue(Util.null2String(var5.getString(<span class="string">&quot;docEditionId&quot;</span>))));</span><br><span class="line">            var4.setDocEditionStr(var6.getEditionView(var4.getId()));</span><br><span class="line">            var4.setDocStatus(Util.getIntValue(Util.null2String(var5.getString(<span class="string">&quot;docstatus&quot;</span>))));</span><br><span class="line">            var4.setMaincategory(var5.getInt(<span class="string">&quot;maincategory&quot;</span>));</span><br><span class="line">            var4.setMaincategoryStr(var7.getMainCategoryname(var4.getMaincategory() + <span class="string">&quot;&quot;</span>));</span><br><span class="line">            var4.setSubcategory(var5.getInt(<span class="string">&quot;subcategory&quot;</span>));</span><br><span class="line">            var4.setSubcategoryStr(var8.getSubCategoryname(var4.getSubcategory() + <span class="string">&quot;&quot;</span>));</span><br><span class="line">            var4.setSeccategory(var5.getInt(<span class="string">&quot;seccategory&quot;</span>));</span><br><span class="line">            var4.setSeccategoryStr(var9.getSecCategoryname(var4.getSeccategory() + <span class="string">&quot;&quot;</span>));</span><br><span class="line">            var4.setAllParentName(var9.getAllParentName(var4.getSeccategory() + <span class="string">&quot;&quot;</span>, <span class="literal">true</span>));</span><br><span class="line">            var4.setDocdepartmentid(var5.getInt(<span class="string">&quot;docdepartmentid&quot;</span>));</span><br><span class="line">            var4.setDocdepartmentStr(var10.getDepartmentname(var4.getDocdepartmentid() + <span class="string">&quot;&quot;</span>));</span><br><span class="line">            var4.setDoclangurage(var5.getInt(<span class="string">&quot;doclangurage&quot;</span>));</span><br><span class="line">            var4.setDoclangurageStr(var11.getLanguagename(var4.getDoclangurage() + <span class="string">&quot;&quot;</span>));</span><br><span class="line">            var4.setKeyword(Util.null2String(var5.getString(<span class="string">&quot;keyword&quot;</span>)));</span><br><span class="line">            var4.setDoccreaterid(var5.getInt(<span class="string">&quot;doccreaterid&quot;</span>));</span><br><span class="line">            var4.setDoccreatertype(Util.getIntValue(Util.null2String(var5.getString(<span class="string">&quot;docCreaterType&quot;</span>))));</span><br><span class="line">            var4.setDoccreatername(var4.getDoccreatertype() == <span class="number">1</span> ? var13.getResourcename(var4.getDoccreaterid() + <span class="string">&quot;&quot;</span>) : var12.getCustomerInfoname(var4.getDoccreaterid() + <span class="string">&quot;&quot;</span>));</span><br><span class="line">            var4.setDoccreatedate(Util.null2String(var5.getString(<span class="string">&quot;doccreatedate&quot;</span>)));</span><br><span class="line">            var4.setDoccreatetime(Util.null2String(var5.getString(<span class="string">&quot;doccreatetime&quot;</span>)));</span><br><span class="line">            var4.setDoclastmoduserid(var5.getInt(<span class="string">&quot;doclastmoduserid&quot;</span>));</span><br><span class="line">            var4.setDoclastmodusertype(Util.getIntValue(Util.null2String(var5.getString(<span class="string">&quot;docLastModUserType&quot;</span>))));</span><br><span class="line">            var4.setDoclastmodusername(var4.getDoclastmodusertype() == <span class="number">1</span> ? var13.getResourcename(var4.getDoclastmoduserid() + <span class="string">&quot;&quot;</span>) : var12.getCustomerInfoname(var4.getDoclastmoduserid() + <span class="string">&quot;&quot;</span>));</span><br><span class="line">            var4.setDoclastmoddate(Util.null2String(var5.getString(<span class="string">&quot;doclastmoddate&quot;</span>)));</span><br><span class="line">            var4.setDoclastmodtime(Util.null2String(var5.getString(<span class="string">&quot;doclastmodtime&quot;</span>)));</span><br><span class="line">            var4.setDocapproveuserid(var5.getInt(<span class="string">&quot;docapproveuserid&quot;</span>));</span><br><span class="line">            var4.setDocapproveusertype(Util.getIntValue(Util.null2String(var5.getString(<span class="string">&quot;docApproveUserType&quot;</span>))));</span><br><span class="line">            var4.setDocapproveusername(var4.getDocapproveusertype() == <span class="number">1</span> ? var13.getResourcename(var4.getDocapproveuserid() + <span class="string">&quot;&quot;</span>) : var12.getCustomerInfoname(var4.getDocapproveuserid() + <span class="string">&quot;&quot;</span>));</span><br><span class="line">            var4.setDocapprovedate(Util.null2String(var5.getString(<span class="string">&quot;docapprovedate&quot;</span>)));</span><br><span class="line">            var4.setDocapprovetime(Util.null2String(var5.getString(<span class="string">&quot;docapprovetime&quot;</span>)));</span><br><span class="line">            var4.setDocinvaluserid(var5.getInt(<span class="string">&quot;docInvalUserId&quot;</span>));</span><br><span class="line">            var4.setDocinvalusertype(Util.getIntValue(Util.null2String(var5.getString(<span class="string">&quot;docInvalUserType&quot;</span>))));</span><br><span class="line">            var4.setDocinvalusername(var4.getDocinvalusertype() == <span class="number">1</span> ? var13.getResourcename(var4.getDocinvaluserid() + <span class="string">&quot;&quot;</span>) : var12.getCustomerInfoname(var4.getDocinvaluserid() + <span class="string">&quot;&quot;</span>));</span><br><span class="line">            var4.setDocinvaldate(Util.null2String(var5.getString(<span class="string">&quot;docInvalDate&quot;</span>)));</span><br><span class="line">            var4.setDocinvaltime(Util.null2String(var5.getString(<span class="string">&quot;docInvalTime&quot;</span>)));</span><br><span class="line">            var4.setDocarchiveuserid(var5.getInt(<span class="string">&quot;docarchiveuserid&quot;</span>));</span><br><span class="line">            var4.setDocarchiveusertype(Util.getIntValue(Util.null2String(var5.getString(<span class="string">&quot;docArchiveUserType&quot;</span>))));</span><br><span class="line">            var4.setDocarchiveusername(var4.getDocarchiveusertype() == <span class="number">1</span> ? var13.getResourcename(var4.getDocarchiveuserid() + <span class="string">&quot;&quot;</span>) : var12.getCustomerInfoname(var4.getDocarchiveuserid() + <span class="string">&quot;&quot;</span>));</span><br><span class="line">            var4.setDocarchivedate(Util.null2String(var5.getString(<span class="string">&quot;docarchivedate&quot;</span>)));</span><br><span class="line">            var4.setDocarchivetime(Util.null2String(var5.getString(<span class="string">&quot;docarchivetime&quot;</span>)));</span><br><span class="line">            var4.setDoccanceluserid(var5.getInt(<span class="string">&quot;docCancelUserId&quot;</span>));</span><br><span class="line">            var4.setDoccancelusertype(Util.getIntValue(Util.null2String(var5.getString(<span class="string">&quot;docCancelUserType&quot;</span>))));</span><br><span class="line">            var4.setDoccancelusername(var4.getDoccancelusertype() == <span class="number">1</span> ? var13.getResourcename(var4.getDoccanceluserid() + <span class="string">&quot;&quot;</span>) : var12.getCustomerInfoname(var4.getDoccanceluserid() + <span class="string">&quot;&quot;</span>));</span><br><span class="line">            var4.setDoccanceldate(Util.null2String(var5.getString(<span class="string">&quot;docCancelDate&quot;</span>)));</span><br><span class="line">            var4.setDoccanceltime(Util.null2String(var5.getString(<span class="string">&quot;docCancelTime&quot;</span>)));</span><br><span class="line">            var4.setMaindoc(var5.getInt(<span class="string">&quot;mainDoc&quot;</span>));</span><br><span class="line">            var4.setOwnerid(var5.getInt(<span class="string">&quot;ownerid&quot;</span>));</span><br><span class="line">            var4.setOwnertype(Util.getIntValue(Util.null2String(var5.getString(<span class="string">&quot;ownerType&quot;</span>))));</span><br><span class="line">            var4.setOwnername(var4.getOwnertype() == <span class="number">1</span> ? var13.getResourcename(var4.getOwnerid() + <span class="string">&quot;&quot;</span>) : var12.getCustomerInfoname(var4.getOwnerid() + <span class="string">&quot;&quot;</span>));</span><br><span class="line">            var4.setInvalidationdate(Util.null2String(var5.getString(<span class="string">&quot;invalidationdate&quot;</span>)));</span><br><span class="line">            var4.setHrmresid(var5.getInt(<span class="string">&quot;hrmresid&quot;</span>));</span><br><span class="line">            var4.setAssetid(var5.getInt(<span class="string">&quot;assetid&quot;</span>));</span><br><span class="line">            var4.setCrmid(var5.getInt(<span class="string">&quot;hrmresid&quot;</span>));</span><br><span class="line">            var4.setItemid(var5.getInt(<span class="string">&quot;itemid&quot;</span>));</span><br><span class="line">            var4.setProjectid(var5.getInt(<span class="string">&quot;projectid&quot;</span>));</span><br><span class="line">            var4.setFinanceid(var5.getInt(<span class="string">&quot;financeid&quot;</span>));</span><br><span class="line">            var4.setIsreply(var5.getString(<span class="string">&quot;isreply&quot;</span>));</span><br><span class="line">            var4.setReplydocid(var5.getInt(<span class="string">&quot;replydocid&quot;</span>));</span><br><span class="line">            var4.setAccessorycount(var5.getInt(<span class="string">&quot;accessorycount&quot;</span>));</span><br><span class="line">            var4.setReplaydoccount(var5.getInt(<span class="string">&quot;replaydoccount&quot;</span>));</span><br><span class="line">            DocAttachment[] var23;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">&quot;&quot;</span>.indexOf(<span class="string">&quot;,getAttachment,&quot;</span>) == -<span class="number">1</span>) &#123;</span><br><span class="line">                var23 = <span class="built_in">this</span>.getAttachment(var4);</span><br><span class="line">                var4.setAttachments(var23);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> var4;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> DocAttachment[] getAttachment(DocInfo var1) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">ArrayList</span> <span class="variable">var2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        <span class="type">ImageFileManager</span> <span class="variable">var3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ImageFileManager</span>();</span><br><span class="line">        <span class="type">DocImageManager</span> <span class="variable">var4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DocImageManager</span>();</span><br><span class="line">        var4.resetParameter();</span><br><span class="line">        var4.setDocid(var1.getId());</span><br><span class="line">        var4.selectDocImageInfo2();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="type">int</span> var5;</span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (!var4.next()) &#123;</span><br><span class="line">                    DocAttachment[] var18 = <span class="keyword">new</span> <span class="title class_">DocAttachment</span>[var2.size()];</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">var19</span> <span class="operator">=</span> <span class="number">0</span>; var19 &lt; var2.size(); ++var19) &#123;</span><br><span class="line">                        var18[var19] = (DocAttachment)var2.get(var19);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">return</span> var18;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                var5 = Util.getIntValue(var4.getImagefileid());</span><br><span class="line">            &#125; <span class="keyword">while</span>(var5 &lt; <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            <span class="type">DocAttachment</span> <span class="variable">var6</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DocAttachment</span>();</span><br><span class="line">            var6.setDocImageFileId(var4.getId());</span><br><span class="line">            var6.setDocid(var1.getId());</span><br><span class="line">            var6.setImagefileid(var5);</span><br><span class="line">            var6.setImagefilename(var4.getImagefilename());</span><br><span class="line">            var6.setImagefiledesc(var4.getImagefiledesc());</span><br><span class="line">            var6.setImagefilewidth(var4.getimagefilewidth());</span><br><span class="line">            var6.setImagefileheight(var4.getImagefileheight());</span><br><span class="line">            var6.setImagefilesize(var4.getImagefielsize());</span><br><span class="line">            var6.setDocfiletype(var4.getDocfiletype());</span><br><span class="line">            var6.setVersionId(var4.getVersionId());</span><br><span class="line">            var6.setVersionDetail(var4.getVersionDetail());</span><br><span class="line">            var6.setIsextfile(var4.getIsextfile());</span><br><span class="line">            <span class="type">byte</span>[] var8 = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">var9</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            var3.getImageFileInfoById(var5);</span><br><span class="line">            var9 = var3.getInputStream();</span><br><span class="line">            <span class="keyword">if</span> (var9 != <span class="literal">null</span>) &#123;</span><br><span class="line">                var6.setFilename(var3.getImageFileName());</span><br><span class="line">                var6.setFiletype(var3.getImageFileType());</span><br><span class="line">                var6.setFilerealpath(var3.getFileRealPath());</span><br><span class="line">                var6.setIszip(Util.getIntValue(var3.getIsZip()));</span><br><span class="line">                var6.setIsencrype(Util.getIntValue(var3.getIsencrypt()));</span><br><span class="line">                var6.setIsAesEncrype(var3.getIsaesencrypt());</span><br><span class="line">                var6.setAesCode(var3.getAescode());</span><br><span class="line">                <span class="type">String</span> <span class="variable">var10</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="type">ByteArrayOutputStream</span> <span class="variable">var11</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    var11 = <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line"></span><br><span class="line">                    <span class="type">int</span> var7;</span><br><span class="line">                    <span class="keyword">while</span>((var7 = var9.read(var8)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                        var11.write(var8, <span class="number">0</span>, var7);</span><br><span class="line">                        var11.flush();</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    var10 = org.apache.axis.encoding.Base64.encode(var11.toByteArray());</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception var16) &#123;</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (var9 != <span class="literal">null</span>) &#123;</span><br><span class="line">                        var9.close();</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (var11 != <span class="literal">null</span>) &#123;</span><br><span class="line">                        var11.flush();</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (var11 != <span class="literal">null</span>) &#123;</span><br><span class="line">                        var11.close();</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                var6.setFilecontent(var10);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            var2.add(var6);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取文件名</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span>  String <span class="title function_">getFileName2</span><span class="params">(String fileId)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">DocInfo</span> <span class="variable">docByUser</span> <span class="operator">=</span> <span class="built_in">this</span>.getDocByUser(Integer.parseInt(fileId));</span><br><span class="line">            DocAttachment[] attachments = docByUser.getAttachments();</span><br><span class="line">            <span class="type">DocAttachment</span> <span class="variable">attachment</span> <span class="operator">=</span> attachments[<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">return</span> attachment.getFilename();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 给指定用户授权文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> filedIds 文件id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> applicant 用户id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">empower</span><span class="params">(List&lt;String&gt; filedIds,String applicant,String startTime,String expiredTime,String wjqx)</span>&#123;</span><br><span class="line">        <span class="type">BaseBean</span> <span class="variable">baseBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BaseBean</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">account</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select loginid from hrmresource where id = &quot;</span> + applicant + <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="type">RecordSet</span> <span class="variable">recordSet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RecordSet</span>();</span><br><span class="line">            recordSet.execute(sql);</span><br><span class="line">            <span class="keyword">while</span> (recordSet.next())&#123;</span><br><span class="line">                account = recordSet.getString(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//获取token</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="string">&quot;&#123;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;loginName\&quot;: \&quot;admin\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;ipAddress\&quot;: \&quot;172.16.1.6\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;integrationKey\&quot;: \&quot;46aa92ec-66af-4818-b7c1-8495a9bd7f17\&quot;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">tokenRes</span> <span class="operator">=</span> HttpUtil.sendPostReq(url, param, <span class="string">&quot;utf-8&quot;</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(tokenRes);</span><br><span class="line">            <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">            <span class="comment">//获取用户信息</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">preUrl</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;formprocessnode&quot;</span>, <span class="string">&quot;efile_pre_url&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> HttpUtil.get(preUrl+<span class="string">&quot;/api/services/OrgUser/GetUserInfoByAccount?token=&quot;</span> + token + <span class="string">&quot;&amp;account=&quot;</span> + account);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isEmpty(s))&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;用户不存在!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject1</span> <span class="operator">=</span> JSON.parseObject(s);</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">data</span> <span class="operator">=</span> jsonObject1.getJSONObject(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">identityId</span> <span class="operator">=</span> data.getString(<span class="string">&quot;IdentityId&quot;</span>);</span><br><span class="line">            <span class="comment">//给文件授权</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">permCateId</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.equals(wjqx,<span class="string">&quot;0&quot;</span>))&#123;</span><br><span class="line">                permCateId = <span class="string">&quot;2&quot;</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                permCateId = <span class="string">&quot;3&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (String filedId : filedIds) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">param2</span> <span class="operator">=</span> <span class="string">&quot;&#123;\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;token\&quot;: \&quot;&quot;</span>+token + <span class="string">&quot;\&quot;,\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;fileId\&quot;: &quot;</span>+ Integer.parseInt(filedId) +<span class="string">&quot;,\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;permCateId\&quot;: &quot;</span>+permCateId+<span class="string">&quot;,\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;startTime\&quot;: \&quot;&quot;</span>+startTime+<span class="string">&quot;\&quot;,\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;expiredTime\&quot;: \&quot;&quot;</span> + expiredTime +<span class="string">&quot;\&quot;,\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;permType\&quot;: 2,\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;identityId\&quot;: &quot;</span> + identityId+ <span class="string">&quot;\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">                baseBean.writeLog(<span class="string">&quot;[文件授权]&quot;</span>+param2);</span><br><span class="line">                <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> HttpUtil.sendPostReq(preUrl+<span class="string">&quot;/api/services/FilePermission/SetUserPermission&quot;</span>, param2, <span class="string">&quot;utf-8&quot;</span>, <span class="number">0</span>);</span><br><span class="line">                <span class="type">JSONObject</span> <span class="variable">jsonObject2</span> <span class="operator">=</span> JSON.parseObject(result);</span><br><span class="line">                <span class="type">String</span> <span class="variable">result1</span> <span class="operator">=</span> jsonObject2.getString(<span class="string">&quot;result&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span> (!StringUtils.equals(result1,<span class="string">&quot;0&quot;</span>))&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 给指定用户授权文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> folederIds 文件夹id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> applicant 用户id</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">empowerFolder</span><span class="params">(List&lt;String&gt; folederIds,String applicant,String startTime,String expiredTime,String wjqx)</span>&#123;</span><br><span class="line">        <span class="type">BaseBean</span> <span class="variable">baseBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BaseBean</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">account</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select loginid from hrmresource where id = &quot;</span> + applicant + <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="type">RecordSet</span> <span class="variable">recordSet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RecordSet</span>();</span><br><span class="line">            recordSet.execute(sql);</span><br><span class="line">            <span class="keyword">while</span> (recordSet.next())&#123;</span><br><span class="line">                account = recordSet.getString(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//获取token</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="string">&quot;&#123;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;loginName\&quot;: \&quot;admin\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;ipAddress\&quot;: \&quot;172.16.1.6\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;integrationKey\&quot;: \&quot;46aa92ec-66af-4818-b7c1-8495a9bd7f17\&quot;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">tokenRes</span> <span class="operator">=</span> HttpUtil.sendPostReq(url, param, <span class="string">&quot;utf-8&quot;</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(tokenRes);</span><br><span class="line">            <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">            <span class="comment">//获取用户信息</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">preUrl</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;formprocessnode&quot;</span>, <span class="string">&quot;efile_pre_url&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> HttpUtil.get(preUrl+<span class="string">&quot;/api/services/OrgUser/GetUserInfoByAccount?token=&quot;</span> + token + <span class="string">&quot;&amp;account=&quot;</span> + account);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isEmpty(s))&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;用户不存在!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject1</span> <span class="operator">=</span> JSON.parseObject(s);</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">data</span> <span class="operator">=</span> jsonObject1.getJSONObject(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">identityId</span> <span class="operator">=</span> data.getString(<span class="string">&quot;IdentityId&quot;</span>);</span><br><span class="line">            <span class="comment">//给文件授权</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">permCateId</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.equals(wjqx,<span class="string">&quot;0&quot;</span>))&#123;</span><br><span class="line">                permCateId = <span class="string">&quot;8&quot;</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                permCateId = <span class="string">&quot;9&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (String folderId : folederIds) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">param2</span> <span class="operator">=</span> <span class="string">&quot;&#123;\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;token\&quot;: \&quot;&quot;</span>+token + <span class="string">&quot;\&quot;,\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;folderId\&quot;: &quot;</span>+ Integer.parseInt(folderId) +<span class="string">&quot;,\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;permCateId\&quot;: &quot;</span>+permCateId+<span class="string">&quot;,\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;startTime\&quot;: \&quot;&quot;</span>+startTime+<span class="string">&quot;\&quot;,\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;expiredTime\&quot;: \&quot;&quot;</span> + expiredTime +<span class="string">&quot;\&quot;,\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;permType\&quot;: 1,\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;  \&quot;identityId\&quot;: &quot;</span> + identityId+ <span class="string">&quot;\n&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">                baseBean.writeLog(<span class="string">&quot;[文件授权]&quot;</span>+param2);</span><br><span class="line">                <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> HttpUtil.sendPostReq(preUrl+<span class="string">&quot;/api/services/FolderPermission/SetUserPermission&quot;</span>, param2, <span class="string">&quot;utf-8&quot;</span>, <span class="number">0</span>);</span><br><span class="line">                <span class="type">JSONObject</span> <span class="variable">jsonObject2</span> <span class="operator">=</span> JSON.parseObject(result);</span><br><span class="line">                <span class="type">String</span> <span class="variable">result1</span> <span class="operator">=</span> jsonObject2.getString(<span class="string">&quot;result&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span> (!StringUtils.equals(result1,<span class="string">&quot;0&quot;</span>))&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 同步电子档案系统的文件夹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">syhcFolder</span><span class="params">(String  costName,String parent)</span> &#123;</span><br><span class="line">        <span class="type">BaseBean</span> <span class="variable">baseBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BaseBean</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">folder</span> <span class="operator">=</span> <span class="built_in">this</span>.createFolder(costName, costName, parent);<span class="comment">//创建文件夹资料</span></span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isEmpty(folder))&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;创建文件夹资料失败&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">String</span> <span class="variable">modeId</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;hisun&quot;</span>, <span class="string">&quot;efile_form_mode_id&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">formName</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;hisun&quot;</span>, <span class="string">&quot;efile_form_name&quot;</span>);</span><br><span class="line">            <span class="comment">//同步到电子档案系统</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into &quot;</span>+formName+<span class="string">&quot; (costname,pkcostsubj,sealflag,pkparent,lx,formmodeid) VALUES (&#x27;&quot;</span> + costName  +<span class="string">&quot;&#x27;, &quot;</span> + folder + <span class="string">&quot;,0,&quot;</span> +parent +<span class="string">&quot;,&#x27;文件夹&#x27;,&quot;</span>+modeId+<span class="string">&quot;)&quot;</span>;</span><br><span class="line">            <span class="type">RecordSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RecordSet</span>();</span><br><span class="line">            rs.execute(sql);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            baseBean.writeLog(<span class="string">&quot;同步电子档案系统文件夹失败&quot;</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 修改文件名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> costname</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileId</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">updateFileName</span><span class="params">(String costname, String fileId)</span> &#123;</span><br><span class="line">        <span class="type">BaseBean</span> <span class="variable">baseBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BaseBean</span>();</span><br><span class="line">        baseBean.writeLog(<span class="string">&quot;更新文件名称:&quot;</span>+costname+<span class="string">&quot;:&quot;</span>+fileId);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//获取tokenx</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="string">&quot;&#123;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;loginName\&quot;: \&quot;admin\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;ipAddress\&quot;: \&quot;172.16.1.6\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;integrationKey\&quot;: \&quot;46aa92ec-66af-4818-b7c1-8495a9bd7f17\&quot;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">tokenRes</span> <span class="operator">=</span> HttpUtil.sendPostReq(url, param, <span class="string">&quot;utf-8&quot;</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(tokenRes);</span><br><span class="line">            <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">param2</span> <span class="operator">=</span> <span class="string">&quot;&#123;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;token\&quot;: \&quot;&quot;</span>+token+<span class="string">&quot;\&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;docId\&quot;: &quot;</span>+fileId+<span class="string">&quot;,\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;  \&quot;newName\&quot;: \&quot;&quot;</span>+costname+<span class="string">&quot;\&quot;\n&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">preUrl</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;formprocessnode&quot;</span>, <span class="string">&quot;efile_pre_url&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> HttpUtil.sendPostReq(preUrl+<span class="string">&quot;/api/services/File/RenameFile&quot;</span>, param2, <span class="string">&quot;utf-8&quot;</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="type">JSONObject</span> <span class="variable">jsonObject2</span> <span class="operator">=</span> JSON.parseObject(result);</span><br><span class="line">            <span class="type">String</span> <span class="variable">result1</span> <span class="operator">=</span> jsonObject2.getString(<span class="string">&quot;result&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.equals(result1, <span class="string">&quot;0&quot;</span>)) &#123;</span><br><span class="line">                <span class="type">JSONObject</span> <span class="variable">data</span> <span class="operator">=</span> jsonObject2.getJSONObject(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span> (data != <span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取文件的MD5值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMD5</span><span class="params">(String fileId)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">fileContent</span> <span class="operator">=</span> <span class="built_in">this</span>.getFileContent(fileId);</span><br><span class="line">            <span class="type">byte</span>[] content = Base64.decode(fileContent);</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayInputStream</span>(content);</span><br><span class="line">            <span class="type">MessageDigest</span> <span class="variable">md</span> <span class="operator">=</span> MessageDigest.getInstance(<span class="string">&quot;MD5&quot;</span>);</span><br><span class="line">            <span class="type">byte</span>[] dataBytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="type">int</span> bytesRead;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> ((bytesRead = fis.read(dataBytes)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                md.update(dataBytes, <span class="number">0</span>, bytesRead);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">byte</span>[] mdBytes = md.digest();</span><br><span class="line">            <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">byte</span> mdByte : mdBytes) &#123;</span><br><span class="line">                sb.append(Integer.toString((mdByte &amp; <span class="number">0xff</span>) + <span class="number">0x100</span>, <span class="number">16</span>).substring(<span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            fis.close();</span><br><span class="line">            <span class="keyword">return</span> sb.toString();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException | IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 根据文档云的文件id获取MD5值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMD5ByFileId</span><span class="params">(String fileId)</span> <span class="keyword">throws</span> IOException, NoSuchAlgorithmException, InterruptedException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fileUrl</span> <span class="operator">=</span> <span class="built_in">this</span>.getDownLoadFileUrl(fileId);</span><br><span class="line">        <span class="comment">// 下载文件</span></span><br><span class="line">        <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(fileUrl);</span><br><span class="line">        <span class="comment">// 打开压缩文件流</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">zipInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(url.openStream());</span><br><span class="line">        <span class="type">ZipInputStream</span> <span class="variable">zis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ZipInputStream</span>(zipInputStream);</span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">4096</span>];</span><br><span class="line">        ZipEntry zipEntry;</span><br><span class="line">        <span class="type">MessageDigest</span> <span class="variable">md5Digest</span> <span class="operator">=</span> MessageDigest.getInstance(<span class="string">&quot;MD5&quot;</span>);</span><br><span class="line">        <span class="comment">// 遍历压缩文件中的每个文件</span></span><br><span class="line">        <span class="keyword">while</span> ((zipEntry = zis.getNextEntry()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> zipEntry.getName();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 判断是否为目标文件</span></span><br><span class="line">            <span class="keyword">if</span> (fileName.equals(<span class="string">&quot;folderName/fileName&quot;</span>)) &#123;</span><br><span class="line">                <span class="comment">// 读取文件内容以更新MD5摘要信息</span></span><br><span class="line">                <span class="type">int</span> readBytes;</span><br><span class="line">                <span class="keyword">while</span> ((readBytes = zis.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                    md5Digest.update(buffer, <span class="number">0</span>, readBytes);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>; <span class="comment">// 找到目标文件后终止循环</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 关闭当前文件流，并进入下一个文件</span></span><br><span class="line">            zis.closeEntry();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        zis.close();</span><br><span class="line">        zipInputStream.close();</span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] md5Bytes = md5Digest.digest();</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">byte</span> b : md5Bytes) &#123;</span><br><span class="line">            sb.append(String.format(<span class="string">&quot;%02x&quot;</span>, b &amp; <span class="number">0xff</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>   sb.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取下载文档云文件的URL地址</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">getDownLoadFileUrl</span><span class="params">(String fileId)</span> <span class="keyword">throws</span> IOException, InterruptedException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">resultValue</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//重试20次 压缩文件有时候会需要时间下载</span></span><br><span class="line">        <span class="keyword">while</span> (count &lt; <span class="number">20</span> || StringUtils.isEmpty(resultValue))&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//获取tokenx</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="string">&quot;&#123;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;  \&quot;loginName\&quot;: \&quot;admin\&quot;,\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;  \&quot;ipAddress\&quot;: \&quot;172.16.1.6\&quot;,\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;  \&quot;integrationKey\&quot;: \&quot;46aa92ec-66af-4818-b7c1-8495a9bd7f17\&quot;\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">tokenRes</span> <span class="operator">=</span> HttpUtil.sendPostReq(url, param, <span class="string">&quot;utf-8&quot;</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(tokenRes);</span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> jsonObject.getString(<span class="string">&quot;data&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">preUrl</span> <span class="operator">=</span> Prop.getPropValue(<span class="string">&quot;formprocessnode&quot;</span>, <span class="string">&quot;efile_pre_url&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> HttpUtil.get(preUrl+<span class="string">&quot;/DownLoad/DownLoadCheck?token=&quot;</span>+token+<span class="string">&quot;&amp;fileIds=&quot;</span>+fileId+<span class="string">&quot;&amp;folderIds=7809135&quot;</span>);</span><br><span class="line">                <span class="type">JSONObject</span> <span class="variable">jsonObject2</span> <span class="operator">=</span> JSON.parseObject(result);</span><br><span class="line">                <span class="type">String</span> <span class="variable">regionHash</span> <span class="operator">=</span> jsonObject2.getString(<span class="string">&quot;RegionHash&quot;</span>);</span><br><span class="line">                <span class="comment">//获取taskid</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">formData</span> <span class="operator">=</span> <span class="string">&quot;async=true&quot;</span>;</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">result2</span> <span class="operator">=</span> HttpUtil.post(preUrl+<span class="string">&quot;/downLoad/index?regionHash=&quot;</span>+regionHash+<span class="string">&quot;&amp;async=false&amp;fileIds=&quot;</span>+fileId+<span class="string">&quot;&amp;token=&quot;</span>+token +<span class="string">&quot;&amp;folderIds=7809135&quot;</span>,formData);</span><br><span class="line">                <span class="type">JSONObject</span> <span class="variable">jsonObject3</span> <span class="operator">=</span> JSON.parseObject(result2);</span><br><span class="line"></span><br><span class="line">                <span class="type">String</span> <span class="variable">pTaskId</span> <span class="operator">=</span> jsonObject3.getString(<span class="string">&quot;pTaskId&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">//获取压缩进度</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">tryCount</span> <span class="operator">=</span><span class="number">0</span> ;</span><br><span class="line">                <span class="type">String</span> <span class="variable">zipName</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">                <span class="keyword">while</span> (tryCount &lt; <span class="number">20</span> || StringUtils.isEmpty(zipName) )&#123;</span><br><span class="line">                    Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">                    <span class="type">String</span> <span class="variable">result3</span> <span class="operator">=</span> HttpUtil.get(preUrl+<span class="string">&quot;/WebCore?module=WebClient&amp;fun=GetZipProgress&amp;pTaskId=&quot;</span>+pTaskId +<span class="string">&quot;&amp;token=&quot;</span>+token);</span><br><span class="line">                    <span class="type">JSONObject</span> <span class="variable">jsonObject4</span> <span class="operator">=</span> JSON.parseObject(result3);</span><br><span class="line">                    zipName = jsonObject4.getString(<span class="string">&quot;zipName&quot;</span>);</span><br><span class="line">                    <span class="keyword">if</span> (StringUtils.isNotEmpty(zipName))&#123;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    tryCount++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (StringUtils.isEmpty(zipName))&#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//获取MD5值</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">fileUrl</span> <span class="operator">=</span> <span class="string">&quot;https://ecm.hisunpharm.com:6688/downLoad/GetFile?fileName=&quot;</span>+zipName;</span><br><span class="line">                <span class="comment">//获取到文件路径</span></span><br><span class="line">                resultValue = fileUrl;</span><br><span class="line">                count++;</span><br><span class="line">                <span class="keyword">if</span> (StringUtils.isNotEmpty(zipName))&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resultValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 工具类 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CR2023000780 MD5校验问题</title>
      <link href="/2023/12/26/oa%E5%8F%91%E5%B8%83/2023/MD5%E6%A0%A1%E9%AA%8C%E9%97%AE%E9%A2%98/"/>
      <url>/2023/12/26/oa%E5%8F%91%E5%B8%83/2023/MD5%E6%A0%A1%E9%AA%8C%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="CR2023000780-MD5校验问题"><a href="#CR2023000780-MD5校验问题" class="headerlink" title="CR2023000780 MD5校验问题"></a>CR2023000780 MD5校验问题</h1><h2 id="后端代码"><a href="#后端代码" class="headerlink" title="后端代码"></a>后端代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/usr/weaver/ecology/classbean/hisun/util -&gt;</span><br><span class="line">hisun.util.EfileUtil</span><br><span class="line">hisun.util.HttpUtil</span><br><span class="line"></span><br><span class="line">/usr/weaver/ecology/classbean/hisun/action -&gt;</span><br><span class="line">hisun.action.UpLoadEfileAction</span><br><span class="line"></span><br><span class="line">/usr/weaver/ecology/classbean/hisun/cron</span><br><span class="line">hisun.cron.EfileMD5CheckCron</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>配置动态参数</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">efile_md5_check_email=ira@hisunpharm.com,lfyang@hisunpharm.com</span><br></pre></td></tr></table></figure><h2 id="表单建模"><a href="#表单建模" class="headerlink" title="表单建模"></a>表单建模</h2><p>1.新增MD5操作</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231221150105739.png" alt="image-20231221150105739" style="zoom:50%;" /><h1 id="工具类"><a href="#工具类" class="headerlink" title="工具类"></a>工具类</h1><p>获取MD5值的工具类在</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hisun.util.EfileUtil#getMD5ByFileId</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 发布 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA发布 </tag>
            
            <tag> 电子档案移交流程 </tag>
            
            <tag> 档案室发布 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>组织架构</title>
      <link href="/2023/12/26/oa/%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84/"/>
      <url>/2023/12/26/oa/%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<h1 id="组织架构"><a href="#组织架构" class="headerlink" title="组织架构"></a>组织架构</h1><h2 id="一级部门负责人"><a href="#一级部门负责人" class="headerlink" title="一级部门负责人"></a>一级部门负责人</h2><table><thead><tr><th>部门</th><th>姓名</th></tr></thead><tbody><tr><td>人资</td><td>国健</td></tr><tr><td>财管</td><td>蒋灵</td></tr><tr><td>生成运营与信息</td><td>金红顺</td></tr><tr><td>质管、制剂</td><td>路兴海</td></tr><tr><td>原料药</td><td>杨志清</td></tr><tr><td>党群</td><td>陈家胜</td></tr><tr><td>工会</td><td>戴激扬</td></tr><tr><td>审计</td><td>彭均</td></tr><tr><td>公共事务</td><td>杜加秋</td></tr><tr><td>战投</td><td>邓久发</td></tr><tr><td>CEO</td><td>肖卫红</td></tr><tr><td>董事</td><td>沈星虎</td></tr><tr><td>信息技术中心</td><td>张勇平</td></tr></tbody></table><h2 id="二级部门负责人"><a href="#二级部门负责人" class="headerlink" title="二级部门负责人"></a>二级部门负责人</h2><h3 id="生产运营信息技术中心"><a href="#生产运营信息技术中心" class="headerlink" title="生产运营信息技术中心"></a>生产运营信息技术中心</h3><table><thead><tr><th>部门</th><th>姓名</th></tr></thead><tbody><tr><td>供应链</td><td>徐辉</td></tr><tr><td>EHS管理</td><td>卢炯</td></tr><tr><td>综管</td><td>林益</td></tr><tr><td>安装</td><td>陶招顺</td></tr><tr><td>工程装备</td><td>邵文俊</td></tr></tbody></table><h3 id="财务管理中心"><a href="#财务管理中心" class="headerlink" title="财务管理中心"></a>财务管理中心</h3><table><thead><tr><th>部门</th><th>姓名</th></tr></thead><tbody><tr><td>工程装备监管与工程预算管理</td><td>冷如冰</td></tr><tr><td>本部&#x2F;富阳预算管理</td><td>董潍</td></tr><tr><td>本部会计结算</td><td>余兵</td></tr><tr><td>本部资金管理</td><td>黄硕</td></tr><tr><td>会计结算富阳</td><td>李新龙</td></tr><tr><td>资金结算富阳</td><td>汪小波</td></tr><tr><td>财务管理南通</td><td>赵冬生</td></tr></tbody></table><h3 id="人力资源中心"><a href="#人力资源中心" class="headerlink" title="人力资源中心"></a>人力资源中心</h3><table><thead><tr><th>部门</th><th>姓名</th></tr></thead><tbody><tr><td>台州业务伙伴</td><td>王建平</td></tr><tr><td>海南南通</td><td>顾昊</td></tr><tr><td>杭州人力资源</td><td>邵桂芳</td></tr><tr><td>组织发展</td><td>姜思思</td></tr><tr><td>绩效管理</td><td>姜思思</td></tr><tr><td>人力运营</td><td>张晓静</td></tr><tr><td>薪酬福利</td><td>陈娇</td></tr><tr><td>人才发展</td><td>国健</td></tr><tr><td>富阳南通业务伙伴</td><td>吴恩国</td></tr></tbody></table><h3 id="质量管理"><a href="#质量管理" class="headerlink" title="质量管理"></a>质量管理</h3><table><thead><tr><th>部门</th><th>姓名</th></tr></thead><tbody><tr><td>质量体系管理</td><td>夏德生</td></tr><tr><td>药物警戒</td><td>陈方青</td></tr><tr><td>分析技术</td><td>杨荷友</td></tr><tr><td>质量战略</td><td>胡丹</td></tr><tr><td>GMP事务</td><td>颜润江</td></tr><tr><td>台州质量</td><td>周臻弘</td></tr><tr><td>富阳质量</td><td>朱红伟</td></tr><tr><td>南通质量</td><td>黄晶</td></tr></tbody></table><h3 id="制剂业务板块"><a href="#制剂业务板块" class="headerlink" title="制剂业务板块"></a>制剂业务板块</h3><table><thead><tr><th>部门</th><th>姓名</th></tr></thead><tbody><tr><td>中央商务部</td><td>殷海燕</td></tr><tr><td>制剂国际销售部</td><td>赵洪</td></tr><tr><td>制剂研究院</td><td>高华</td></tr><tr><td>制剂台州工厂</td><td>凌荣华</td></tr><tr><td>制剂富阳工厂</td><td>林巨建</td></tr><tr><td>省公司</td><td>斯元龙</td></tr><tr><td>综管</td><td>洪芳娇</td></tr></tbody></table><h3 id="原料药业务板块"><a href="#原料药业务板块" class="headerlink" title="原料药业务板块"></a>原料药业务板块</h3><table><thead><tr><th>部门</th><th>姓名</th></tr></thead><tbody><tr><td>技术与项目管理部</td><td>吴忠伟</td></tr><tr><td>生成与计划部</td><td>陈光辉</td></tr><tr><td>营销中心</td><td>顾钦</td></tr><tr><td>研究院</td><td>孙鹏</td></tr><tr><td>台州工厂</td><td>张超</td></tr><tr><td>富阳工厂</td><td>潘剑</td></tr><tr><td>南通工厂</td><td>徐伟伟</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> OA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA </tag>
            
            <tag> 组织架构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SRM系统资源</title>
      <link href="/2023/12/26/srm/SRM%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90/"/>
      <url>/2023/12/26/srm/SRM%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90/</url>
      
        <content type="html"><![CDATA[<p>SRM系统资源</p><h2 id="测试环境账密"><a href="#测试环境账密" class="headerlink" title="测试环境账密"></a>测试环境账密</h2><p>九翊<br> PC端地址：<a href="https://tsrm.jiuyisoft.com/">https://tsrm.jiuyisoft.com</a><br> 策略采购员: 万丽 账号：wanl 密码：710386<br> 浙江天蓝科技有限公司: 阿香桃, 账号：V0053344 密码：585154</p><p> 甄云<br> <a href="https://isrm-demo.hand-china.com/">https://isrm-demo.hand-china.com/</a><br> 账号：18894045109 密码：DEMO123456<br> 供应商 18894564765&#x2F;18898767890 密码：DEMO123456</p><p> 京桥通<br> <a href="http://caigougys.weaver.com.cn/">http://caigougys.weaver.com.cn/</a><br> 账号：zhangsan 密码：1</p>]]></content>
      
      
      <categories>
          
          <category> SRM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 供应链 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OA发布注意事项</title>
      <link href="/2023/12/26/oa/OA%E5%8F%91%E5%B8%83%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/"/>
      <url>/2023/12/26/oa/OA%E5%8F%91%E5%B8%83%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/</url>
      
        <content type="html"><![CDATA[<p>OA发布注意事项</p><ul><li><p><strong>退回全部改成 自由退回 并且同步</strong></p></li><li><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/1687145805758-0a36b969-ec79-4e84-833c-61641bd9dcf2.png" alt="img"></p></li><li><p><strong>转发都开起来</strong></p></li><li><p><strong>转办 改成加签</strong></p></li><li><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/1687146229437-fb223663-a984-4211-b984-a2e433bc4b9c.png" alt="img"></p></li><li><p><strong>签字意见 退回 意见征询</strong> </p></li><li><p><strong>流程编号 要更新最新的编号 出口信息一定要维护</strong></p></li><li><p><strong>附件目录要备注一下，附件上传大小要注意调整（发布说明）</strong></p></li><li><p><strong>ecode要进行说明（发布说明）</strong></p></li><li><p><strong>基础数据维护发布要备注（发布说明）</strong></p></li><li><p><strong>需要配置ecode  和 附件路径（发布说明）</strong></p></li><li><p><strong>校验流程判断模块数据是否必填</strong></p></li><li><p><strong>流程编号打开，并且要加上年份和业务代号</strong></p></li><li><p><strong>发起人选择海正药业分部</strong></p></li><li><p><strong>创建节点才可以删除附件</strong></p></li><li><p>**移动端配置 **</p></li><li><p><strong>ASL事件和授权配置要放到发布说明里面（发布说明）</strong></p></li><li><p><strong>条件节点要注意是否所有条件都能走到，是否存在条件尚未被覆盖到的情况</strong></p></li><li><p><strong>存在删除节点的情况必须升版</strong></p></li><li><p><strong>升版以后必须重新配置ASL时间和授权配置</strong></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> OA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OA资源</title>
      <link href="/2023/12/26/oa/%E8%B4%A6%E5%AF%86/"/>
      <url>/2023/12/26/oa/%E8%B4%A6%E5%AF%86/</url>
      
        <content type="html"><![CDATA[<p>OA资源</p><h2 id="账密"><a href="#账密" class="headerlink" title="账密"></a>账密</h2><p>OA开发环境：<a href="http://172.16.5.124:8898/">http://172.16.5.124:8898</a><br>验证环境：<a href="http://172.16.5.132:8898/">http://172.16.5.132:8898/</a></p><p>系统管理员账号sysadmin    密码X4PtYv   人员密码: HGA1DljidB  </p><p>域账号密码 chenbaitao Ccc19950818</p><p>泛微云平台账号密码: 15867088217  lwb19900603!  </p><p>数据库账号密码: ecology    X4PtYv  </p><p> devuser   X4PtYv  </p><p>admin     hisunfZndvBT3ecC</p><h2 id="常用表"><a href="#常用表" class="headerlink" title="常用表"></a>常用表</h2><p>select * from ecology.hrmdepartment<br>select * from ecology.hrmdepartmentdefined<br>select * from ecology.hrmresource<br>select * from ecology.cus_fielddata<br>select * from ecology.workflow_requestbase<br>select * from ecology.workflow_currentoperator<br>select * from ecology.workflow_requestlog</p><p>select * from ecology.workflow_billfield<br>select * from ecology.workflow_form  </p><p>kq_balanceofleave</p><p>smtp.exmail.qq.com</p><p><a href="mailto:&#111;&#x61;&#99;&#x65;&#x73;&#x68;&#105;&#x40;&#x68;&#x69;&#x73;&#117;&#110;&#x70;&#104;&#97;&#114;&#x6d;&#46;&#x63;&#x6f;&#x6d;">&#111;&#x61;&#99;&#x65;&#x73;&#x68;&#105;&#x40;&#x68;&#x69;&#x73;&#117;&#110;&#x70;&#104;&#97;&#114;&#x6d;&#46;&#x63;&#x6f;&#x6d;</a> </p><p>select * from ecology.kq_leaverules 请假类型表</p><p>weaver.properties下面有配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ecology.url = jdbc:oracle:thin:@172.16.5.132:1521:ecology</span><br></pre></td></tr></table></figure><p>HR同步:</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240111200905302.png" alt="image-20240111200905302" style="zoom:25%;" /><p>select * from hrmresource where lastname like ‘%楼群%’</p><p>select * from syncdata.sync_hrmresource a where a.lastname&#x3D;’楼群’;</p><p>中间库loginid–&gt;OA系统workcode  中间库adname–&gt;OA系统loginidd</p><p>数据逻辑就是HR系统先到OA中间表，然后OA中间表再到HRM系统表</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20240111210917940.png" alt="image-20240111210917940" style="zoom:33%;" /><p>更新上级工号为</p><h2 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h2><p>排查生产日志</p><p>&#x2F;home&#x2F;weaver&#x2F;prod_log&#x2F;243</p>]]></content>
      
      
      <categories>
          
          <category> OA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SRM系统用户需求说明书</title>
      <link href="/2023/12/25/srm/%E9%87%87%E8%B4%AD%E9%9C%80%E6%B1%82%E8%AF%B4%E6%98%8E%E4%B9%A6d466464784fbd749d978a78d/"/>
      <url>/2023/12/25/srm/%E9%87%87%E8%B4%AD%E9%9C%80%E6%B1%82%E8%AF%B4%E6%98%8E%E4%B9%A6d466464784fbd749d978a78d/</url>
      
        <content type="html"><![CDATA[<p>SCMS<strong>系统用户需求说明书</strong></p><p>User Requirement Specification of SCMSSystem</p><table><thead><tr><th></th><th>部门：  Department</th><th>姓名  Name</th><th>签字&#x2F;日期：  Signature&#x2F;Date</th><th></th><th></th></tr></thead><tbody><tr><td>起草人：  Prepared by</td><td>信息技术中心</td><td></td><td></td><td></td><td></td></tr><tr><td>起草人：  Prepared by</td><td>供应链管理部</td><td></td><td></td><td></td><td></td></tr><tr><td>审核人：  Reviewed by</td><td>信息技术中心</td><td></td><td></td><td></td><td></td></tr><tr><td>审核人：  Reviewed by</td><td>供应链管理部</td><td></td><td></td><td></td><td></td></tr><tr><td>审核人：  Reviewed by</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>审核人：  Reviewed by</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>批准人：  Approved by</td><td>生产运营管理与  信息技术中心</td><td></td><td></td><td></td><td></td></tr></tbody></table><p>**<br>**</p><p><strong>目录</strong></p><p><a href="#_Toc143087815">1  目的. 2</a></p><p><a href="#_Toc143087816">2  范围. 2</a></p><p><a href="#_Toc143087817">3  项目介绍. 3</a></p><p><a href="#_Toc143087818">3.1  项目背景. 3</a></p><p><a href="#_Toc143087819">3.2  项目概述. 3</a></p><p><a href="#_Toc143087820">4  定义和缩写. 3</a></p><p><a href="#_Toc143087821">5  角色和职责. 4</a></p><p><a href="#_Toc143087822">6  法规和指南. 4</a></p><p><a href="#_Toc143087823">7  需求文档格式说明. 4</a></p><p><a href="#_Toc143087824">8  具体需求描述. 5</a></p><p><a href="#_Toc143087825">8.1  需求概述. 5</a></p><p><a href="#_Toc143087826">8.2  供应商管理. 6</a></p><p><a href="#_Toc143087827">8.3  寻源管理. 8</a></p><p><a href="#_Toc143087828">8.4  合同管理. 10</a></p><p><a href="#_Toc143087829">8.5  协同管理. 12</a></p><p><a href="#_Toc143087830">8.6  安全及其他. 14</a></p><p><a href="#_Toc143087831">8.7  项目硬件及软件要求. 15</a></p><p><a href="#_Toc143087832">9  版本变更历史. 16</a></p><h1 id="1-目的"><a href="#1-目的" class="headerlink" title="1    目的"></a>1    目的</h1><p>计划引入SCMS系统，对供应链采购全过程进行数字化管理，实现采购全过程操作可控、寻源规范、招标公正、管理严谨等，并实现供应商生命周期管理。本文是对SCMS系统用户需求的说明。</p><h1 id="2-范围"><a href="#2-范围" class="headerlink" title="2    范围"></a>2    范围</h1><p>SCMS系统适用于浙江海正药业股份有限公司及其子公司（以下简称海正）的采购过程管理及供应商全生命周期管理。本次项目将建成SCMS系统平台，助力海正供应采购电子化，招标寻源采购信息化，运营&#x2F;经营采购数字化转型。</p><h1 id="3-项目介绍"><a href="#3-项目介绍" class="headerlink" title="3    项目介绍"></a>3    项目介绍</h1><h1 id="3-1-项目背景"><a href="#3-1-项目背景" class="headerlink" title="3.1  项目背景"></a>3.1  项目背景</h1><p>根据海正药业未来发展的需要，通过智能制造相关系统的建设，依托建设过程及建成的信息化平台，推动企业在两化融合方面的建设，有效管理企业的业务流程。在此基础上，有效应用IT技术，实时获取<strong>供应商、订单、到货</strong>等一站式信息，实现管理的闭环；充分利用采购系统，提取数据促进采购业务提升，通过数据沉淀提升降本能力，优化降本工具，采购全程做到可视化，问题可追溯，借助业务线上化，流程电子化，帮助企业减少低价值工作，提升效率，全面提高<strong>企业采购和运营管理水平</strong>。</p><h1 id="3-2-项目概述"><a href="#3-2-项目概述" class="headerlink" title="3.2  项目概述"></a>3.2  项目概述</h1><p>引进并实施SCMS系统，实现以下目标：</p><p>l 对各品类供应商从<strong>注册到淘汰全生命周期</strong>进行管控</p><p>l 对采购<strong>全过程的需求跟踪</strong></p><p>l <strong>需求管理与外围系统</strong>的有效对接</p><p>l 多种寻源方式选择，<strong>进度可视化</strong></p><p>l <strong>价格库建立</strong>，提升采购员谈判能力</p><p>l 有效实现<strong>订单协同，需求分配，交货协同，财务协同</strong></p><p>l 新增<strong>商城采购</strong>，目录化采购方式</p><h1 id="4-定义和缩写"><a href="#4-定义和缩写" class="headerlink" title="4    定义和缩写"></a>4    定义和缩写</h1><table><thead><tr><th><strong>术语与缩写</strong></th><th><strong>定义或描述</strong></th></tr></thead><tbody><tr><td>GAMP</td><td>良好自动化生产实践指南 Good Automated Manufacturing Practices</td></tr><tr><td>CSV</td><td>系统验证 Computerized System Validation</td></tr><tr><td>GxP</td><td>(生产，临床，实验室)的良好实践  Good x (Manufacturing,  Clinical, Laboratory…) Practice</td></tr><tr><td>ISPE</td><td>国际制药工程协会 International Society For Pharmaceutical Engineering</td></tr><tr><td>ER&#x2F;ES</td><td>电子记录&#x2F;电子签名 Electronic Record &#x2F; Electronic Signature</td></tr><tr><td>SCMS</td><td>供应链管理系统 Supply Chain Management System</td></tr><tr><td>QPP</td><td>质量项目计划 Quality &amp; Project Plan</td></tr><tr><td>URS</td><td>用户需求 User Requirement Specification</td></tr><tr><td>VP</td><td>验证计划 Validation Plan</td></tr></tbody></table><h1 id="5-角色和职责"><a href="#5-角色和职责" class="headerlink" title="5    角色和职责"></a>5    角色和职责</h1><p>本用户需求由海正项目组、相关部门人员共同签署。</p><p>MES系统项目中所涉及的具体的角色和职责如下：</p><table><thead><tr><th><strong>角色</strong></th><th><strong>人员</strong></th><th><strong>责任</strong></th></tr></thead><tbody><tr><td>海正药业  信息技术中心</td><td></td><td>用户需求的编写、审核和批准；</td></tr><tr><td>供应链管理部</td><td></td><td>用户需求的审核；</td></tr></tbody></table><h1 id="6-法规和指南"><a href="#6-法规和指南" class="headerlink" title="6    法规和指南"></a>6    法规和指南</h1><ol><li><p>《药品生产质量管理规范》（2010年修订）2015年第54号公告，附件1：计算机化系统</p></li><li><p>GAMP 5(Good Automated Manufacturing Practice 5)良好自动化制造规范第五版：基于风险的计算机化系统验证</p></li><li><p>USA 21 CFR第11部分：电子记录，电子签名</p></li></ol><h1 id="7-需求文档格式说明"><a href="#7-需求文档格式说明" class="headerlink" title="7    需求文档格式说明"></a>7    需求文档格式说明</h1><ol><li>需求编号说明</li></ol><p>URS（用户需求）- X&#x2F;X.XX&#x2F;X.XX.XX（流水号）</p><p>需求编号可以分为多段，以顿号间隔。</p><p>编号从URS-1.1&#x2F;URS-1.1.1等开始。</p><ol start="2"><li>用户需求表格说明</li></ol><p>用户需求表格包括下列内容：<br> 第1列：URS-ID，代表唯一的需求编号；</p><p>第2列：需求，清楚描述具体需求的内容，不需要描述如何去实现，除非实现方法也是需求； </p><p>第3列：ER，定义是否与电子记录（Electronic Record）相关，Y&#x2F;N；</p><p>第4列：ES，定义是否与电子签名（Electronic Signature）相关，Y&#x2F;N。</p><ol start="3"><li>用户需求层级说明</li></ol><p>用户需求可分多级来写，如按照模块来编写，每个模块下可分多个功能组，每个功能组下有具体的需求。分几级按照具体需求来定。<br> 对于非具体需求的每一级（如模块级和功能组级），应有个概述，简要描述这一级的主要需求，可使用流程图，以便更清楚描述整个需求，让读者更容易理解。这个概述不作为具体的需求。流程图中可标识哪些部分在系统中实现，哪些是系统外的流程。</p><h1 id="8-具体需求描述"><a href="#8-具体需求描述" class="headerlink" title="8    具体需求描述"></a>8    具体需求描述</h1><h1 id="8-1-需求概述"><a href="#8-1-需求概述" class="headerlink" title="8.1  需求概述"></a>8.1  需求概述</h1><p>在SCMS系统中管理供应商、询比价、招标、合同、采购与质量协同</p><h1 id="8-2-供应商管理"><a href="#8-2-供应商管理" class="headerlink" title="8.2  供应商管理"></a>8.2  供应商管理</h1><table><thead><tr><th>URS**-**ID</th><th><strong>需求名称及描述</strong></th><th>京桥通</th><th>ER</th><th>ES</th></tr></thead><tbody><tr><td>URS-1.1</td><td><font color="blue"><strong>供应商注册</strong></font></td><td></td><td>Y</td><td>Y</td></tr><tr><td>URS-1.1.1</td><td><strong>供应商注册邀请</strong>  采购员可给指定供应商名称和指定邮箱发送邀请码，供应商在拿到<strong>邀请码</strong>后进行注册，注册时的供应商名称必须跟邀请的供应商名称一直，否则注册不成功；</td><td>√</td><td></td><td></td></tr><tr><td>URS-1.1.2</td><td><strong>供应商自助注册</strong>  供应商可通过公司官网网页注册成为潜在供应商；  可设置供应商<strong>类别选项</strong>生产类、综合类、设备类、其他类，根据供应商类别<strong>设置不同的注册必输信息字段及所需上传的文件</strong>；</td><td>√</td><td></td><td></td></tr><tr><td>URS-1.1.3</td><td>供应商<strong>注册审核  对接天眼查、企查查等外部征信系统，通过接口协助供应商注册审核</strong>；</td><td>○</td><td></td><td></td></tr><tr><td>URS-1.2</td><td><font color="blue"><strong>供应商准入</strong></font></td><td></td><td>Y</td><td>Y</td></tr><tr><td>URS-1.2.1</td><td><strong>供应商类型设置</strong>  针对不同的供应商类型设置<strong>不同的准入流程</strong></td><td>√</td><td></td><td></td></tr><tr><td>URS-1.2.2</td><td><strong>样品评审</strong>  采购方可<strong>创建、发布送样申请</strong>；供应商可对送样申请进行反馈；样品评审流程完毕后，采购方可以对此次送样进行评价；</td><td>√</td><td></td><td></td></tr><tr><td>URS-1.2.3</td><td><strong>样品试用</strong>  采购方可向供应商索要或购买样品；样品评审流程完毕后，采购方可以对此次送样进行<strong>评价</strong>；</td><td>√</td><td></td><td></td></tr><tr><td>URS-1.2.4</td><td><strong>调查问卷</strong>  针对不同的供应商类型供应商，定义调查表模板，创建并发布调查表；供应商填写收到的调查表信息；采购方审批供应商反馈的调查表；</td><td>√</td><td></td><td></td></tr><tr><td>URS-1.2.5</td><td>信息关联  根据供应商名称、<strong>统一社会信用代码</strong>进行唯一性校验，未在ERP内的则将<strong>SCMS供应商信息导入ERP和OA；</strong></td><td>○</td><td></td><td></td></tr><tr><td>URS-1.2.6</td><td><strong>证照管理</strong>  根据供应商类型，<strong>供应商需上传不同的证照，并关联有效期，当临近有效期时发出提醒</strong>；</td><td>○</td><td></td><td></td></tr><tr><td>URS-1.3</td><td><font color="blue"><strong>供应商生命周期管理</strong></font></td><td></td><td>Y</td><td>N</td></tr><tr><td>URS-1.3.1</td><td><strong>绩效考核</strong>  采购方可创建供应商评审, 支持<strong>多部门协同打分自动汇总</strong>；（<strong>是否需要自动打分功能</strong>？）</td><td>√</td><td></td><td></td></tr><tr><td>URS-1.3.2</td><td><strong>级别限制</strong>  根据供应商评审或质量整改报告，可对供应商进行升降级</td><td>×</td><td></td><td></td></tr><tr><td>URS-1.3.3</td><td><strong>供应商分类</strong>  采购方可对供应商分类进行变更：1、支持同步外部系统的分类规则；2、支持多级分类指标定义；3、支持分类指标关键参数设置（是否评级项、是否评分项、审批方式）；4、支持多维度分类创建、变更与审批；</td><td>○</td><td></td><td></td></tr><tr><td>URS-1.3.4</td><td><strong>冻结解冻</strong>  采购方可对供应商分类进行冻结&#x2F;解冻操作；发起冻结时系统支持冻结原因选择，支持附件上传；支持冻结后供应商解冻；</td><td>×</td><td></td><td></td></tr><tr><td>URS-1.3.5</td><td><strong>黑名单管理</strong>  支持黑名单管理，一旦进入黑名单，后续不允许再使用（是否需要供应商联系人黑名单功能？）</td><td>×</td><td></td><td></td></tr></tbody></table><h1 id="8-3-寻源管理"><a href="#8-3-寻源管理" class="headerlink" title="8.3  寻源管理"></a>8.3  寻源管理</h1><table><thead><tr><th>URS**-**ID</th><th><strong>需求名称及描述</strong></th><th>京桥通</th><th>ER</th><th>ES</th></tr></thead><tbody><tr><td>URS-2.1</td><td><font color="blue"><strong>询比价管理</strong></font></td><td></td><td>Y</td><td>Y</td></tr><tr><td>URS-2.1.1</td><td><strong>立项管理</strong>  可关联OA，采购员<font color=red><strong>可从OA导入采购申请</strong></font>（是采购需求吧？）进行创建项目（是否可以直接在SRM系统创建采购需求，比如一下框架合同的询比价），并选择<strong>询比价、单一来源等多种模式</strong>；（竞价？单一来源包含定向供应商和定向品牌，定向供应商是否还需要对接到SRM系统寻源？）</td><td>×</td><td></td><td></td></tr><tr><td>URS-2.1.2</td><td><strong>询报价设置</strong>  采购方可设置项目说明（供应商可见）、项目备注（供应商不可见）、采购文件（供应商可见）、项目是否公开可见、成交结果是否公开、成交金额是否公开、截止日期；  <font color=red>项目公开可见则所有潜在供应商及已准入都可见可选择参与报价，不公开则只有邀请的供应商可见次项目</font>；</td><td>×</td><td></td><td></td></tr><tr><td>URS-2.1.3</td><td><strong>采购品设置</strong>  <font color=red><strong>关联OA采购申请后，自动导入物料描述、数量、预计交货日期等相关信息</strong></font>；  也可不关联OA创建新的采购品，自己填入物料描述（必填）、数量（必填）、计量单位（必填）、预计交货日期（选填）、规格信号（选填）、技术参数（选填）、用途说明（选填）等；</td><td>√</td><td></td><td></td></tr><tr><td>URS-2.1.4</td><td><strong>报价项设置</strong>  采购方可选择不同的报价方案；默认报价方案包括<strong>报价单价</strong>（必填）、<strong>付款方式</strong>（必填）、生产商（必填）、报价有效期、备注；也可自己增加其他报价方案；</td><td>×</td><td></td><td></td></tr><tr><td>URS-2.1.5</td><td><strong>邀请供应商</strong>  采购方可在潜在供应商和已准入供应商选择需要邀请的供应商；并选择供应商所要报价的采购品（多选）；</td><td>√</td><td></td><td></td></tr><tr><td>URS-2.1.6</td><td><strong>审批并发布</strong>  完成询比价设置项后提交审批；完成审批流后自动发布给邀请的供应商（可选择站内信、短信、邮件等多种方式）；若为公开项目，则供应商可在公开项目展示区看到；</td><td>√</td><td></td><td></td></tr><tr><td>URS-2.1.6</td><td><strong>项目变更</strong>    采购方可在项目进行变更，包括截止时间，物料数量，备注；变更后经过审核后将变更信息发布给相关供应商；</td><td>×</td><td></td><td></td></tr><tr><td>URS-2.1.7</td><td><strong>项目截止</strong>  项目截止后，采购方可查看供应商报价；项目截止前，采购方任何人员均不可查看报价；</td><td>√</td><td></td><td></td></tr><tr><td>URS-2.1.8</td><td><strong>结果确认</strong>  由采购经办人的上级领导确认比价结果，确定合作供应商；确定后，通知相关报价供应商询比价结果；</td><td>√</td><td></td><td></td></tr><tr><td>URS-2.1.9</td><td><strong>增加价格库</strong>，询源后自动加入价格库，生成目录结构数据，后期可直接从价格库中带出价格供应商等信息？如果是同一个编码的采购，在价格库里面有的，是作为参考还是可以直接固定使用这个价格信息或者是在一定期限内可以固定使用这个价格等信息？</td><td>√</td><td></td><td></td></tr><tr><td>URS-2.2</td><td><strong><font color="blue">招标管理</font></strong></td><td></td><td>Y</td><td>Y</td></tr><tr><td>URS-2.2.1</td><td><strong>招标小组管理</strong>  采购方创建和维护招标小组，确定参与招标的采购方人员</td><td>√</td><td></td><td></td></tr><tr><td>URS-2.2.2</td><td><strong>招标书管理</strong>  <strong>招标书的创建和维护</strong></td><td>√</td><td></td><td></td></tr><tr><td>URS-2.2.3</td><td><strong>招标发布</strong>  自主招标或委托招标，创建招标公告后，发布给竞标供应商，可基于<strong>采购申请创建</strong>；</td><td>√</td><td></td><td></td></tr><tr><td>URS-2.2.4</td><td><strong>招标变更</strong>  采购方可进行招标项目变更：<strong>如变更标的物</strong>、<strong>调整开标时间</strong>等</td><td>√</td><td></td><td></td></tr><tr><td>URS-2.2.5</td><td><strong>投标管理</strong>  供应商参与投标，并维护投标信息；  <strong>支持投标保证金、招标费用</strong>、专家费用等相关费用线上记录，支持招标文件控制；</td><td>○</td><td></td><td></td></tr><tr><td>URS-2.2.6</td><td><strong>资格审查</strong>  采购方可对供应商进行资格审查；支持资格预审：启用后，只有审批通过的供应商方可进行报价；</td><td>○</td><td></td><td></td></tr><tr><td>URS-2.2.7</td><td><strong>评分管理</strong>  采购方查看进行中的评分和历史评分；  支持评分的自动汇总，按照评估结果确认中标供应商；  怎么把评分表发给供应商？系统附件？是否需要在线评分？</td><td>√</td><td></td><td></td></tr><tr><td>URS-2.2.8</td><td><strong>专家库管理</strong>  管理专家账户，包括专家账户信息维护、查询、注册申请审批；  建立专家库，并设立招标评估标准，竞标供应商报价后，可进行<strong>预评标</strong>；（支持专家注册（内外部专家）、专家审批、专家变更、专家评价和退出的全面管理）；  支持招标过程的专家变更申请和审批；</td><td>○</td><td></td><td></td></tr><tr><td>URS-2.2.9</td><td><strong>保证金管理</strong>  用于采购方手工录入、查询招标寻源单的<strong>保证金状态</strong></td><td>×</td><td></td><td></td></tr></tbody></table><h1 id="8-4-合同管理（OA系统已经有合同管理模块，是否放OA即可？）"><a href="#8-4-合同管理（OA系统已经有合同管理模块，是否放OA即可？）" class="headerlink" title="8.4  合同管理（OA系统已经有合同管理模块，是否放OA即可？）"></a>8.4  合同管理（OA系统已经有合同管理模块，是否放OA即可？）</h1><table><thead><tr><th>URS**-**ID</th><th><strong>需求名称及描述</strong></th><th>京桥通</th><th>ER</th><th>ES</th></tr></thead><tbody><tr><td>URS-3.1</td><td><strong>合同管理</strong></td><td></td><td>Y</td><td>N</td></tr><tr><td>URS-3.1.1</td><td><strong>合同模板设置</strong>  合同模板：维护协议文本生成的模板文件，可以<strong>创建、变更、作废、审批、升版</strong>；  合同类型：设置合同模板所属的类型；</td><td>√</td><td></td><td></td></tr><tr><td>URS-3.1.2</td><td><strong>合同申请流程</strong>  可关联OA合同管理流程，将询比价结果自动导入到OA；</td><td>√</td><td></td><td></td></tr><tr><td>URS-3.1.3</td><td>电子签章  体系部，财务&#x2F;法务专业审核无误后，由合同管理员进行电子签章；   电子签名相关各方提供真实性、可靠性验证信息，维护公司印章图片等内容；</td><td>√</td><td></td><td></td></tr><tr><td>URS-3.1.4</td><td>合同签署  <strong>将合同发布给关联供应商</strong>，由供应商上传盖章后的合同；  如果相关供应商未注册则由经办人上传盖章后的合同；</td><td>√</td><td></td><td></td></tr><tr><td>URS-3.1.5</td><td><strong>合同查询</strong>  可根据不同的要求进行查询控制，比如合同信息、项目合同、部门经办人、状态分类等；</td><td>√</td><td></td><td></td></tr><tr><td>URS-3.1.6</td><td><strong>年度协议到期提醒</strong>    关联企业邮箱，以邮件形式通知经办人及时续签</td><td>○</td><td></td><td></td></tr><tr><td>URS-3.1.7</td><td><strong>合同编号归档</strong>  纸质版合同线下归档后与线上同步，系统自动编号，能导出最终纸质版合同归档清单</td><td>○</td><td></td><td></td></tr><tr><td>URS-3.1.8</td><td><strong>订单报表</strong>  采购订单跟踪执行报表，从采购申请-订单-接收-对账-开票链路对订单执行情况进行跟踪展示</td><td>○</td><td></td><td></td></tr><tr><td>URS-3.1.9</td><td><strong>合同报表</strong>  采购数据分析以报表形式展开</td><td>○</td><td></td><td></td></tr><tr><td>URS-3.1.10</td><td><strong>框架合同</strong>签了，分次购买每次还需要签一次性采购合同吗？</td><td>○</td><td></td><td></td></tr></tbody></table><h1 id="8-5-协同管理"><a href="#8-5-协同管理" class="headerlink" title="8.5  协同管理"></a>8.5  协同管理</h1><table><thead><tr><th>URS**-**ID</th><th><strong>需求名称及描述</strong></th><th>京桥通</th><th>ER</th><th>ES</th></tr></thead><tbody><tr><td>URS-4.1</td><td><strong>采购协同</strong></td><td></td><td>Y</td><td>Y</td></tr><tr><td>URS-4.1.1</td><td><strong>采购订单管理</strong>  可关联OA采购订单流程，并将采购订单发布给供应商。同时，采购方可对过程中订单进行取消、关闭、变更的操作；</td><td>√</td><td></td><td></td></tr><tr><td>URS-4.1.2</td><td><strong>订单反馈</strong>  供应商对采购方发布的订单进行反馈确认以及查询；  订单的补充信息或订单评价是否需要？</td><td>○</td><td></td><td></td></tr><tr><td>URS-4.1.3</td><td><strong>计划排程</strong>  采购方通过手工新建或者外部系统导入的方式发布计划排程给到供应商进行确认；也可对供应商发布的送货计划进行确认和反馈；</td><td>×</td><td></td><td></td></tr><tr><td>URS-4.1.4</td><td><strong>计划排程反馈</strong>  供应商对采购方发出的计划进行确认和反馈；同时可发布送货计划给到采购方确认</td><td>○</td><td></td><td></td></tr><tr><td>URS-4.1.5</td><td><strong>送货单管理</strong>  供应商根据订单或者计划排程进行送货单创建、变更、取消；</td><td>√</td><td></td><td></td></tr><tr><td>URS-4.1.6</td><td><strong>送货单审批</strong>  采购方对供应商创建的送货单进行审批和查询；</td><td>√</td><td></td><td></td></tr><tr><td>URS-4.1.7</td><td><strong>验收与拒收</strong>  采购可对协议或者订单进行验收&#x2F;拒收操作，并可进行验收单&#x2F;拒收单的查看；验收就是收货，还是收货外的环节？如果是收货外环节，哪些需要验收，强制的还是非强制？</td><td>√</td><td></td><td></td></tr><tr><td>URS-4.1.8</td><td><strong>已收货</strong>  可对来源单据（送货单&#x2F;订单&#x2F;协议等）或上游事务进行<strong>收货和冲销</strong>，并可进行收货数据查询；</td><td>√</td><td></td><td></td></tr><tr><td>URS-4.1.9</td><td><strong>供应商库存</strong>  供应商可录入自有库存及外协、寄售库存情况；</td><td>○</td><td></td><td></td></tr><tr><td>URS-4.2</td><td>质量协同</td><td></td><td>Y</td><td>Y</td></tr><tr><td>URS-4.2.1</td><td><strong>质量检验</strong>  采购方查看外部系统导入的质检单据，支持新建质检单录入质检结果；  供应商可在质检结果查询功能下进行查看；</td><td></td><td></td><td></td></tr><tr><td>URS-4.2.2</td><td><strong>质量整改管理</strong>  采购方对供应商发起质量整改，糅合8D、5W2H等质量管理分析方法创建质量整改报告；</td><td></td><td></td><td></td></tr><tr><td>URS-4.2.3</td><td><strong>质量整改反馈</strong>  供应商对采购方发起的质量整改在线反馈。</td><td></td><td></td><td></td></tr></tbody></table><h1 id="8-6-采购员门户？"><a href="#8-6-采购员门户？" class="headerlink" title="8.6  采购员门户？"></a>8.6  采购员门户？</h1><table><thead><tr><th>URS**-**ID</th><th><strong>需求名称及描述</strong></th><th>ER</th><th>ES</th></tr></thead><tbody><tr><td>URS-5.1</td><td><strong>采购需求</strong>，招标管理，询价管理，订单执行，供应商管理待办事宜汇总，能链接进去进行待办事宜的处理。</td><td></td><td></td></tr><tr><td>URS-5.2</td><td><strong>供应商资质</strong>，订单交货等即将到期提醒统计，能链接进去看具体详细。</td><td></td><td></td></tr><tr><td>URS-5.3</td><td>按品名，年度，月度等统计采购金额报表</td><td></td><td></td></tr><tr><td>URS-5.4</td><td></td><td>Y</td><td>Y</td></tr><tr><td>URS-5.5</td><td></td><td>Y</td><td>Y</td></tr><tr><td>URS-5.6</td><td></td><td>Y</td><td>N</td></tr><tr><td>URS-5.7</td><td></td><td>Y</td><td>N</td></tr><tr><td>URS-5.8</td><td></td><td>Y</td><td>Y</td></tr><tr><td>URS-5.9</td><td></td><td>N</td><td>N</td></tr><tr><td>URS-5.10</td><td></td><td>N</td><td>N</td></tr></tbody></table><h1 id="8-7-公司采购移动端需求？"><a href="#8-7-公司采购移动端需求？" class="headerlink" title="8.7  公司采购移动端需求？"></a>8.7  公司采购移动端需求？</h1><table><thead><tr><th>URS**-**ID</th><th><strong>需求名称及描述</strong></th><th>ER</th><th>ES</th></tr></thead><tbody><tr><td></td><td><strong>供应商注册管理</strong>（供应商邀请，现场考察，送样申请反馈等）。供应商风险提醒。</td><td></td><td></td></tr><tr><td></td><td><strong>采购任务管理</strong>，需求的分配。</td><td></td><td></td></tr><tr><td></td><td><strong>发货计划确认</strong>，送货单的查询。</td><td></td><td></td></tr><tr><td></td><td><strong>采购订单管理</strong>，能看到订单信息，订单入库，发票，付款等信息。可以对订单做评价。</td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr></tbody></table><h1 id="9-版本变更历史"><a href="#9-版本变更历史" class="headerlink" title="9    版本变更历史"></a>9    版本变更历史</h1><table><thead><tr><th>版本号</th><th>执行日期</th><th>主要修订内容</th></tr></thead><tbody><tr><td>00</td><td>见首页</td><td>新订</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> SRM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 供应链 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CR2023000763原料药研究院工作委托联系单中审批流程变更</title>
      <link href="/2023/12/25/%E5%8E%9F%E6%96%99%E8%8D%AF%E6%9D%BF%E5%9D%97%E4%B8%80%E7%BA%A7%E9%83%A8%E9%97%A8%E8%B4%9F%E8%B4%A3%E4%BA%BA5cde4b949ec9f056b44a6cf094a14517bde40420035451f4/"/>
      <url>/2023/12/25/%E5%8E%9F%E6%96%99%E8%8D%AF%E6%9D%BF%E5%9D%97%E4%B8%80%E7%BA%A7%E9%83%A8%E9%97%A8%E8%B4%9F%E8%B4%A3%E4%BA%BA5cde4b949ec9f056b44a6cf094a14517bde40420035451f4/</url>
      
        <content type="html"><![CDATA[<p>1.流程前2个节点改成ASL审批</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231225101755844.png" alt="image-20231225101755844" style="zoom: 67%;" /><p>2.条件要删除</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231225133233339.png" alt="image-20231225133233339" style="zoom:50%;" /><p>3.hisun.operatoraction.GetASLListForYll</p><p>第二个节点代码改成这个</p><p><font color=red>这里如果有二级部门负责人审批到二级部门负责人，如果没有就审批到上级</font></p><p>4.增加抄送马海霞</p><p>5.增加委托人确认节点 改成分叉合并节点 同步按钮要改成确认 ，要用原料药查阅去同步然后菜单要记得原料药是查阅</p><p>6.修改按钮名称为批准</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231226085933441.png" alt="image-20231226085933441" style="zoom:33%;" /><p>7.受托部门为王玲燕的话不用走受托部门主任</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17034889884554.png" alt="img"></p><p>8.配置一级部门负责人临时表定时任务</p>]]></content>
      
      
      <categories>
          
          <category> 发布 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA发布 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>项目管理概论</title>
      <link href="/2023/12/24/%E9%AB%98%E9%A1%B9/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/"/>
      <url>/2023/12/24/%E9%AB%98%E9%A1%B9/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="项目管理概论"><a href="#项目管理概论" class="headerlink" title="项目管理概论"></a>项目管理概论</h1><h2 id="基本的要素"><a href="#基本的要素" class="headerlink" title="基本的要素"></a>基本的要素</h2><span id="more"></span><p>1.独特的产品</p><ul><li>目标</li><li>可交付结果 </li><li>独特性</li><li>可以在组织的任何层级上开展</li></ul><p>2.临时性工作</p><ul><li>有起点和重点</li><li>并不意味持续时间短</li><li>项目临时，结果持久</li></ul><p>3.项目驱动变更（从一个状态到另一个状态）</p><p>4.创造业务价值</p><p>5.最终应该和组织的战略目标以及各个项目的业务价值相关</p><p>6.时间、成本、范围和质量是项目的重要因素</p><p>7.不能偏离业务</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231224151757350.png" alt="image-20231224151757350" style="zoom: 50%;" /><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231224153040646.png" alt="image-20231224153040646"></p><h2 id="项目集合项目组合的区别"><a href="#项目集合项目组合的区别" class="headerlink" title="项目集合项目组合的区别"></a>项目集合项目组合的区别</h2><ul><li>项目集是相互有关系的项目；项目组合是没有关系的</li></ul><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231224150909302.png" alt="image-20231224150909302" style="zoom:50%;" /><h2 id="项目经理的角色"><a href="#项目经理的角色" class="headerlink" title="项目经理的角色"></a>项目经理的角色</h2><p>1.组织委派，负责领导团队实现项目目标</p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231224154107399.png" alt="image-20231224154107399" style="zoom: 33%;" /><p>2.技能</p><ul><li>项目管理</li><li>战略和商务</li><li>领导力</li></ul><p>3.风格</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231224154551272.png" alt="image-20231224154551272"></p><h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>启动、组织和准备、执行项目工作、结束项目</p><p>成本投入低高低</p><p>风险越来越低，变更代价越来越高</p><ul><li>预测型</li><li>迭代型(磨刀)</li><li>增量型(渐进)</li><li>适应型（迭代+增量）</li><li>混合型</li></ul><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231224160656690.png" alt="image-20231224160656690"></p><h2 id="体系"><a href="#体系" class="headerlink" title="体系"></a>体系</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231224162130423.png" alt="image-20231224162130423"></p>]]></content>
      
      
      <categories>
          
          <category> 软考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 高项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>成本管理</title>
      <link href="/2023/12/17/%E9%AB%98%E9%A1%B9/%E6%88%90%E6%9C%AC%E7%AE%A1%E7%90%86/"/>
      <url>/2023/12/17/%E9%AB%98%E9%A1%B9/%E6%88%90%E6%9C%AC%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<a href="https://chenbaitao120.gitee.io/2023/12/17/%E6%88%90%E6%9C%AC%E7%AE%A1%E7%90%86/" onclick="window.location.replace(this.href); return false;">    <img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231217153259647.png" alt="image-20231209143728319" style="zoom: 50%;"  /></a><span id="more"></span><iframe src="C:\Users\ALIENWARE\blog\dist\a.html" width="100%" height="500" name="topFrame" scrolling="yes" noresize="noresize" frameborder="0" id="topFrame"></iframe><h1 id="管理基础"><a href="#管理基础" class="headerlink" title="管理基础"></a>管理基础</h1><h2 id="成本类型"><a href="#成本类型" class="headerlink" title="成本类型"></a>成本类型</h2><p>可变成本1；固定成本；<strong>直接成本（差旅费 工资 项目使用的物料）</strong>；<strong>间接成本</strong>（<strong>税金，额外福利和保卫费</strong>用）；机会成本；沉没成本</p><h2 id="成本储备"><a href="#成本储备" class="headerlink" title="成本储备"></a>成本储备</h2><p>应急储备在成本基准之中，并且可以想得到的；管理储备不在成本基准当中，并且无法预测的； </p><h2 id="成本管理过程"><a href="#成本管理过程" class="headerlink" title="成本管理过程"></a>成本管理过程</h2><p>规划- &gt; 估算 -&gt; 指定预算 -&gt; 控制成本</p><ul><li>规划成本管理应该在早期就进行工作规划。</li><li>估算成本需要分析备选成本方案，比如自制成本，购买成本和租赁成本等多种资源共享方案。</li><li>项目估算的准确性随着项目的进行逐步提高</li><li>成本估算需要考虑全部资源，比如通货膨胀补贴、融资成本、应急成本。</li></ul><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231217141125837.png" alt="image-20231217141125837" style="zoom:200%;" /><h2 id="估算成本"><a href="#估算成本" class="headerlink" title="估算成本"></a>估算成本</h2><h3 id="估算方案"><a href="#估算方案" class="headerlink" title="估算方案"></a>估算方案</h3><ul><li><p>类比估算，以往项目的参数值和属性</p></li><li><p>参数估算，历史数据之间的统计关系和变量</p></li><li><p>自下向上估算</p></li><li><p>三点估算</p><ul><li><p>三角分布</p></li><li><p>贝塔分布</p></li></ul></li></ul><h3 id="数据分析"><a href="#数据分析" class="headerlink" title="数据分析"></a>数据分析</h3><ul><li>备选方案分析</li><li>储备分析 应急储备是成本基准的一部分</li><li>质量成本</li></ul><h3 id="决策投票"><a href="#决策投票" class="headerlink" title="决策投票"></a>决策投票</h3><ul><li>对多个未来行动方案进行评估的过程</li></ul><h4 id="成本估算"><a href="#成本估算" class="headerlink" title="成本估算"></a>成本估算</h4><ul><li>包括应急储备。</li><li>可以是汇总和详细分列的。</li><li>应该涵盖全部资源。</li><li>间接成本也包含在项目估算中，可以在活动层级和更高层级上列间接成本</li></ul><h2 id="制定预算"><a href="#制定预算" class="headerlink" title="制定预算"></a>制定预算</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231217145503804.png" alt="image-20231217145503804"></p><ul><li>成本汇总：把成本估算汇总到WBS工作包，然后工作包汇总包WBS更高层次比如控制账户。<font color="red"><strong>论文考点</strong></font></li></ul><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231217145659341.png" alt="image-20231217145659341" style="zoom:67%;" /><ul><li>资金限制平衡 对项目资金的限制来平衡资金的指出，可以添加强制日期来实现，限制资金过度使用。</li><li>融资：为项目获取资金</li><li>如有管理储备，总资金需求等于成本基准加上管理储备，项目资金以增量的方式投入。</li></ul><h2 id="控制成本"><a href="#控制成本" class="headerlink" title="控制成本"></a>控制成本</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231217150828049.png" alt="image-20231217150828049"></p><ul><li>项目资金支出和完成的工作之间的关系，<strong>关键在于管理经批准的成本基准</strong></li><li>对造成基准变更因素世家影响，确保所有变更请求得到及时处理，管理变更，不超出批准的资金限额，分析成本基准的偏差，监督工作绩效，防止未经批准的变更，报告所有经批准的变更，控制成本超支</li><li>项目资金需求</li><li>工作绩效数据</li></ul><h2 id="计算"><a href="#计算" class="headerlink" title="计算"></a>计算</h2><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231217151221771.png" alt="image-20231217151221771"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231217151533038.png" alt="image-20231217151533038"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231217152306481.png"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231217152755864.png" alt="image-20231217152755864"></p>]]></content>
      
      
      <categories>
          
          <category> 软考 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> 高项 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GIT指令</title>
      <link href="/2023/12/01/it/GIt%E5%B8%B8%E8%A7%81%E6%8C%87%E4%BB%A4/"/>
      <url>/2023/12/01/it/GIt%E5%B8%B8%E8%A7%81%E6%8C%87%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="GIt指令"><a href="#GIt指令" class="headerlink" title="GIt指令"></a>GIt指令</h1><h2 id="基本指令"><a href="#基本指令" class="headerlink" title="基本指令"></a>基本指令</h2><span id="more"></span><p>提交指定文件夹下面的文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add path/to/folder/</span><br><span class="line">git commit -m &quot;Committing changes in a specific folder&quot;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure><p><strong>git config</strong></p><p>该命令将分别设置提交代码的用户名和电子邮件地址。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config –global user.name “[name]”</span><br><span class="line">git config –global user.email “[email address]”</span><br></pre></td></tr></table></figure><p>创建一个新的代码库。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure><p>显示尚未添加到stage的文件的变更。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git diff</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>显示添加到stage的文件的变更。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff –staged</span><br></pre></td></tr></table></figure><p>将从stage中撤出指定的文件，但可以保留文件的内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset [file]</span><br></pre></td></tr></table></figure><p>显示所有需要提交的文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure><p>显示历史记录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure><p>给指定的提交添加标签。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git tag [commitID]</span><br></pre></td></tr></table></figure><p>显示所有本地分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure><p>合并分支</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge</span><br></pre></td></tr></table></figure><p>将本地的代码库连接到远程服务器。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add [variable name] [Remote Server Link]</span><br></pre></td></tr></table></figure><p>临时保存所有修改的文件。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash save</span><br></pre></td></tr></table></figure><p>恢复最近储藏的文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash pop</span><br></pre></td></tr></table></figure><p>丢弃最近一次stash的变更。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash drop</span><br></pre></td></tr></table></figure><p>显示stash的所有变更。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash list</span><br></pre></td></tr></table></figure><h2 id="自动提交"><a href="#自动提交" class="headerlink" title="自动提交"></a>自动提交</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd C:\Users\chenbaitao\Desktop\blog\blog\blog\blog</span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line">git status</span><br><span class="line">git commit -m &quot;update&quot;</span><br><span class="line">git push -f</span><br><span class="line">git status</span><br></pre></td></tr></table></figure><p>在任务计划程序里面创建自动提交任务</p><h2 id="仓库"><a href="#仓库" class="headerlink" title="仓库"></a>仓库</h2><p>重置代码仓库</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote set-url origin https://gitee.com/chenbaitao120/hexo-code</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> IT </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GIT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大理旅游</title>
      <link href="/2023/11/10/%E5%A4%A7%E7%90%86%E6%97%85%E6%B8%B8/"/>
      <url>/2023/11/10/%E5%A4%A7%E7%90%86%E6%97%85%E6%B8%B8/</url>
      
        <content type="html"><![CDATA[<p><a href="https://chenbaitao120.gitee.io/nodeppt/旅游/dist/大理.html">大理</a></p><span id="more"></span><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/5a2d4bb581c6eb77c7d5216b.jpg" alt="5a2d4bb581c6eb77c7d5216b"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/b2a94e73a306003edc2b2534.jpg" alt="b2a94e73a306003edc2b2534"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/8f9b421d909f77b4ba6c877f.jpg" alt="8f9b421d909f77b4ba6c877f"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/f37a4609b11b5e82d098593e.jpg" alt="f37a4609b11b5e82d098593e"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/7cf7427a8386a94d7448050b.jpg" alt="7cf7427a8386a94d7448050b"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/96e24efa9867a1511b6f3846.jpg" alt="96e24efa9867a1511b6f3846"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/e1c64cebb41476a70aac471a.jpg" alt="e1c64cebb41476a70aac471a"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/6d8d43bdac3260e85df4f03d.jpg" alt="6d8d43bdac3260e85df4f03d"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/4c7d47419e58f20413bb5736.jpg" alt="4c7d47419e58f20413bb5736"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/7be84453b1e9e30759f1dd00.jpg" alt="7be84453b1e9e30759f1dd00"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/2911421b9c3107aa211d62c0.jpg" alt="2911421b9c3107aa211d62c0"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/ae744c3ea7b7a3c5f578d28c.jpg" alt="ae744c3ea7b7a3c5f578d28c"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/43714cc4a9a946aa039f01d0.jpg" alt="43714cc4a9a946aa039f01d0"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/f0ee4d1c8e530739539b9c2b.jpg" alt="f0ee4d1c8e530739539b9c2b"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/41b8471aad8fc7d6fa154740.jpg" alt="41b8471aad8fc7d6fa154740"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/41b8471aad8fc7d6fa154740.jpg"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/c11e4f42ac0358cf5cae8bf7.jpg" alt="c11e4f42ac0358cf5cae8bf7"></p>]]></content>
      
      
      <categories>
          
          <category> 旅游 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大连旅游</title>
      <link href="/2023/10/10/%E5%A4%A7%E8%BF%9E%E6%97%85%E6%B8%B8/"/>
      <url>/2023/10/10/%E5%A4%A7%E8%BF%9E%E6%97%85%E6%B8%B8/</url>
      
        <content type="html"><![CDATA[<p><a href="https://chenbaitao120.gitee.io/nodeppt/旅游/dist/大连.html">国庆游大连</a></p><span id="more"></span><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/79dd4cae82ba02b8206c5a88.jpg" alt="79dd4cae82ba02b8206c5a88"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/6d2b4fdb8b0c0701e30c15db.jpg" alt="6d2b4fdb8b0c0701e30c15db"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/0268484680ec352bc6f60c24.jpg" alt="0268484680ec352bc6f60c24"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/d7e7441fa69155b8e9d080ef.jpg" alt="d7e7441fa69155b8e9d080ef"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/ed7d49d884d234ad4de027c7.jpg" alt="ed7d49d884d234ad4de027c7"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/f88c4a6d8ebfbb16af8f7e1e.jpg" alt="f88c4a6d8ebfbb16af8f7e1e"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/d76d48d6b582ea841e3a0476.jpg" alt="d76d48d6b582ea841e3a0476"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/bd9c49dba4770114658de43d.jpg" alt="bd9c49dba4770114658de43d"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/f1344f158926b9162102884a.jpg" alt="f1344f158926b9162102884a"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/f76749ddb32a768be76757db.jpg" alt="f76749ddb32a768be76757db"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/b17b42a686322c0536210a72.jpg" alt="b17b42a686322c0536210a72"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/a15045d8ba66136dcc30d993.jpg" alt="a15045d8ba66136dcc30d993"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/84214134928c2d6b7d68ef3a.jpg" alt="84214134928c2d6b7d68ef3a"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/1bc24b09af48a548896dfbca.jpg" alt="1bc24b09af48a548896dfbca"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/e48548668b57671fbb21eb3a.jpg" alt="e48548668b57671fbb21eb3a"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/f73340a598836bde7cabcc31.jpg" alt="f73340a598836bde7cabcc31"></p>]]></content>
      
      
      <categories>
          
          <category> 旅游 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大连 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>采购跟踪管理报表</title>
      <link href="/2023/01/05/oa/%E9%87%87%E8%B4%AD%E8%B7%9F%E8%B8%AA%E7%AE%A1%E7%90%86%E6%8A%A5%E8%A1%A8/"/>
      <url>/2023/01/05/oa/%E9%87%87%E8%B4%AD%E8%B7%9F%E8%B8%AA%E7%AE%A1%E7%90%86%E6%8A%A5%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<p>采购跟踪管理报表</p><p> PRNO 申请单号</p><p>NO 订单号</p><p> PDNO 需求单号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 采购管理跟踪报表 </span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> order_manage_track;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>  order_manage_track  <span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> b.demandrq,b.demandcode,a.oarequest,<span class="string">&#x27;&#x27;</span><span class="operator">||</span>b.id <span class="keyword">as</span> id,a.applicant,a.department,b.mname,b.num,<span class="string">&#x27;&#x27;</span><span class="operator">||</span>a.id <span class="keyword">as</span> oaorder,a.source,a.no,a.pur,a.purgroup,a.supplier,b.citp,b.spec,b.amount,b.mcode,b.ddate,a.tname,a.shck  <span class="keyword">from</span> ECOLOGY.UF_PTP0102 a,ECOLOGY.UF_PTP0102_DT1 b </span><br><span class="line"><span class="keyword">where</span> a.id<span class="operator">=</span>b.mainid;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 增加待办采购申请</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> order_manage_track</span><br><span class="line"><span class="keyword">select</span> b.demandrq,b.demandcode,a.requestid,<span class="string">&#x27;PR&#x27;</span><span class="operator">||</span>b.id <span class="keyword">as</span> id,a.applicant,a.department,b.mname,b.num,<span class="keyword">null</span>,a.source,<span class="string">&#x27;&#x27;</span>,a.pur,a.purgroup,a.supplier,b.citp,b.spec,b.amount,b.mcode,b.ddate,a.tname,a.shck  <span class="keyword">from</span> ECOLOGY.FORMTABLE_MAIN_56 a,ECOLOGY.FORMTABLE_MAIN_56_DT1 b </span><br><span class="line"><span class="keyword">where</span> a.id<span class="operator">=</span>b.mainid <span class="keyword">and</span> REQUESTID <span class="keyword">not</span> <span class="keyword">in</span> (</span><br><span class="line"><span class="keyword">select</span>  oarequest <span class="keyword">from</span> order_manage_track</span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 删除强制归档采购申请</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> order_manage_track <span class="keyword">where</span> oarequest  <span class="keyword">in</span> (<span class="keyword">select</span> REQUESTID <span class="keyword">from</span> ECOLOGY.workflow_requestbase <span class="keyword">where</span> status<span class="operator">=</span><span class="string">&#x27;强制归档&#x27;</span>);</span><br><span class="line"><span class="comment">-- 删除未提交采购申请</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> order_manage_track <span class="keyword">where</span> oarequest  <span class="keyword">in</span> (</span><br><span class="line"><span class="keyword">select</span> REQUESTID <span class="keyword">from</span> ECOLOGY.FORMTABLE_MAIN_56 <span class="keyword">where</span> <span class="keyword">no</span>  <span class="keyword">is</span> <span class="keyword">null</span> </span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 增加待办采购需求这里去掉废弃的了</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> order_manage_track (oarequest,demandrq,demandcode,id,applicant,</span><br><span class="line">department,mname,num,pur,purgroup,supplier,citp,spec,ddate)</span><br><span class="line"><span class="keyword">select</span>  a.oarequest,b.berequest <span class="keyword">as</span> demandrq,a.id <span class="keyword">as</span> demandcode,<span class="string">&#x27;PD&#x27;</span><span class="operator">||</span>a.id <span class="keyword">as</span> id,b.applicant,b.department,a.mname,a.num,a.pur,a.purgroup,a.supplier,a.citp,a.spec,a.ddate <span class="keyword">from</span> ECOLOGY.UF_PTPDEMAND_DT1 a,ECOLOGY.UF_PTPDEMAND b  <span class="keyword">where</span> a.id  <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span>  demandcode <span class="keyword">from</span> order_manage_track <span class="keyword">where</span> demandcode <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>)  <span class="keyword">and</span> a.mainid<span class="operator">=</span>b.id <span class="keyword">and</span> nvl(status,<span class="number">0</span>)<span class="operator">&lt;&gt;</span><span class="number">3</span></span><br><span class="line"><span class="keyword">and</span> (a.oarequest <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">or</span> a.oarequest <span class="keyword">not</span> <span class="keyword">in</span> (</span><br><span class="line"><span class="keyword">select</span> oarequest <span class="keyword">from</span> order_manage_track ) );</span><br><span class="line"><span class="comment">--更新采购需求字段</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track <span class="keyword">set</span> demandrq <span class="operator">=</span> (<span class="keyword">select</span> b.berequest <span class="keyword">as</span> demandrq <span class="keyword">from</span> ECOLOGY.UF_PTPDEMAND_DT1 a <span class="keyword">left</span> <span class="keyword">join</span> </span><br><span class="line">ECOLOGY.uf_ptpdemand b <span class="keyword">on</span> a.mainid <span class="operator">=</span> b.id  <span class="keyword">where</span> syncdata.order_manage_track.oarequest <span class="operator">=</span> a.oarequest <span class="keyword">and</span> ROWNUM <span class="operator">&lt;=</span> <span class="number">1</span> <span class="keyword">and</span> b.berequest <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> ) <span class="keyword">where</span> demandrq <span class="keyword">is</span>  <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 增加业务字段</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> order_manage_track</span><br><span class="line"><span class="keyword">add</span> (demandstartdate <span class="type">CHAR</span>(<span class="number">10</span>),demandenddate <span class="type">CHAR</span>(<span class="number">10</span>),requeststartdate <span class="type">CHAR</span>(<span class="number">10</span>)</span><br><span class="line">,requestenddate <span class="type">CHAR</span>(<span class="number">10</span>),rkstartdate <span class="type">CHAR</span>(<span class="number">10</span>),rkenddate <span class="type">CHAR</span>(<span class="number">10</span>),fpno VARCHAR2(<span class="number">1000</span>),fkinfo VARCHAR2(<span class="number">500</span>),ordertime <span class="type">CHAR</span>(<span class="number">10</span>),pdno VARCHAR2(<span class="number">100</span>),prno VARCHAR2(<span class="number">100</span>));</span><br><span class="line"><span class="comment">-- 更新需求日期</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> (pdno,demandstartdate,demandenddate)<span class="operator">=</span>(</span><br><span class="line"><span class="keyword">select</span> requestmark,createdate,LASTOPERATEDATE <span class="keyword">from</span> ECOLOGY.workflow_requestbase <span class="keyword">where</span> REQUESTID<span class="operator">=</span>a.demandrq</span><br><span class="line">) <span class="keyword">where</span> demandrq <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- 更新申请日期</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> (prno,requeststartdate,requestenddate)<span class="operator">=</span>(</span><br><span class="line"><span class="keyword">select</span> requestmark,createdate,LASTOPERATEDATE <span class="keyword">from</span> ECOLOGY.workflow_requestbase <span class="keyword">where</span> REQUESTID<span class="operator">=</span>a.oarequest</span><br><span class="line">); </span><br><span class="line"><span class="comment">-- 创建入库临时表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tmp_formtable_main_104_dt1 <span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span>  c.id,c.mainid,c.orderline,b.createdate,a.requestid,a.appdate,a.oaorder</span><br><span class="line"><span class="keyword">from</span> ECOLOGY.FORMTABLE_MAIN_104 a,ECOLOGY.workflow_requestbase b,</span><br><span class="line">ECOLOGY.FORMTABLE_MAIN_104_DT1 c </span><br><span class="line"><span class="keyword">where</span>  a.requestid<span class="operator">=</span>b.requestid <span class="keyword">and</span> a.id<span class="operator">=</span>c.mainid;</span><br><span class="line"><span class="keyword">create</span> index inx_orderline <span class="keyword">on</span> tmp_formtable_main_104_dt1(orderline);</span><br><span class="line"><span class="keyword">create</span> index inx_oaorder <span class="keyword">on</span> tmp_formtable_main_104_dt1(oaorder);</span><br><span class="line"><span class="comment">-- 更新入库开始日期</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track t <span class="keyword">set</span>  rkstartdate<span class="operator">=</span>(</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(createdate) <span class="keyword">from</span> tmp_formtable_main_104_dt1 <span class="keyword">where</span> orderline<span class="operator">=</span>t.id</span><br><span class="line">) <span class="keyword">where</span> oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>; </span><br><span class="line"><span class="comment">-- 更新直采入库开始日期</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track t <span class="keyword">set</span>  rkstartdate<span class="operator">=</span>(<span class="keyword">select</span> <span class="built_in">min</span>(appdate)  <span class="keyword">from</span> tmp_formtable_main_104_dt1 <span class="keyword">where</span> oaorder<span class="operator">=</span>t.oaorder)  <span class="keyword">where</span> source<span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="comment">-- 删除入库临时表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span>  tmp_formtable_main_104_dt1;</span><br><span class="line"><span class="comment">-- 创建发票临时表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tmp_formtable_main_99_dt1 <span class="keyword">as</span> </span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">distinct</span> a.oaorder,b.fpno <span class="keyword">FROM</span>  ECOLOGY.FORMTABLE_MAIN_99_DT1 a,ECOLOGY.FORMTABLE_MAIN_99 b </span><br><span class="line"><span class="keyword">where</span> a.mainid<span class="operator">=</span>b.id;</span><br><span class="line"><span class="keyword">create</span> index inx99_oaorder <span class="keyword">on</span> tmp_formtable_main_99_dt1(oaorder);</span><br><span class="line"><span class="comment">-- 更新订单发票号</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span>  fpno<span class="operator">=</span>(</span><br><span class="line"><span class="keyword">select</span> WM_CONCAT(fpno)  <span class="keyword">from</span> </span><br><span class="line">tmp_formtable_main_99_dt1 <span class="keyword">where</span> oaorder<span class="operator">=</span>a.oaorder) </span><br><span class="line"><span class="keyword">where</span> oaorder <span class="keyword">in</span> (<span class="keyword">select</span> oaorder <span class="keyword">from</span> ECOLOGY.FORMTABLE_MAIN_99_DT1);</span><br><span class="line"><span class="comment">-- 删除发票临时表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span>  tmp_formtable_main_99_dt1;</span><br><span class="line"><span class="comment">-- 更新订单付款金额</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> fkinfo<span class="operator">=</span>(<span class="keyword">select</span> payamount <span class="keyword">from</span> ECOLOGY.uf_ptp0102  <span class="keyword">where</span> id<span class="operator">=</span>a.oaorder);</span><br><span class="line"><span class="comment">-- 更新需求时间</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track <span class="keyword">set</span> ordertime<span class="operator">=</span>nvl(demandenddate,requeststartdate);</span><br><span class="line"><span class="keyword">update</span> order_manage_track <span class="keyword">set</span> requestenddate<span class="operator">=</span><span class="keyword">null</span>  <span class="keyword">where</span> oaorder <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- 更新作废状态</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> order_manage_track <span class="keyword">add</span> (status number);</span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> status<span class="operator">=</span>(<span class="keyword">select</span> status <span class="keyword">from</span> ECOLOGY.UF_PTP0102 <span class="keyword">where</span> id<span class="operator">=</span>a.oaorder) <span class="keyword">where</span> oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">update</span> order_manage_track <span class="keyword">set</span> status<span class="operator">=</span><span class="number">1</span>  <span class="keyword">where</span> oaorder <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- 更新删除采购申请的状态</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track <span class="keyword">set</span> status<span class="operator">=</span><span class="number">9</span> <span class="keyword">where</span>  oarequest <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> oaorder <span class="keyword">is</span> <span class="keyword">null</span> </span><br><span class="line"><span class="keyword">and</span> oarequest  <span class="keyword">not</span> <span class="keyword">in</span> (<span class="keyword">select</span> requestid <span class="keyword">from</span> ecology.formtable_main_56);</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> order_manage_track <span class="keyword">add</span> (yfkxx VARCHAR2(<span class="number">500</span>),jdxfkxx VARCHAR2(<span class="number">500</span>));</span><br><span class="line"><span class="comment">-- 创建预付临时表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tmp_uf_PTP0201_yf <span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> oaorder,<span class="built_in">max</span>(appdate) appdate,<span class="built_in">sum</span>(camount) camounts,<span class="built_in">sum</span>(cpayscale) cpayscales </span><br><span class="line"><span class="keyword">from</span>  ECOLOGY.uf_PTP0201 <span class="keyword">where</span> cpaytype<span class="operator">=</span><span class="number">0</span> <span class="keyword">and</span> (status<span class="operator">=</span><span class="number">4</span> <span class="keyword">or</span> status<span class="operator">=</span><span class="number">11</span>) <span class="keyword">and</span> brequest <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">group</span> <span class="keyword">by</span> oaorder;</span><br><span class="line"><span class="keyword">create</span> index inx_oaorder <span class="keyword">on</span> tmp_uf_PTP0201_yf(oaorder);</span><br><span class="line"><span class="comment">--更新“日期+预付款+比例”</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> yfkxx<span class="operator">=</span>(<span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> appdate <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">then</span> appdate<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span>camounts<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span><span class="built_in">cast</span>(cpayscales<span class="operator">*</span><span class="number">100</span> <span class="keyword">as</span> <span class="type">varchar</span>(<span class="number">20</span>)) </span><br><span class="line"><span class="operator">||</span> <span class="string">&#x27;%&#x27;</span> <span class="keyword">end</span> <span class="keyword">from</span> tmp_uf_PTP0201_yf <span class="keyword">where</span> oaorder<span class="operator">=</span>a.oaorder)</span><br><span class="line"><span class="keyword">where</span> a.oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- 删除预付临时表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> tmp_uf_PTP0201_yf;</span><br><span class="line"><span class="comment">-- 创建阶段性付款临时表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tmp_uf_PTP0201_jd <span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> oaorder,<span class="built_in">max</span>(appdate) appdate,<span class="built_in">sum</span>(camount) camounts,<span class="built_in">sum</span>(cpayscale) cpayscales </span><br><span class="line"><span class="keyword">from</span>  ECOLOGY.uf_PTP0201 <span class="keyword">where</span> cpaytype<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> (status<span class="operator">=</span><span class="number">4</span> <span class="keyword">or</span> status<span class="operator">=</span><span class="number">11</span>) <span class="keyword">and</span> brequest <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">group</span> <span class="keyword">by</span> oaorder;</span><br><span class="line"><span class="keyword">create</span> index inx1_oaorder <span class="keyword">on</span> tmp_uf_PTP0201_jd(oaorder);</span><br><span class="line"><span class="comment">--更新“日期+阶段性付款+比例”</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> jdxfkxx<span class="operator">=</span>(<span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> appdate <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">then</span> appdate<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span>camounts<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span><span class="built_in">cast</span>(cpayscales<span class="operator">*</span><span class="number">100</span> <span class="keyword">as</span> <span class="type">varchar</span>(<span class="number">20</span>)) </span><br><span class="line"><span class="operator">||</span> <span class="string">&#x27;%&#x27;</span> <span class="keyword">end</span> <span class="keyword">from</span> tmp_uf_PTP0201_jd <span class="keyword">where</span> oaorder<span class="operator">=</span>a.oaorder)</span><br><span class="line"><span class="keyword">where</span> a.oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- 删除阶段性付款临时表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> tmp_uf_PTP0201_jd;</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> order_manage_track <span class="keyword">add</span> (fpxx VARCHAR2(<span class="number">500</span>));</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> order_manage_track <span class="keyword">add</span> (fpxx1 VARCHAR2(<span class="number">500</span>));</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> order_manage_track <span class="keyword">add</span> (fpxx2 VARCHAR2(<span class="number">500</span>));</span><br><span class="line"><span class="comment">-- 创建收货发票临时表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tmp_PTP0204_fp <span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">no</span>,fpno,fpdate,oaorder,ybhsjez,amount,<span class="built_in">ROW_NUMBER</span> () <span class="keyword">OVER</span> ( <span class="keyword">PARTITION</span> <span class="keyword">BY</span> oaorder <span class="keyword">ORDER</span> <span class="keyword">BY</span> gzdate <span class="keyword">asc</span> ) CNO</span><br><span class="line"> <span class="keyword">from</span> (<span class="keyword">select</span> a.no,fpno,fpdate,gzdate,c.oaorder,<span class="built_in">sum</span>(ybhsje) ybhsjez,d.amount <span class="keyword">from</span> ecology.formtable_main_99 a </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.workflow_requestbase b <span class="keyword">on</span> a.requestid<span class="operator">=</span>b.requestid </span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.formtable_main_99_dt1 c <span class="keyword">on</span> c.mainid<span class="operator">=</span>a.id</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">join</span> ecology.uf_ptp0102 d <span class="keyword">on</span> d.id<span class="operator">=</span>c.oaorder</span><br><span class="line"><span class="keyword">where</span> currentnodetype<span class="operator">=</span><span class="number">3</span> <span class="keyword">and</span> brequest <span class="keyword">is</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> a.no,fpno,fpdate,gzdate,c.oaorder,d.amount</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> c.oaorder,gzdate);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> index inx_no <span class="keyword">on</span> tmp_PTP0204_fp(<span class="keyword">no</span>);</span><br><span class="line"><span class="keyword">create</span> index inx_oaorder1 <span class="keyword">on</span> tmp_PTP0204_fp(oaorder);</span><br><span class="line"></span><br><span class="line"><span class="comment">--更新第二次入发票总金额</span></span><br><span class="line"><span class="keyword">update</span> tmp_PTP0204_fp fp <span class="keyword">set</span> ybhsjez<span class="operator">=</span>ybhsjez<span class="operator">+</span>(<span class="keyword">select</span> ybhsjez <span class="keyword">from</span> tmp_PTP0204_fp <span class="keyword">where</span> CNO<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> fp.oaorder<span class="operator">=</span>oaorder)</span><br><span class="line"><span class="keyword">where</span> CNO<span class="operator">=</span><span class="number">2</span>;</span><br><span class="line"><span class="comment">--更新第三次入发票总金</span></span><br><span class="line"><span class="keyword">update</span> tmp_PTP0204_fp fp <span class="keyword">set</span> ybhsjez<span class="operator">=</span>ybhsjez<span class="operator">+</span>(<span class="keyword">select</span> ybhsjez <span class="keyword">from</span> tmp_PTP0204_fp <span class="keyword">where</span> CNO<span class="operator">=</span><span class="number">2</span> <span class="keyword">and</span> fp.oaorder<span class="operator">=</span>oaorder)</span><br><span class="line"><span class="keyword">where</span> CNO<span class="operator">=</span><span class="number">3</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--更新“日期+发票+比例1”</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> fpxx<span class="operator">=</span>(<span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> fpdate <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">then</span> fpdate<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span>fpno<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span><span class="built_in">cast</span>(ROUND(ybhsjez<span class="operator">/</span>amount,<span class="number">2</span>)<span class="operator">*</span><span class="number">100</span> <span class="keyword">as</span> <span class="type">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="operator">||</span> <span class="string">&#x27;%&#x27;</span> <span class="keyword">end</span> <span class="keyword">from</span> tmp_PTP0204_fp </span><br><span class="line"><span class="keyword">where</span> oaorder<span class="operator">=</span>a.oaorder <span class="keyword">and</span> CNO<span class="operator">=</span><span class="number">1</span>)</span><br><span class="line"><span class="keyword">where</span> a.oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> fpno <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> a.oaorder <span class="keyword">in</span> (<span class="keyword">select</span> oaorder <span class="keyword">from</span> tmp_PTP0204_fp <span class="keyword">where</span>  CNO<span class="operator">=</span><span class="number">1</span>);</span><br><span class="line"><span class="comment">--更新“日期+发票+比例2”</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> fpxx1<span class="operator">=</span>(<span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> fpdate <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">then</span> fpdate<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span>fpno<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span><span class="built_in">cast</span>(ROUND(ybhsjez<span class="operator">/</span>amount,<span class="number">2</span>)<span class="operator">*</span><span class="number">100</span> <span class="keyword">as</span> <span class="type">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="operator">||</span> <span class="string">&#x27;%&#x27;</span> <span class="keyword">end</span> <span class="keyword">from</span> tmp_PTP0204_fp </span><br><span class="line"><span class="keyword">where</span> oaorder<span class="operator">=</span>a.oaorder <span class="keyword">and</span> CNO<span class="operator">=</span><span class="number">2</span>)</span><br><span class="line"><span class="keyword">where</span> a.oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> fpno <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> a.oaorder <span class="keyword">in</span> (<span class="keyword">select</span> oaorder <span class="keyword">from</span> tmp_PTP0204_fp <span class="keyword">where</span>  CNO<span class="operator">=</span><span class="number">2</span>);</span><br><span class="line"><span class="comment">--更新“日期+发票+比例3”</span></span><br><span class="line"><span class="keyword">update</span> order_manage_track a <span class="keyword">set</span> fpxx2<span class="operator">=</span>(<span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> fpdate <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">then</span> fpdate<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span>fpno<span class="operator">||</span><span class="string">&#x27;+&#x27;</span><span class="operator">||</span><span class="built_in">cast</span>(ROUND(ybhsjez<span class="operator">/</span>amount,<span class="number">2</span>)<span class="operator">*</span><span class="number">100</span> <span class="keyword">as</span> <span class="type">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="operator">||</span> <span class="string">&#x27;%&#x27;</span> <span class="keyword">end</span> <span class="keyword">from</span> tmp_PTP0204_fp </span><br><span class="line"><span class="keyword">where</span> oaorder<span class="operator">=</span>a.oaorder <span class="keyword">and</span> CNO<span class="operator">=</span><span class="number">3</span>)</span><br><span class="line"><span class="keyword">where</span> a.oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> fpno <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> a.oaorder <span class="keyword">in</span> (<span class="keyword">select</span> oaorder <span class="keyword">from</span> tmp_PTP0204_fp <span class="keyword">where</span>  CNO<span class="operator">=</span><span class="number">3</span>);</span><br><span class="line"><span class="comment">-- 删除收货发票临时表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> tmp_PTP0204_fp;</span><br><span class="line"><span class="comment">------过账日期</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> syncdata.order_manage_track <span class="keyword">add</span> (REPORT_STATUS VARCHAR2(<span class="number">50</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> syncdata.order_manage_track <span class="keyword">add</span> (COMPANY VARCHAR2(<span class="number">50</span>));</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> syncdata.order_manage_track <span class="keyword">add</span> (<span class="keyword">PERIOD</span> VARCHAR2(<span class="number">50</span>));</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> syncdata.order_manage_track <span class="keyword">add</span> (GZDATE VARCHAR2(<span class="number">50</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_oaorder_sync <span class="keyword">ON</span> syncdata.order_manage_track (oaorder);</span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_no_sync <span class="keyword">ON</span> syncdata.order_manage_track (<span class="keyword">no</span>);</span><br><span class="line"><span class="keyword">CREATE</span> INDEX idx_prno_syn <span class="keyword">ON</span> syncdata.order_manage_track (PRNO);</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> syncdata.order_manage_track  </span><br><span class="line"><span class="keyword">SET</span> gzdate <span class="operator">=</span> (  </span><br><span class="line">  <span class="keyword">SELECT</span> <span class="built_in">MAX</span>(gzdate)  </span><br><span class="line">  <span class="keyword">FROM</span> ECOLOGY.formtable_main_99  </span><br><span class="line">  <span class="keyword">WHERE</span> oaorder <span class="operator">=</span> syncdata.order_manage_track.oaorder  </span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">--更新订单报告状态 </span></span><br><span class="line"><span class="keyword">UPDATE</span> syncdata.order_manage_track a  </span><br><span class="line"><span class="keyword">SET</span> a.report_status <span class="operator">=</span> (  </span><br><span class="line">  <span class="keyword">SELECT</span> <span class="built_in">MAX</span>(b.status)</span><br><span class="line">  <span class="keyword">FROM</span> ECOLOGY.uf_PTP0102  b</span><br><span class="line">  <span class="keyword">WHERE</span> a.no <span class="operator">=</span> b.no  </span><br><span class="line">);</span><br><span class="line"><span class="comment">--更新订单所属公司</span></span><br><span class="line"><span class="keyword">UPDATE</span> syncdata.order_manage_track  a </span><br><span class="line"><span class="keyword">SET</span> a.company <span class="operator">=</span> (  </span><br><span class="line">  <span class="keyword">SELECT</span>  <span class="built_in">MAX</span>(b.company)</span><br><span class="line">  <span class="keyword">FROM</span> ECOLOGY.uf_PTP0102  b</span><br><span class="line">  <span class="keyword">WHERE</span> b.no <span class="operator">=</span> a.no  </span><br><span class="line">);</span><br><span class="line"><span class="comment">--更新订单账期</span></span><br><span class="line"><span class="keyword">UPDATE</span> syncdata.order_manage_track  a</span><br><span class="line"><span class="keyword">SET</span> a.period <span class="operator">=</span> (  </span><br><span class="line">  <span class="keyword">SELECT</span> <span class="built_in">MAX</span>(b.period)</span><br><span class="line">  <span class="keyword">FROM</span> ECOLOGY.uf_PTP0102  b</span><br><span class="line">  <span class="keyword">WHERE</span> b.no <span class="operator">=</span> a.no  </span><br><span class="line">);</span><br><span class="line"><span class="comment">----更新采购申请账期-</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track  a</span><br><span class="line"><span class="keyword">SET</span> a.period <span class="operator">=</span> (  </span><br><span class="line"> <span class="keyword">select</span> <span class="built_in">MAX</span>(b.period)</span><br><span class="line"> <span class="keyword">FROM</span> ECOLOGY.formtable_main_56  b</span><br><span class="line"> <span class="keyword">WHERE</span> b.no <span class="operator">=</span> a.PRNO</span><br><span class="line">) <span class="keyword">where</span> a.period <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--更新中间字段数据</span></span><br><span class="line"><span class="keyword">UPDATE</span> ECOLOGY.formtable_main_99</span><br><span class="line"><span class="keyword">SET</span> processed_oaorder <span class="operator">=</span> <span class="string">&#x27;,&#x27;</span> <span class="operator">||</span> oaorder <span class="operator">||</span> <span class="string">&#x27;,&#x27;</span> <span class="keyword">where</span> processed_oaorder <span class="keyword">is</span> <span class="keyword">null</span> ;</span><br><span class="line"></span><br><span class="line"><span class="comment">--更新过账日期</span></span><br><span class="line"><span class="keyword">UPDATE</span> syncdata.order_manage_track t</span><br><span class="line"><span class="keyword">SET</span> gzdate <span class="operator">=</span> (</span><br><span class="line">   <span class="keyword">SELECT</span> <span class="built_in">MAX</span>(gzdate)</span><br><span class="line">   <span class="keyword">FROM</span> ECOLOGY.formtable_main_99 r</span><br><span class="line">   <span class="keyword">WHERE</span> r.processed_oaorder <span class="keyword">LIKE</span> <span class="string">&#x27;%,&#x27;</span> <span class="operator">||</span> t.oaorder <span class="operator">||</span> <span class="string">&#x27;,%&#x27;</span></span><br><span class="line">) <span class="keyword">WHERE</span> t.gzdate <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">and</span> t.oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建入库日期中间表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tmp_formtable_main_104_dt2 <span class="keyword">as</span> </span><br><span class="line"><span class="keyword">select</span> a.appdate,b.oaorder <span class="keyword">from</span> ecology.formtable_main_104 a <span class="keyword">left</span> <span class="keyword">join</span> ecology.formtable_main_104_dt1 b <span class="keyword">on</span> a.id <span class="operator">=</span> b.mainid;</span><br><span class="line"></span><br><span class="line"><span class="comment">--创建入库日期中间表索引</span></span><br><span class="line"><span class="keyword">create</span> index idx_oaorder_dt2  <span class="keyword">on</span> tmp_formtable_main_104_dt2(oaorder);</span><br><span class="line"><span class="keyword">create</span> index idx_appdate_dt2  <span class="keyword">on</span> tmp_formtable_main_104_dt2(appdate);</span><br><span class="line"></span><br><span class="line"><span class="comment">--更新入库日期到采购管理跟踪报表</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track t  <span class="keyword">set</span> rkstartdate<span class="operator">=</span>(<span class="keyword">select</span> <span class="built_in">max</span>(a.appdate)  <span class="keyword">from</span> tmp_formtable_main_104_dt2 a <span class="keyword">where</span> a.oaorder<span class="operator">=</span>t.oaorder)</span><br><span class="line"><span class="keyword">where</span>  t.rkstartdate <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">and</span> t.source <span class="operator">=</span> <span class="number">0</span> <span class="keyword">and</span> t.oaorder <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--入库日期oaorder不存在则置空</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track t <span class="keyword">set</span> rkstartdate <span class="operator">=</span> <span class="keyword">null</span> <span class="keyword">where</span> t.oaorder <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--删除入库日期中间表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> tmp_formtable_main_104_dt2;</span><br><span class="line"></span><br><span class="line"><span class="comment">--过账日期oaorder不存在则置空</span></span><br><span class="line"><span class="keyword">UPDATE</span> syncdata.order_manage_track t</span><br><span class="line"><span class="keyword">SET</span> gzdate <span class="operator">=</span><span class="keyword">null</span> <span class="keyword">WHERE</span> t.oaorder <span class="keyword">is</span>  <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--更新采购需求状态和采购申请状态</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> syncdata.order_manage_track</span><br><span class="line"><span class="keyword">add</span> (demandstatus <span class="type">CHAR</span>(<span class="number">10</span>),purchaserequeststatus <span class="type">CHAR</span>(<span class="number">10</span>));</span><br><span class="line"><span class="comment">--更新采购需求报告状态数据上去</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track <span class="keyword">set</span> demandstatus  <span class="operator">=</span> (<span class="keyword">select</span> b.status <span class="keyword">from</span> ECOLOGY.UF_PTPDEMAND_DT1 b <span class="keyword">where</span> syncdata.order_manage_track.demandcode  <span class="operator">=</span> b.id  );</span><br><span class="line"><span class="comment">--更新采购申请报告状态上去</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track <span class="keyword">set</span> purchaserequeststatus <span class="operator">=</span> (<span class="keyword">select</span> status <span class="keyword">from</span> ECOLOGY.FORMTABLE_MAIN_56 a <span class="keyword">where</span> syncdata.order_manage_track.oarequest <span class="operator">=</span> a.requestid <span class="keyword">and</span> ROWNUM <span class="operator">&lt;=</span><span class="number">1</span>);</span><br><span class="line"><span class="comment">--添加是否取消字段</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> syncdata.order_manage_track</span><br><span class="line"><span class="keyword">add</span> (iscancelled <span class="type">CHAR</span>(<span class="number">10</span>));</span><br><span class="line"><span class="comment">--更新是否取消数据上去</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track <span class="keyword">set</span> iscancelled <span class="operator">=</span> (<span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> status <span class="operator">=</span><span class="number">8</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span>  <span class="keyword">end</span> <span class="keyword">as</span> iscancelled <span class="keyword">from</span> ECOLOGY.FORMTABLE_MAIN_56 a <span class="keyword">where</span> syncdata.order_manage_track.oarequest <span class="operator">=</span> a.requestid <span class="keyword">and</span> ROWNUM <span class="operator">&lt;=</span><span class="number">1</span>)</span><br><span class="line"><span class="keyword">where</span> iscancelled <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">--增加是否全部入库标识（包含手工改的不再收货）（收货完成标识为是或者收货数量大于等于数量的）</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> syncdata.order_manage_track</span><br><span class="line"><span class="keyword">add</span> (isallinstock <span class="type">CHAR</span>(<span class="number">10</span>));</span><br><span class="line"><span class="comment">--更新是否全部入库标识数据(默认没有全部收货)</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track <span class="keyword">set</span> isallinstock <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">--收货完成标识是的时候全部收货</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track <span class="keyword">set</span> isallinstock <span class="operator">=</span> (<span class="keyword">select</span>  tflag <span class="keyword">from</span> ecology.uf_PTP0102 a  <span class="keyword">where</span> syncdata.order_manage_track.oaorder  <span class="operator">=</span>  a.id) <span class="keyword">where</span> isallinstock <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">--当收货数量大于等于数量的时候也是全部收货</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track <span class="keyword">set</span> isallinstock <span class="operator">=</span> (<span class="keyword">select</span> <span class="keyword">case</span> <span class="keyword">when</span> a.tnum <span class="operator">&gt;=</span> a.num <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span> <span class="keyword">from</span> ecology.uf_PTP0102_dt1 a <span class="keyword">where</span> syncdata.order_manage_track.demandrq <span class="operator">=</span> a.demandrq <span class="keyword">and</span> a.demandrq <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> syncdata.order_manage_track.demandrq <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> ROWNUM <span class="operator">&lt;=</span> <span class="number">1</span>) <span class="keyword">where</span> </span><br><span class="line">isallinstock <span class="operator">=</span><span class="number">0</span>;</span><br><span class="line"><span class="comment">--更新京东订单付款金额为订单金额（供应商为103527时 付款金额等于订单金额）</span></span><br><span class="line"><span class="keyword">update</span> syncdata.order_manage_track <span class="keyword">set</span> FKINFO <span class="operator">=</span> AMOUNT <span class="keyword">where</span> OAREQUEST <span class="keyword">in</span> (<span class="keyword">select</span> oarequest <span class="keyword">from</span> ecology.uf_PTP0102 <span class="keyword">where</span> lifnr <span class="operator">=</span> <span class="number">103527</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--增加操作时间</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> syncdata.order_manage_track</span><br><span class="line"><span class="keyword">ADD</span> column_name <span class="type">TIMESTAMP</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>采购申请</title>
      <link href="/2023/01/05/oa/%E9%87%87%E8%B4%AD%E7%94%B3%E8%AF%B7OA/"/>
      <url>/2023/01/05/oa/%E9%87%87%E8%B4%AD%E7%94%B3%E8%AF%B7OA/</url>
      
        <content type="html"><![CDATA[<p>采购申请</p><h2 id="BUG"><a href="#BUG" class="headerlink" title="BUG"></a>BUG</h2><h3 id="多人审批-审批人不生效问题"><a href="#多人审批-审批人不生效问题" class="headerlink" title="多人审批 审批人不生效问题"></a>多人审批 审批人不生效问题</h3><p>数组的连续id问题 </p><p>比如(1, 2,3 ,4)</p><p>2和3 就被当成一个id了</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17044140202409.png" alt="img"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17044206625332.png" alt="img"></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17044249238036.png" alt="img"><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_17044249741812.png" alt="img">后端返回是没问题的，但是取不到审批人</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">select</span> lastname,id,managerid <span class="keyword">from</span> ecology.hrmresource <span class="keyword">where</span> id <span class="keyword">in</span> (<span class="number">11280</span>,<span class="number">12912</span>, <span class="number">11280</span>,<span class="number">12912</span>, <span class="number">11905</span>,<span class="number">12083</span>,<span class="number">12912</span>, <span class="number">13166</span>, <span class="number">11905</span>,<span class="number">12083</span>,<span class="number">12912</span>, <span class="number">8873</span>, <span class="number">11280</span>,<span class="number">12912</span>, <span class="number">11280</span>,<span class="number">12912</span>, <span class="number">8327</span>, <span class="number">10913</span>, <span class="number">11280</span>,<span class="number">12912</span>, <span class="number">10913</span>, <span class="number">11905</span>,<span class="number">12083</span>,<span class="number">12912</span>, <span class="number">11280</span>,<span class="number">12912</span>, <span class="number">11280</span>,<span class="number">12912</span>, <span class="number">11905</span>,<span class="number">12083</span>,<span class="number">12912</span>, <span class="number">10913</span>, <span class="number">10913</span>, <span class="number">13166</span>, <span class="number">10913</span>, <span class="number">11280</span>,<span class="number">12912</span>, <span class="number">13166</span>, <span class="number">11280</span>,<span class="number">12912</span>, <span class="number">11905</span>,<span class="number">12083</span>,<span class="number">12912</span>, <span class="number">13582</span>, <span class="number">12591</span>, <span class="number">10913</span>, <span class="number">13166</span>, <span class="number">10913</span>, <span class="number">11280</span>,<span class="number">12912</span>, <span class="number">11905</span>,<span class="number">12083</span>,<span class="number">12912</span>, <span class="number">10913</span>)</span><br><span class="line"><span class="keyword">select</span> requestid,kostl,company <span class="keyword">from</span> ecology.formtable_main_56 <span class="keyword">where</span>  <span class="keyword">NO</span> <span class="operator">=</span> <span class="string">&#x27;PR2024000050&#x27;</span></span><br><span class="line"><span class="keyword">select</span> proj <span class="keyword">from</span> ecology.formtable_main_56_dt1 <span class="keyword">where</span> MAINID <span class="operator">=</span> <span class="string">&#x27;2594182&#x27;</span> <span class="keyword">AND</span> NUM <span class="operator">=</span><span class="string">&#x27;2813.000&#x27;</span></span><br></pre></td></tr></table></figure><p>解决方法</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List <span class="title function_">getDeptFnas</span><span class="params">(String company, String kostls)</span> &#123;</span><br><span class="line">        <span class="type">List</span> <span class="variable">datas</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        kostls = <span class="string">&quot;&#x27;&quot;</span> + kostls.replaceAll(<span class="string">&quot;,&quot;</span>, <span class="string">&quot;&#x27;,&#x27;&quot;</span>) + <span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line">        recordSet.executeQuery(mainDao.getFundscenterByUserids(isoracle, company, kostls));</span><br><span class="line">        <span class="keyword">while</span> (recordSet.next()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">boss_code</span> <span class="operator">=</span> recordSet.getString(<span class="string">&quot;BOSS_CODE&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (org.apache.commons.lang3.StringUtils.isNotEmpty(boss_code))&#123;</span><br><span class="line">                String[] bossCodeSplit = boss_code.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">                <span class="keyword">for</span> (String bossCode : bossCodeSplit) &#123;</span><br><span class="line">                    Map&lt;String, Object&gt; data = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">                    data.put(<span class="string">&quot;id&quot;</span>, recordSet.getInt(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">                    data.put(<span class="string">&quot;FICTR&quot;</span>, recordSet.getString(<span class="string">&quot;FICTR&quot;</span>));  <span class="comment">//基金中心编码</span></span><br><span class="line">                    data.put(<span class="string">&quot;BEZEICH&quot;</span>, recordSet.getString(<span class="string">&quot;BEZEICH&quot;</span>));  <span class="comment">//基金中心名称</span></span><br><span class="line">                    data.put(<span class="string">&quot;BOSS_CODE&quot;</span>, bossCode);  <span class="comment">//负责人</span></span><br><span class="line">                    data.put(<span class="string">&quot;PARENT&quot;</span>, recordSet.getString(<span class="string">&quot;PARENT&quot;</span>));  <span class="comment">//上级基金中心</span></span><br><span class="line">                    data.put(<span class="string">&quot;INVALID&quot;</span>, recordSet.getString(<span class="string">&quot;INVALID&quot;</span>));  <span class="comment">//是否冻结</span></span><br><span class="line">                    data.put(<span class="string">&quot;FNAOPR&quot;</span>, recordSet.getString(<span class="string">&quot;FNAOPR&quot;</span>));  <span class="comment">//预算对接人（费用化）</span></span><br><span class="line">                    datas.add(data);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> datas;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> OA </tag>
            
            <tag> 采购申请流程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo实践</title>
      <link href="/2013/07/13/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3hexo/"/>
      <url>/2013/07/13/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3hexo/</url>
      
        <content type="html"><![CDATA[<a href="https://chenbaitao120.gitee.io/2013/07/13/深入理解hexo/" onclick="window.location.replace(this.href); return false;">    <img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231209143728319.png" alt="image-20231209143728319" style="zoom: 100%;"  /></a><span id="more"></span><h1 id="优秀案例"><a href="#优秀案例" class="headerlink" title="优秀案例"></a>优秀案例</h1><p><a href="https://baiyongan.github.io/posts/2566/">https://baiyongan.github.io/posts/2566/</a></p><h1 id="基本结构"><a href="#基本结构" class="headerlink" title="基本结构"></a>基本结构</h1><ul><li><p>hexo网站地址 <a href="https://hexo.io/zh-cn/">https://hexo.io/zh-cn/</a></p></li><li><p>source：放置原始的markdown</p></li><li><p>themes:放置主题 可以进行更改 生成</p></li><li><p>config.yml 配置文件夹 标题 作者 远程部署地址等</p></li></ul><h2 id="生成静态网站"><a href="#生成静态网站" class="headerlink" title="生成静态网站"></a>生成静态网站</h2><ol><li>hexo generate</li><li>hexo g</li><li>生成好的pulic文件夹就直接当成静态网站进行部署</li></ol><h1 id="博客的主题安装和推荐"><a href="#博客的主题安装和推荐" class="headerlink" title="博客的主题安装和推荐"></a>博客的主题安装和推荐</h1><p><a href="https://hexo.io/themes/">https://hexo.io/themes/</a></p><p>1.git clone获取下来</p><p>复制到theme文件夹下面</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231207205207054.png" alt="image-20231207205207054"></p><p>2.修改config.yml</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231207205749630.png" alt="image-20231207205749630"></p><p>启动即可</p><h1 id="发布安装"><a href="#发布安装" class="headerlink" title="发布安装"></a>发布安装</h1><ol><li>npm install -g cnpm –registry&#x3D;<a href="http://registry.npm.taobao.org/">http://registry.npm.taobao.org</a> 安装淘宝镜像源</li><li>npm config get registry</li><li>配置cnpm环境变量</li><li>cnpm install -g hexo-cli 安装博客</li><li>hexo -v验证博客</li><li>hexo init 初始化博客</li><li>hexo -s 启动博客本地</li><li>hexo -n “我的第一篇文章”</li></ol><ul><li><p>部署到远端去 通过git hub上去 github密码 <a href="mailto:&#x35;&#55;&#x34;&#x36;&#x35;&#56;&#50;&#x31;&#56;&#64;&#113;&#113;&#x2e;&#x63;&#x6f;&#109;">&#x35;&#55;&#x34;&#x36;&#x35;&#56;&#50;&#x31;&#56;&#64;&#113;&#113;&#x2e;&#x63;&#x6f;&#109;</a> ysydxhyz147<br><a href="https://github.com/chenbaitao120/baitaochen.gitub.io.git">https://github.com/chenbaitao120/baitaochen.gitub.io.git</a><br>git 新建仓库 仓库命名一定要是自己的昵称baitaochen.github.io<br>_config.yml 编辑<br>-—————————<br>deploy:<br> type: git<br> repo: <a href="https://github.com/chenbaitao120/chenbaitao120.github.io.git">https://github.com/chenbaitao120/chenbaitao120.github.io.git</a><br> branch: main</p></li><li><p>npm install –save hexo-deployer-git 安装git相关组件</p></li><li><p>部署到远端<br>hexo d </p></li><li><p>博客主题:<a href="https://github.com/litten/hexo-theme-yilia">https://github.com/litten/hexo-theme-yilia</a> 素材操作<br>git clone <a href="https://github.com/litten/hexo-theme-yilia.git">https://github.com/litten/hexo-theme-yilia.git</a> thmes&#x2F;yilia 克隆<br>config 里面修改主题为yilia<br>hexo clean 清除一下<br>hexo s 重新开始</p></li></ul><p> 博客地址：<br> <a href="https://chenbaitao120.github.io/">https://chenbaitao120.github.io/</a></p><h1 id="如何自定义博客结构"><a href="#如何自定义博客结构" class="headerlink" title="如何自定义博客结构"></a>如何自定义博客结构</h1><p>hexo.io&#x2F;hexo&#x3D;theme-light&#x2F;</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231207210909960.png" alt="image-20231207210909960"></p><p>其实就是修改html文件</p><p>就算使用网页开发的技术修改静态文件的结构</p><h1 id="如何只展示部分博客内容"><a href="#如何只展示部分博客内容" class="headerlink" title="如何只展示部分博客内容"></a>如何只展示部分博客内容</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--more--&gt;</span><br></pre></td></tr></table></figure><p>在需要展示的内容前面插入以上代码</p><h1 id="如何开始写博客文章以及博客文章的标签"><a href="#如何开始写博客文章以及博客文章的标签" class="headerlink" title="如何开始写博客文章以及博客文章的标签"></a>如何开始写博客文章以及博客文章的标签</h1><p>markdown来写文章</p><p><a href="https://hexo.io/docs/front-matter.html">https://hexo.io/docs/front-matter.html</a></p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231207211805793.png" alt="image-20231207211805793"></p><p>要按照标签的写法。需要学习markdown的语法</p><p><a href="https://blog.csdn.net/qq_40609008/article/details/120198623">https://blog.csdn.net/qq_40609008/article/details/120198623</a></p><h1 id="代码如何美化"><a href="#代码如何美化" class="headerlink" title="代码如何美化"></a>代码如何美化</h1><ol><li><p><a href="https://hexo.io/docs/front-matter.html">https://hexo.io/docs/front-matter.html</a></p></li><li><p>在tag plugins里面描述代码如何书写</p></li><li><p>设置高亮 引入到header里面</p></li></ol><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231207213436853.png" alt="image-20231207213436853"></p><h1 id="本地写作时图床的解决方案"><a href="#本地写作时图床的解决方案" class="headerlink" title="本地写作时图床的解决方案"></a>本地写作时图床的解决方案</h1><ul><li>qiniu.com</li></ul><h1 id="插件的安装"><a href="#插件的安装" class="headerlink" title="插件的安装"></a>插件的安装</h1><ol><li><p><a href="http://ibruce.info/2015/04/04/busuanzi/">http://ibruce.info/2015/04/04/busuanzi/</a></p></li><li><p>hexo.io&#x2F;plugins</p></li><li><p>插件安装在ejs 脚本里面</p></li></ol><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231209140050342.png" alt="image-20231209140050342"></p><h1 id="如何增加搜索的功能"><a href="#如何增加搜索的功能" class="headerlink" title="如何增加搜索的功能"></a>如何增加搜索的功能</h1><ol><li><p>swifty.com</p></li><li><p>自定义site语法进行跳转</p></li><li><p>爬虫 -》 数据库-》接口</p></li></ol><h1 id="多个博客系统接入方案的分析"><a href="#多个博客系统接入方案的分析" class="headerlink" title="多个博客系统接入方案的分析"></a>多个博客系统接入方案的分析</h1><ul><li><p>查看访问的来源，热点图</p></li><li><p>CNZZ</p></li></ul><h1 id="其他文档"><a href="#其他文档" class="headerlink" title="其他文档"></a>其他文档</h1><ul><li><p><a href="https://hexo.io/zh-cn/docs/">https://hexo.io/zh-cn/docs/</a> 中文文档</p></li><li><p><a href="https://zhuanlan.zhihu.com/p/108918133">https://zhuanlan.zhihu.com/p/108918133</a> yilia美化文档</p></li></ul><h1 id="如何设置个人头像"><a href="#如何设置个人头像" class="headerlink" title="如何设置个人头像"></a>如何设置个人头像</h1><ol><li><p>C:\Users\ALIENWARE\blog\themes\yilia_config.yml</p></li><li><p>在主题的配置文件中找到对应的图片地址</p></li></ol><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231209181046198.png" alt="image-20231209181046198"></p><h1 id="如何设置标题头"><a href="#如何设置标题头" class="headerlink" title="如何设置标题头"></a>如何设置标题头</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: hexo学习</span><br><span class="line">date: 2013/7/13 20:46:25</span><br><span class="line">bash declare: true</span><br><span class="line">tags: [hexo标签] </span><br><span class="line">categories: [hexo相关]</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h1 id="yilia的最佳实践"><a href="#yilia的最佳实践" class="headerlink" title="yilia的最佳实践"></a>yilia的最佳实践</h1><p><a href="https://zhuanlan.zhihu.com/p/108918133">https://zhuanlan.zhihu.com/p/108918133</a></p><h1 id="点击分类标签报错问题"><a href="#点击分类标签报错问题" class="headerlink" title="点击分类标签报错问题"></a>点击分类标签报错问题</h1><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231209183403496.png" alt="image-20231209183403496"></p><p>这里去掉url后面的&#x2F;  即可解决问题</p><h1 id="如何实现站内搜索功能"><a href="#如何实现站内搜索功能" class="headerlink" title="如何实现站内搜索功能"></a>如何实现站内搜索功能</h1><h2 id="1-search插件安装"><a href="#1-search插件安装" class="headerlink" title="1.search插件安装"></a>1.search插件安装</h2><p>yilia并没有在网站内搜索内容的功能，只能在所有文章里搜索匹配标题，这不能满足需求。在网上搜了不少资料，但并没有针对这个修改，这对前端基本没有了解的我，自己摸索起来是真的有点困难。在这里记录下自己修改的内容，并不是完善的功能，但是能实现搜索全站内容。</p><p>参考别人基于yilia主题升级的yelee实现的本地搜索功能:<br>MOxfive的博客<br>码农半亩田的博客</p><p>1.search插件安装<br>本地站内搜索都是基于索引文件的，Hexo中可通过hexo-generator-search插件生成XML格式的索引文件，通过hexo-generator-json-content插件生成JSON格式的索引文件，此处选择了hexo-generator-search:<br>npm install –save hexo-generator-search<br>然后在Hexo站点根目录下的_config.yml中添加如下配置即可：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: all</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="2-搜索框添加"><a href="#2-搜索框添加" class="headerlink" title="2.搜索框添加"></a>2.搜索框添加</h2><p>修改主题目录<code>left-col.ejs</code>文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;/nav&gt;</span><br><span class="line">&lt;nav class=&quot;header-smart-menu&quot;&gt;</span><br><span class="line">    &lt;% for (var i in theme.smart_menu)&#123; %&gt;</span><br><span class="line">    &lt;% if(theme.smart_menu[i])&#123; %&gt;</span><br><span class="line">    &lt;a q-on=&quot;click: openSlider(e, &#x27;&lt;%-i%&gt;&#x27;)&quot; href=&quot;javascript:void(0)&quot;&gt;&lt;%= theme.smart_menu[i] %&gt;&lt;/a&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">            &lt;%&#125;%&gt;</span><br><span class="line">&lt;/nav&gt;</span><br><span class="line">在上面这代码后面添加</span><br><span class="line"></span><br><span class="line">&lt;form id=&quot;search-form&quot;&gt; &lt;!-- 搜索框相关 --&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; id=&quot;local-search-input&quot; name=&quot;q&quot; results=&quot;0&quot; style=&quot;text-align:center&quot; placeholder=&quot;站内搜索...&quot; class=&quot;search form-control&quot; autocomplete=&quot;off&quot; autocorrect=&quot;off&quot;/&gt;</span><br><span class="line">    &lt;i class=&quot;fa fa-times&quot; onclick=&quot;resetSearch()&quot;&gt;&lt;/i&gt; &lt;!-- 清空/重置搜索框 --&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;div id=&quot;local-search-result&quot;&gt;&lt;/div&gt; &lt;!-- 搜索结果区 --&gt;</span><br><span class="line">&lt;p class=&#x27;no-result&#x27;&gt;没找到。。。&lt;/p&gt; &lt;!-- 无匹配时显示，注意请在 CSS 中设置默认隐藏 --&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="3-搜索框样式修改"><a href="#3-搜索框样式修改" class="headerlink" title="3.搜索框样式修改"></a>3.搜索框样式修改</h2><p>参考他们的样式，修改<code>C:\Users\ALIENWARE\blog\themes\yilia\source\main.0cf68a.css</code>文件，在最后添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">.search &#123;</span><br><span class="line">  width: 65%;</span><br><span class="line">  height: 25px;</span><br><span class="line">  margin-top: 0px;</span><br><span class="line">  padding: 0;</span><br><span class="line">  font-family: inherit;</span><br><span class="line">  border: 2px solid transparent;</span><br><span class="line">  border-bottom: 3px solid #fff;</span><br><span class="line">  border-radius: 2px;</span><br><span class="line">  opacity: 0.8;</span><br><span class="line">  background: #708090;</span><br><span class="line">&#125;</span><br><span class="line">.search:hover &#123;</span><br><span class="line">  border: 2px solid #d3d3d3;</span><br><span class="line">  opacity: 1;</span><br><span class="line">  box-shadow: 0 0 10px rgba(0,0,0,0.3);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*搜索重置按钮*/</span><br><span class="line">#search-form .fa-times &#123;</span><br><span class="line">  display: none;</span><br><span class="line">  padding: 1px 0.7em;</span><br><span class="line">  box-shadow: 0 0 3px rgba(0,0,0,0.15);</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  color: #ff0000;</span><br><span class="line">&#125;</span><br><span class="line">#search-form .fa-times:active &#123;</span><br><span class="line">  background: #fff;</span><br><span class="line">&#125;</span><br><span class="line">#search-form .fa-times:hover &#123;</span><br><span class="line">  zoom: 1.1;</span><br><span class="line">  padding: 1px 0.6em;</span><br><span class="line">  border: 1px solid #fff;</span><br><span class="line">  box-shadow: 0 0 6px rgba(0,0,0,0.25);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*搜索结果区*/</span><br><span class="line">#local-search-result &#123;</span><br><span class="line">  margin: auto -12% auto -6%;</span><br><span class="line">  font-size: 0.9em;</span><br><span class="line">  text-align: left;</span><br><span class="line">  word-break: break-all;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#local-search-result ul.search-result-list li:hover &#123;</span><br><span class="line">  font-weight: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*单条搜索结果*/</span><br><span class="line">#local-search-result li &#123;</span><br><span class="line">  margin: 0.5em auto;</span><br><span class="line">  border-bottom: 2px solid #d3d3d3;</span><br><span class="line">&#125;</span><br><span class="line">#local-search-result .search-result-list li:hover &#123;</span><br><span class="line">  background: rgba(158,188,226,0.21);</span><br><span class="line">  box-shadow: 0 0 5px rgba(0,0,0,0.2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*匹配的标题*/</span><br><span class="line">#local-search-result a.search-result-title &#123;</span><br><span class="line">  line-height: 1.2;</span><br><span class="line">  font-weight: bold;</span><br><span class="line">  color: #ff000;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*搜索预览段落*/</span><br><span class="line">#local-search-result p.search-result &#123;</span><br><span class="line">  margin: 0.4em auto;</span><br><span class="line">  line-height: 1.2em;</span><br><span class="line">  max-height: 3.6em;</span><br><span class="line">  overflow: hidden;</span><br><span class="line">  text-align: justify;</span><br><span class="line">  color: #fff;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*匹配的关键词*/</span><br><span class="line">#local-search-result em.search-keyword &#123;</span><br><span class="line">  color: #f58e90;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*无匹配搜索结果时显示*/</span><br><span class="line">p.no-result &#123;</span><br><span class="line">  display: none;</span><br><span class="line">  margin: 2em 0 2em 6%;</span><br><span class="line">  padding-bottom: 0.5em;</span><br><span class="line">  text-align: left;</span><br><span class="line">  color: #fff;</span><br><span class="line">  font-family: font-serif serif;</span><br><span class="line">  border-bottom: 2px solid #d3d3d3;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-js文件添加"><a href="#4-js文件添加" class="headerlink" title="4.js文件添加"></a>4.js文件添加</h2><p>在source文件下添加<code>search.js</code>文件，内容问下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">// A local search script with the help of [hexo-generator-search](https://github.com/PaicHyperionDev/hexo-generator-search)</span><br><span class="line">// Copyright (C) 2015 </span><br><span class="line">// Joseph Pan &lt;http://github.com/wzpan&gt;</span><br><span class="line">// Shuhao Mao &lt;http://github.com/maoshuhao&gt;</span><br><span class="line">// Edited by MOxFIVE &lt;http://github.com/MOxFIVE&gt;</span><br><span class="line"></span><br><span class="line">var searchFunc = function(path, search_id, content_id) &#123;</span><br><span class="line">    &#x27;use strict&#x27;;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url: path,</span><br><span class="line">        dataType: &quot;xml&quot;,</span><br><span class="line">        success: function( xmlResponse ) &#123;</span><br><span class="line">            // get the contents from search data</span><br><span class="line">            var datas = $( &quot;entry&quot;, xmlResponse ).map(function() &#123;</span><br><span class="line">                return &#123;</span><br><span class="line">                    title: $( &quot;title&quot;, this ).text(),</span><br><span class="line">                    content: $(&quot;content&quot;,this).text(),</span><br><span class="line">                    url: $( &quot;url&quot; , this).text()</span><br><span class="line">                &#125;;</span><br><span class="line">            &#125;).get();</span><br><span class="line">            var $input = document.getElementById(search_id);</span><br><span class="line">            var $resultContent = document.getElementById(content_id);</span><br><span class="line">            $input.addEventListener(&#x27;input&#x27;, function()&#123;</span><br><span class="line">                var str=&#x27;&lt;ul class=\&quot;search-result-list\&quot;&gt;&#x27;;                </span><br><span class="line">                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);</span><br><span class="line">                $resultContent.innerHTML = &quot;&quot;;</span><br><span class="line">                if (this.value.trim().length &lt;= 0) &#123;</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                // perform local searching</span><br><span class="line">                datas.forEach(function(data) &#123;</span><br><span class="line">                    var isMatch = true;</span><br><span class="line">                    var content_index = [];</span><br><span class="line">                    var data_title = data.title.trim().toLowerCase();</span><br><span class="line">                    var data_content = data.content.trim().replace(/&lt;[^&gt;]+&gt;/g,&quot;&quot;).toLowerCase();</span><br><span class="line">                    var data_url = data.url;</span><br><span class="line">                    var index_title = -1;</span><br><span class="line">                    var index_content = -1;</span><br><span class="line">                    var first_occur = -1;</span><br><span class="line">                    // only match artiles with not empty titles and contents</span><br><span class="line">                    if(data_title != &#x27;&#x27; &amp;&amp; data_content != &#x27;&#x27;) &#123;</span><br><span class="line">                        keywords.forEach(function(keyword, i) &#123;</span><br><span class="line">                            index_title = data_title.indexOf(keyword);</span><br><span class="line">                            index_content = data_content.indexOf(keyword);</span><br><span class="line">                            if( index_title &lt; 0 &amp;&amp; index_content &lt; 0 )&#123;</span><br><span class="line">                                isMatch = false;</span><br><span class="line">                            &#125; else &#123;</span><br><span class="line">                                if (index_content &lt; 0) &#123;</span><br><span class="line">                                    index_content = 0;</span><br><span class="line">                                &#125;</span><br><span class="line">                                if (i == 0) &#123;</span><br><span class="line">                                    first_occur = index_content;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                    // show search results</span><br><span class="line">                    if (isMatch) &#123;</span><br><span class="line">                        str += &quot;&lt;li&gt;&lt;a href=&#x27;&quot;+ data_url +&quot;&#x27; class=&#x27;search-result-title&#x27; target=&#x27;_blank&#x27;&gt;&quot;+ &quot;&gt; &quot; + data_title +&quot;&lt;/a&gt;&quot;;</span><br><span class="line">                        var content = data.content.trim().replace(/&lt;[^&gt;]+&gt;/g,&quot;&quot;);</span><br><span class="line">                        if (first_occur &gt;= 0) &#123;</span><br><span class="line">                            // cut out characters</span><br><span class="line">                            var start = first_occur - 6;</span><br><span class="line">                            var end = first_occur + 6;</span><br><span class="line">                            if(start &lt; 0)&#123;</span><br><span class="line">                                start = 0;</span><br><span class="line">                            &#125;</span><br><span class="line">                            if(start == 0)&#123;</span><br><span class="line">                                end = 10;</span><br><span class="line">                            &#125;</span><br><span class="line">                            if(end &gt; content.length)&#123;</span><br><span class="line">                                end = content.length;</span><br><span class="line">                            &#125;</span><br><span class="line">                            var match_content = content.substr(start, end); </span><br><span class="line">                            // highlight all keywords</span><br><span class="line">                            keywords.forEach(function(keyword)&#123;</span><br><span class="line">                                var regS = new RegExp(keyword, &quot;gi&quot;);</span><br><span class="line">                                match_content = match_content.replace(regS, &quot;&lt;em class=\&quot;search-keyword\&quot;&gt;&quot;+keyword+&quot;&lt;/em&gt;&quot;);</span><br><span class="line">                            &#125;)</span><br><span class="line">                            str += &quot;&lt;p class=\&quot;search-result\&quot;&gt;&quot; + match_content +&quot;...&lt;/p&gt;&quot;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                $resultContent.innerHTML = str;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>F12调试显示searchFunc没有定义，直接把调用放left-col.ejs,通过了。<br>又显示$.ajax不行，在search.js，插一条alert(xxxx);，有弹窗出来。<br>百度是jquery没有，layout.ejs文件里是有<script type="text/javascript" src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>,不明原因，直接把它也插到left-col.ejs里。调试没出错了</p><h2 id="5-实现search"><a href="#5-实现search" class="headerlink" title="5.实现search"></a>5.实现search</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;nav class=&quot;header-smart-menu&quot;&gt;</span><br><span class="line">    &lt;% for (var i in theme.smart_menu)&#123; %&gt;</span><br><span class="line">    &lt;% if(theme.smart_menu[i])&#123; %&gt;</span><br><span class="line">    &lt;a q-on=&quot;click: openSlider(e, &#x27;&lt;%-i%&gt;&#x27;)&quot; href=&quot;javascript:void(0)&quot;&gt;&lt;%= theme.smart_menu[i] %&gt;&lt;/a&gt;</span><br><span class="line">    &lt;% &#125; %&gt;</span><br><span class="line">            &lt;%&#125;%&gt;</span><br><span class="line">&lt;/nav&gt;</span><br><span class="line">&lt;!-- 具体修改的内容在下面 --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;form id=&quot;search-form&quot;&gt; &lt;!-- 搜索框相关 --&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; id=&quot;local-search-input&quot; name=&quot;q&quot; results=&quot;0&quot; style=&quot;text-align:center&quot; placeholder=&quot;站内搜索...&quot; class=&quot;search form-control&quot; autocomplete=&quot;off&quot; autocorrect=&quot;off&quot;/&gt;</span><br><span class="line">    &lt;i class=&quot;fa fa-times&quot; onclick=&quot;resetSearch()&quot;&gt;&lt;/i&gt; &lt;!-- 清空/重置搜索框 --&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;div id=&quot;local-search-result&quot;&gt;&lt;/div&gt; &lt;!-- 搜索结果区 --&gt;</span><br><span class="line">&lt;p class=&#x27;no-result&#x27;&gt;没找到。。。&lt;/p&gt; &lt;!-- 无匹配时显示，注意请在 CSS 中设置默认隐藏 --&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;/search.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var path = &quot;/search.xml&quot;;</span><br><span class="line">searchFunc(path, &#x27;local-search-input&#x27;, &#x27;local-search-result&#x27;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="如何修改背景色"><a href="#如何修改背景色" class="headerlink" title="如何修改背景色"></a>如何修改背景色</h1><p><a href="https://blog.csdn.net/weixin_41287260/article/details/103050813">https://blog.csdn.net/weixin_41287260/article/details/103050813</a></p><p>建议不要改哈，用原生的比较好看，不然还要改各种字体</p><h1 id="如何部署到码云"><a href="#如何部署到码云" class="headerlink" title="如何部署到码云"></a>如何部署到码云</h1><ul><li><a href="https://juejin.cn/post/6844904144013099022">https://juejin.cn/post/6844904144013099022</a></li></ul><h1 id="为什么本地和远程样式有区别"><a href="#为什么本地和远程样式有区别" class="headerlink" title="为什么本地和远程样式有区别"></a>为什么本地和远程样式有区别</h1><ul><li><p><a href="https://www.zhihu.com/question/319817323/answer/2876342437">https://www.zhihu.com/question/319817323/answer/2876342437</a></p></li><li><p><a href="http://www.hzhcontrols.com/new-1790729.html">http://www.hzhcontrols.com/new-1790729.html</a></p></li></ul><h1 id="如何修改代码样式"><a href="#如何修改代码样式" class="headerlink" title="如何修改代码样式"></a>如何修改代码样式</h1><p><a href="https://blog.csdn.net/weixin_41287260/article/details/103051056">https://blog.csdn.net/weixin_41287260/article/details/103051056</a></p><p>修改pc端口字体大小</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">    margin:0;</span><br><span class="line">    font-size:20px;</span><br><span class="line">    font-family:Helvetica Neue, Helvetica, STHeiTi, Arial, sans-serif;</span><br><span class="line">    line-height:1.5;</span><br><span class="line">    color:#333;</span><br><span class="line">    /* background-color:#fff; */</span><br><span class="line">    min-height:100%;</span><br><span class="line">    background: linear-gradient(rgba(250, 246, 246, 0.5), rgba(255, 255, 255, 0.5)), </span><br><span class="line">    /* url(&#x27;./img/u=1766956309,2956233489&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG.webp&#x27;) no-repeat 0% 0%/ cover; */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>移动端样式</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br></pre></td><td class="code"><pre><span class="line"> @media screen and (max-width:800px) &#123;</span><br><span class="line"></span><br><span class="line">    #container,</span><br><span class="line">    body,</span><br><span class="line">    html &#123;</span><br><span class="line">        height: auto;</span><br><span class="line">        overflow-x: hidden;</span><br><span class="line">        overflow-y: auto</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #mobile-nav &#123;</span><br><span class="line">        display: block</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .body-wrap &#123;</span><br><span class="line">        margin-bottom: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .left-col &#123;</span><br><span class="line">        display: none</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .mid-col &#123;</span><br><span class="line">        left: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #header .header-nav,</span><br><span class="line">    .mid-col &#123;</span><br><span class="line">        position: relative</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .wrap-side-operation &#123;</span><br><span class="line">        display: none</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .cloud-tie-wrapper &#123;</span><br><span class="line">        padding: 0;</span><br><span class="line">        min-height: 20px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .tools-col &#123;</span><br><span class="line">        left: -300px;</span><br><span class="line">        width: 300px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .tools-col .tools-wrap &#123;</span><br><span class="line">        padding-top: 48px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .tools-col .tools-section,</span><br><span class="line">    .tools-col .tools-wrap &#123;</span><br><span class="line">        width: 300px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .tools-col .tools-section .search-wrap,</span><br><span class="line">    .tools-col .tools-wrap .search-wrap &#123;</span><br><span class="line">        width: 280px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .tools-col .tools-section .search-tag.tagcloud,</span><br><span class="line">    .tools-col .tools-wrap .search-tag.tagcloud &#123;</span><br><span class="line">        margin-right: -30px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .tools-col .tools-section .search-ul .search-li,</span><br><span class="line">    .tools-col .tools-wrap .search-ul .search-li &#123;</span><br><span class="line">        padding: 5px 20px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .tools-col.show .header-menu.tools-nav &#123;</span><br><span class="line">        display: block</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #container .header-author.fixed &#123;</span><br><span class="line">        position: fixed;</span><br><span class="line">        top: -29px;</span><br><span class="line">        width: 100%;</span><br><span class="line">        color: #ddd</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .mobile-mask &#123;</span><br><span class="line">        width: 100%;</span><br><span class="line">        height: 100%;</span><br><span class="line">        position: fixed;</span><br><span class="line">        top: 0;</span><br><span class="line">        left: 0;</span><br><span class="line">        background: rgba(217, 199, 199, 0.85);</span><br><span class="line">        z-index: 999</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .btnctn &#123;</span><br><span class="line">        position: fixed;</span><br><span class="line">        width: 50px;</span><br><span class="line">        height: 50px;</span><br><span class="line">        top: -5px;</span><br><span class="line">        z-index: 4</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .btnctn .slider-trigger &#123;</span><br><span class="line">        position: absolute;</span><br><span class="line">        z-index: 101;</span><br><span class="line">        width: 42px;</span><br><span class="line">        height: 42px;</span><br><span class="line">        text-align: center;</span><br><span class="line">        line-height: 50px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .btnctn .slider-trigger.back &#123;</span><br><span class="line">        top: 0;</span><br><span class="line">        left: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .btnctn .slider-trigger.list &#123;</span><br><span class="line">        bottom: 0;</span><br><span class="line">        left: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .btnctn .slider-trigger:hover &#123;</span><br><span class="line">        background: #444</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .btnctn .slider-trigger .icon &#123;</span><br><span class="line">        font-size: 24px;</span><br><span class="line">        color: #fff</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article-header &#123;</span><br><span class="line">        border-left: none;</span><br><span class="line">        padding: 0;</span><br><span class="line">        border-bottom: 1px dotted #ddd</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article-header h1 &#123;</span><br><span class="line">        margin-bottom: 10px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article-header .archive-article-date &#123;</span><br><span class="line">        float: none</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .header-subtitle .icon &#123;</span><br><span class="line">        margin: 0 10px;</span><br><span class="line">        color: #d0d0d0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article-info-index.article-info &#123;</span><br><span class="line">        min-height: 40px;</span><br><span class="line">        padding-top: 10px;</span><br><span class="line">        margin: 0;</span><br><span class="line">        border-top: 1px solid #ddd</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article-info-post.article-info &#123;</span><br><span class="line">        margin: 0;</span><br><span class="line">        padding-top: 10px;</span><br><span class="line">        border: none</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #viewer-box .viewer-box-l &#123;</span><br><span class="line">        font-size: 14px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article-nav-link-wrap &#123;</span><br><span class="line">        margin: 5px 0;</span><br><span class="line">        display: block;</span><br><span class="line">        clear: both</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article-nav-link-wrap .icon-circle-right &#123;</span><br><span class="line">        float: left;</span><br><span class="line">        margin: 6px 4px 0 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article &#123;</span><br><span class="line">        margin: 20px;</span><br><span class="line">        border: 1px solid #090202;</span><br><span class="line">        border-top: 1px solid #0f0808;</span><br><span class="line">        border-bottom: 1px solid #0b0404;</span><br><span class="line">        background: rgba(243, 229, 229, 0.966);</span><br><span class="line">        transition: all .2s ease-in</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    .article .article-more-link &#123;</span><br><span class="line">        margin: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article .article-entry &#123;</span><br><span class="line">        padding: 10px 0 30px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article .article-inner h1.article-title,</span><br><span class="line">    .article .article-title &#123;</span><br><span class="line">        font-size: 12px;</span><br><span class="line">        font-weight: 300;</span><br><span class="line">        display: block;</span><br><span class="line">        margin: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article .article-meta &#123;</span><br><span class="line">        width: auto;</span><br><span class="line">        height: 20px;</span><br><span class="line">        margin-top: -5px;</span><br><span class="line">        position: ralative</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article .article-meta .article-date &#123;</span><br><span class="line">        font-size: 12px;</span><br><span class="line">        border-radius: 0;</span><br><span class="line">        color: #070303;</span><br><span class="line">        background: none;</span><br><span class="line">        height: auto;</span><br><span class="line">        padding: 0;</span><br><span class="line">        margin: 0;</span><br><span class="line">        width: 100%;</span><br><span class="line">        text-align: left;</span><br><span class="line">        margin-left: 10px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article .article-meta .article-date time &#123;</span><br><span class="line">        width: auto;</span><br><span class="line">        float: right;</span><br><span class="line">        margin-right: 10px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article .article-meta .article-tag-list &#123;</span><br><span class="line">        margin-top: 7px;</span><br><span class="line">        position: absolute;</span><br><span class="line">        right: 10px;</span><br><span class="line">        top: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article .article-meta .article-tag-list:before &#123;</span><br><span class="line">        float: left;</span><br><span class="line">        margin-top: 1px;</span><br><span class="line">        left: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article .article-meta .article-tag-list .article-tag-list-item &#123;</span><br><span class="line">        float: left;</span><br><span class="line">        padding-left: 0;</span><br><span class="line">        width: auto;</span><br><span class="line">        max-width: 83px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article .article-meta .article-category &#123;</span><br><span class="line">        margin-top: 7px;</span><br><span class="line">        position: absolute;</span><br><span class="line">        right: 10px;</span><br><span class="line">        top: -30px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article .article-meta .article-category:before &#123;</span><br><span class="line">        float: left;</span><br><span class="line">        margin-top: 1px;</span><br><span class="line">        left: 15px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article .article-meta .article-category .article-category-link &#123;</span><br><span class="line">        max-width: 83px;</span><br><span class="line">        width: auto;</span><br><span class="line">        padding-left: 10px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .article #article-nav-older &#123;</span><br><span class="line">        float: none;</span><br><span class="line">        display: block</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .share &#123;</span><br><span class="line">        padding: 3px 10px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #disqus_thread,</span><br><span class="line">    .duoshuo &#123;</span><br><span class="line">        padding: 0 13px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #article-nav &#123;</span><br><span class="line">        margin: 0;</span><br><span class="line">        padding: 5px 10px 10px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #article-nav #article-nav-older &#123;</span><br><span class="line">        float: none</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #article-nav .article-nav-link-wrap .article-nav-title &#123;</span><br><span class="line">        font-size: 16px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #page-nav .extend &#123;</span><br><span class="line">        opacity: 1</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .instagram .open-ins &#123;</span><br><span class="line">        left: 2px;</span><br><span class="line">        top: -30px;</span><br><span class="line">        color: #aaa</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .info-on-right &#123;</span><br><span class="line">        float: none</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .archives-wrap &#123;</span><br><span class="line">        margin: 10px 10px 0;</span><br><span class="line">        padding: 10px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .archives-wrap .archive-article-title &#123;</span><br><span class="line">        font-size: 16px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .archives-wrap .archive-year-wrap &#123;</span><br><span class="line">        position: relative;</span><br><span class="line">        padding: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .archives-wrap .archive-year-wrap a &#123;</span><br><span class="line">        padding: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .archives-wrap .article-meta .archive-article-date &#123;</span><br><span class="line">        font-size: 12px;</span><br><span class="line">        margin-right: 10px;</span><br><span class="line">        margin-top: -5px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .archives-wrap .article-meta .article-tag-list-link &#123;</span><br><span class="line">        font-size: 12px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .archives .archive-article &#123;</span><br><span class="line">        padding: 10px 0;</span><br><span class="line">        margin-left: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #footer &#123;</span><br><span class="line">        position: relative;</span><br><span class="line">        bottom: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #footer .footer-left &#123;</span><br><span class="line">        float: none;</span><br><span class="line">        margin-bottom: 10px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #footer .footer-right &#123;</span><br><span class="line">        float: none</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #mobile-nav .header-author &#123;</span><br><span class="line">        margin: 0;</span><br><span class="line">        position: relative;</span><br><span class="line">        z-index: 2;</span><br><span class="line">        color: #424242</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #mobile-nav .overlay &#123;</span><br><span class="line">        height: 110px;</span><br><span class="line">        position: absolute;</span><br><span class="line">        width: 100%;</span><br><span class="line">        z-index: 2;</span><br><span class="line">        background: #4d4d4d</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #mobile-nav #header &#123;</span><br><span class="line">        padding: 10px 0 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #mobile-nav #header .profilepic &#123;</span><br><span class="line">        display: block;</span><br><span class="line">        position: relative;</span><br><span class="line">        z-index: 100</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .header-menu &#123;</span><br><span class="line">        height: auto;</span><br><span class="line">        margin: 10px 0 20px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .header-menu.tools-nav &#123;</span><br><span class="line">        display: none;</span><br><span class="line">        position: fixed;</span><br><span class="line">        left: 0;</span><br><span class="line">        width: 100%;</span><br><span class="line">        z-index: 9999</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .header-menu.tools-nav ul &#123;</span><br><span class="line">        margin-right: 28px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .header-menu.tools-nav li,</span><br><span class="line">    .header-menu.tools-nav ul &#123;</span><br><span class="line">        border-color: #fff</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .header-menu.tools-nav li a,</span><br><span class="line">    .header-menu.tools-nav ul a &#123;</span><br><span class="line">        color: #fff</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .header-menu.tools-nav li a.active,</span><br><span class="line">    .header-menu.tools-nav ul a.active &#123;</span><br><span class="line">        background: #81b5cc</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .header-menu ul &#123;</span><br><span class="line">        text-align: center;</span><br><span class="line">        cursor: default;</span><br><span class="line">        display: -webkit-box;</span><br><span class="line">        display: -ms-flexbox;</span><br><span class="line">        display: flex;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">        -webkit-box-align: center;</span><br><span class="line">        -ms-flex-align: center;</span><br><span class="line">        align-items: center;</span><br><span class="line">        -ms-flex-pack: distribute;</span><br><span class="line">        justify-content: space-around;</span><br><span class="line">        position: relative;</span><br><span class="line">        z-index: 1;</span><br><span class="line">        border: 1px solid #a0a0a0;</span><br><span class="line">        border-radius: 3px</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .header-menu li &#123;</span><br><span class="line">        border-left: 1px solid #a0a0a0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .header-menu li:first-child &#123;</span><br><span class="line">        border-left: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .header-menu li:last-child &#123;</span><br><span class="line">        border-right: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .header-menu li a &#123;</span><br><span class="line">        font-size: 14px;</span><br><span class="line">        overflow: hidden;</span><br><span class="line">        text-overflow: ellipsis;</span><br><span class="line">        white-space: nowrap;</span><br><span class="line">        display: block;</span><br><span class="line">        color: #a0a0a0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .header-menu li a.active &#123;</span><br><span class="line">        color: #eaeaea;</span><br><span class="line">        background: #a0a0a0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .profilepic &#123;</span><br><span class="line">        display: block;</span><br><span class="line">        border: 5px solid #fff;</span><br><span class="line">        border-radius: 300px;</span><br><span class="line">        width: 128px;</span><br><span class="line">        height: 128px;</span><br><span class="line">        margin: 0 auto;</span><br><span class="line">        position: relative;</span><br><span class="line">        overflow: hidden;</span><br><span class="line">        background: #88acdb;</span><br><span class="line">        -webkit-transition: all .2s ease-in;</span><br><span class="line">        display: -webkit-box;</span><br><span class="line">        -webkit-box-orient: horizontal;</span><br><span class="line">        -webkit-box-pack: center;</span><br><span class="line">        -webkit-box-align: center;</span><br><span class="line">        text-align: center</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .header-author &#123;</span><br><span class="line">        text-align: center;</span><br><span class="line">        margin: .67em 0;</span><br><span class="line">        font-family: Roboto, serif;</span><br><span class="line">        font-size: 30px;</span><br><span class="line">        transition: .3s</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .header-subtitle &#123;</span><br><span class="line">        text-align: center;</span><br><span class="line">        color: #999;</span><br><span class="line">        font-size: 14px;</span><br><span class="line">        line-height: 25px;</span><br><span class="line">        overflow: hidden;</span><br><span class="line">        text-overflow: ellipsis;</span><br><span class="line">        display: -webkit-box;</span><br><span class="line">        -webkit-line-clamp: 2;</span><br><span class="line">        -webkit-box-orient: vertical;</span><br><span class="line">        padding: 0 24px</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure><h1 id="接入评论系统"><a href="#接入评论系统" class="headerlink" title="接入评论系统"></a>接入评论系统</h1><ul><li><p><a href="https://console.leancloud.cn/account/verify">https://console.leancloud.cn/account/verify</a></p></li><li><p>用git 的形式<a href="https://www.dandelioncloud.cn/article/details/1495016180728561665">https://www.dandelioncloud.cn/article/details/1495016180728561665</a></p></li><li><p><a href="https://github.com/settings/applications/2407901">https://github.com/settings/applications/2407901</a></p></li><li><p>使用gittalk</p></li><li><p><a href="https://blog.csdn.net/tangguoxing000/article/details/104187400">https://blog.csdn.net/tangguoxing000/article/details/104187400</a></p></li><li><p><strong>推荐使用畅言</strong></p></li><li><p><a href="https://changyan.kuaizhan.com/v3/changyan/overview">https://changyan.kuaizhan.com/v3/changyan/overview</a></p></li></ul><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231210113200093.png" alt="image-20231210113200093"></p><p>配置到yilia的config.yml里面即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#3、畅言</span><br><span class="line">changyan_appid: cyx2mTY0U</span><br><span class="line">changyan_conf: 668c5e8c687da163f670569a23b7f88b</span><br></pre></td></tr></table></figure><h1 id="如何添加目录"><a href="#如何添加目录" class="headerlink" title="如何添加目录"></a>如何添加目录</h1><p>在yilia的_config.yml文件里配置</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># 目录</span><br><span class="line"># 目录设定：0-不显示目录； 1-文章对应的md文件里有toc:true属性，才有目录； 2-所有文章均显示目录</span><br><span class="line">toc: 2</span><br><span class="line"># 根据自己的习惯来设置，如果你的目录标题习惯有标号，置为true即可隐藏hexo重复的序号；否则置为false</span><br><span class="line">toc_hide_index: true</span><br><span class="line"># 目录为空时的提示</span><br><span class="line">toc_empty_wording: &#x27;目录，不存在的…&#x27;</span><br><span class="line"></span><br><span class="line"># 是否有快速回到顶部的按钮</span><br><span class="line">top: true</span><br></pre></td></tr></table></figure><p>前置目录设为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 目录内容 --&gt;</span><br><span class="line">&lt;% if (!index &amp;&amp; post.toc)&#123; %&gt;</span><br><span class="line">  &lt;p class=&quot;show-toc-btn&quot; id=&quot;show-toc-btn&quot; onclick=&quot;showToc();&quot; style=&quot;display:none&quot;&gt;</span><br><span class="line">  &lt;span class=&quot;btn-bg&quot;&gt;&lt;/span&gt;</span><br><span class="line">  &lt;span class=&quot;btn-text&quot;&gt;文章导航&lt;/span&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;div id=&quot;toc-article&quot; class=&quot;toc-article&quot;&gt;</span><br><span class="line">      &lt;span id=&quot;toc-close&quot; class=&quot;toc-close&quot; title=&quot;隐藏导航&quot; onclick=&quot;showBtn();&quot;&gt;×&lt;/span&gt;</span><br><span class="line">      &lt;strong class=&quot;toc-title&quot;&gt;文章目录&lt;/strong&gt;</span><br><span class="line">      &lt;%- toc(post.content) %&gt;</span><br><span class="line"> &lt;/div&gt;</span><br><span class="line"> &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">  function showToc()&#123;</span><br><span class="line">      var toc_article = document.getElementById(&quot;toc-article&quot;);</span><br><span class="line">      var show_toc_btn = document.getElementById(&quot;show-toc-btn&quot;);</span><br><span class="line">      toc_article.setAttribute(&quot;style&quot;,&quot;display:block&quot;);</span><br><span class="line">      show_toc_btn.setAttribute(&quot;style&quot;,&quot;display:none&quot;);</span><br><span class="line">      &#125;;</span><br><span class="line">  function showBtn()&#123;</span><br><span class="line">      var toc_article = document.getElementById(&quot;toc-article&quot;);</span><br><span class="line">      var show_toc_btn = document.getElementById(&quot;show-toc-btn&quot;);</span><br><span class="line">      toc_article.setAttribute(&quot;style&quot;,&quot;display:none&quot;);</span><br><span class="line">      show_toc_btn.setAttribute(&quot;style&quot;,&quot;display:block&quot;);</span><br><span class="line">      &#125;;</span><br><span class="line"> &lt;/script&gt;</span><br><span class="line">&lt;% &#125; %&gt;     </span><br><span class="line">&lt;!-- 目录内容结束 --&gt;</span><br></pre></td></tr></table></figure><h1 id="如何添加密码"><a href="#如何添加密码" class="headerlink" title="如何添加密码"></a>如何添加密码</h1><ul><li>在模板文件任意位置插入</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  &lt;script&gt;</span><br><span class="line">    (function()&#123;</span><br><span class="line">      let password2 =  &#x27;&lt;%= page.password2 %&gt;&#x27; ;</span><br><span class="line">      if(password2 != &#x27;&#x27;)&#123;</span><br><span class="line">        if(prompt(&#x27;请输入密码&#x27;) != password2)&#123;</span><br><span class="line">            history.back();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>标题位置配置密码</li></ul><h1 id="如何点击图片放大"><a href="#如何点击图片放大" class="headerlink" title="如何点击图片放大"></a>如何点击图片放大</h1><ul><li><a href="https://blog.csdn.net/smileyan9/article/details/124333810">https://blog.csdn.net/smileyan9/article/details/124333810</a></li></ul><h1 id="如何接入分享"><a href="#如何接入分享" class="headerlink" title="如何接入分享"></a>如何接入分享</h1><ul><li><a href="https://new.dashboard.mob.com/#/shareSDK">https://new.dashboard.mob.com/#/shareSDK</a> sdk网站</li><li><a href="https://www.jianshu.com/p/cb0a105d7a81">https://www.jianshu.com/p/cb0a105d7a81</a> 操作指南</li></ul><h1 id="如何隐藏左边侧栏"><a href="#如何隐藏左边侧栏" class="headerlink" title="如何隐藏左边侧栏"></a>如何隐藏左边侧栏</h1><p><a href="https://cqh-i.github.io/2019/08/07/hexo-yilia%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E9%9A%90%E8%97%8F%E5%B7%A6%E8%BE%B9%E6%A0%8F%E7%9B%AE%E6%8C%89%E9%92%AE/">hexo yilia主题添加隐藏左边栏目按钮 | 锦瑟年华,逐梦之人 (cqh-i.github.io)</a></p><h1 id="如何防爬"><a href="#如何防爬" class="headerlink" title="如何防爬"></a>如何防爬</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">要实现输入密码后才显示某个内容的逻辑，您可以通过将这段逻辑与密码检查相关联的代码整合在一起。以下是一个简单的改进版本：</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;article-entry&quot; itemprop=&quot;articleBody&quot;&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    (function()&#123;</span><br><span class="line">      var showAllArticle = &quot;1&quot;;</span><br><span class="line">      alert(showAllArticle)</span><br><span class="line">      let password2 = &#x27;&lt;%= page.password2 %&gt;&#x27;;</span><br><span class="line">      var passwordEntered = false; // 定义一个变量来跟踪密码是否输入正确</span><br><span class="line"></span><br><span class="line">      if(password2 != &#x27;&#x27;)&#123;</span><br><span class="line">        passwordEntered = prompt(&#x27;请输入密码&#x27;) === password2;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // 基于密码输入结果，进行处理</span><br><span class="line">      if (!passwordEntered &amp;&amp; password2 != &#x27;&#x27;) &#123;</span><br><span class="line">          history.back();</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      // 当密码正确，或没有设置密码时进行内容显示</span><br><span class="line">      window.addEventListener(&#x27;load&#x27;, function() &#123;</span><br><span class="line">          if (passwordEntered || password2 === &#x27;&#x27;) &#123;</span><br><span class="line">              document.getElementById(&#x27;protectedContent&#x27;).style.display = &#x27;block&#x27;;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;)();</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">  &lt;% if (page.type === &quot;tags&quot;) &#123; %&gt;</span><br><span class="line">    ... (其他内容)</span><br><span class="line">  &lt;% &#125; else if (page.type === &#x27;categories&#x27;) &#123; %&gt;</span><br><span class="line">    ... (其他内容)</span><br><span class="line">  &lt;% &#125; else &#123; %&gt;</span><br><span class="line">    &lt;!-- 这部分内容受密码保护 --&gt;</span><br><span class="line">    &lt;div id=&quot;protectedContent&quot; style=&quot;display: none;&quot;&gt;</span><br><span class="line">      &lt;% if (post.excerpt &amp;&amp; index)&#123; %&gt;     </span><br><span class="line">        &lt;%- post.excerpt %&gt;</span><br><span class="line">      &lt;% &#125; else &#123; %&gt;</span><br><span class="line">        &lt;%- post.content %&gt;</span><br><span class="line">      &lt;% &#125; %&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;article-entry&quot; itemprop=&quot;articleBody&quot;&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    (function()&#123;</span><br><span class="line">      var showAllArticle = &quot;1&quot;;</span><br><span class="line">      alert(showAllArticle)</span><br><span class="line">      let password2 = &#x27;&lt;%= page.password2 %&gt;&#x27;;</span><br><span class="line">      var passwordEntered = false; // 定义一个变量来跟踪密码是否输入正确</span><br><span class="line"></span><br><span class="line">      if(password2 != &#x27;&#x27;)&#123;</span><br><span class="line">        passwordEntered = prompt(&#x27;请输入密码&#x27;) === password2;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // 基于密码输入结果，进行处理</span><br><span class="line">      if (!passwordEntered &amp;&amp; password2 != &#x27;&#x27;) &#123;</span><br><span class="line">          history.back();</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      // 当密码正确，或没有设置密码时进行内容显示</span><br><span class="line">      window.addEventListener(&#x27;load&#x27;, function() &#123;</span><br><span class="line">          if (passwordEntered || password2 === &#x27;&#x27;) &#123;</span><br><span class="line">              document.getElementById(&#x27;protectedContent&#x27;).style.display = &#x27;block&#x27;;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;)();</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">  &lt;% if (page.type === &quot;tags&quot;) &#123; %&gt;</span><br><span class="line">    ... (其他内容)</span><br><span class="line">  &lt;% &#125; else if (page.type === &#x27;categories&#x27;) &#123; %&gt;</span><br><span class="line">    ... (其他内容)</span><br><span class="line">  &lt;% &#125; else &#123; %&gt;</span><br><span class="line">    &lt;!-- 这部分内容受密码保护 --&gt;</span><br><span class="line">    &lt;div id=&quot;protectedContent&quot; style=&quot;display: none;&quot;&gt;</span><br><span class="line">      &lt;% if (post.excerpt &amp;&amp; index)&#123; %&gt;     </span><br><span class="line">        &lt;%- post.excerpt %&gt;</span><br><span class="line">      &lt;% &#125; else &#123; %&gt;</span><br><span class="line">        &lt;%- post.content %&gt;</span><br><span class="line">      &lt;% &#125; %&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">​</span><br><span class="line">注意：</span><br><span class="line"></span><br><span class="line">我引入了 ​passwordEntered​变量来记录用户是否正确输入了密码。</span><br><span class="line">只有当用户正确输入密码后，​protectedContent​元素才会显示（通过JavaScript在文档加载后调整样式）。</span><br><span class="line">这种做法不是特别安全，因为JavaScript中定义的所有东西都可以被用户检查和修改。更安全的方法会涉及服务端验证，但这需要服务器支持，这里只提供基于客户端的简单方式。</span><br></pre></td></tr></table></figure><h1 id="如何保证你的仓库安全"><a href="#如何保证你的仓库安全" class="headerlink" title="如何保证你的仓库安全"></a>如何保证你的仓库安全</h1><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231223210214709.png" alt="image-20231223210214709"></p><p>把推拉代码关掉 就没办法拉取你的代码了</p><h1 id="如何生成PPT"><a href="#如何生成PPT" class="headerlink" title="如何生成PPT"></a>如何生成PPT</h1><p><a href="https://blog.csdn.net/qq_43453731/article/details/106200454">https://blog.csdn.net/qq_43453731/article/details/106200454</a></p><p>用这种方式构建好PPT</p><p>在用链接引用PPT地址就可以</p><p><img src="https://gulimall-chenbaitao.oss-cn-hangzhou.aliyuncs.com/typora/image-20231223221359261.png" alt="image-20231223221359261"></p><h1 id="如何过滤某些标签"><a href="#如何过滤某些标签" class="headerlink" title="如何过滤某些标签"></a>如何过滤某些标签</h1><p><a href="https://blog.csdn.net/melordljm/article/details/51833062">https://blog.csdn.net/melordljm/article/details/51833062</a></p><h1 id="如何生成日历云"><a href="#如何生成日历云" class="headerlink" title="如何生成日历云"></a>如何生成日历云</h1><p><a href="https://blog.csdn.net/SpkingR/article/details/83473482">https://blog.csdn.net/SpkingR/article/details/83473482</a></p><p>值得注意的是需要修改calendar.js 让链接可以关联到</p><p>还有css文件要自己调整一下</p>]]></content>
      
      
      <categories>
          
          <category> IT </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 过滤 </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>分类 |归档</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>标签</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
